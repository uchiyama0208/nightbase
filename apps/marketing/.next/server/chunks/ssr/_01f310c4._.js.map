{"version":3,"sources":["../../../../../../apps/marketing/src/components/layouts/AuroraPage.tsx","../../../../../../apps/marketing/src/lib/blog.ts","../../../../../../apps/marketing/src/components/blog/BlogPostList.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/marketing/src/app/%28marketing%29/blog/page.tsx"],"sourcesContent":["import type { ReactNode } from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\ntype AuroraVariant = \"indigo\" | \"violet\" | \"teal\" | \"amber\";\n\nconst gradientMap: Record<AuroraVariant, string> = {\n  indigo: \"bg-gradient-to-br from-[#c7d2fe]/80 via-[#e0f2ff]/70 to-[#c4f1ff]/80\",\n  violet: \"bg-gradient-to-br from-[#e0c3fc]/70 via-[#c1d3ff]/70 to-[#d4fcf7]/60\",\n  teal: \"bg-gradient-to-br from-[#bbf7d0]/70 via-[#bae6fd]/70 to-[#ede9fe]/70\",\n  amber: \"bg-gradient-to-br from-[#ffe4c7]/70 via-[#dbeafe]/60 to-[#e9d5ff]/70\",\n};\n\ninterface AuroraPageProps {\n  children: ReactNode;\n  className?: string;\n  containerClassName?: string;\n  variant?: AuroraVariant;\n}\n\nexport function AuroraPage({\n  children,\n  className,\n  containerClassName,\n  variant = \"indigo\",\n}: AuroraPageProps) {\n  return (\n    <div className={cn(\"relative isolate overflow-hidden py-20 sm:py-28\", className)}>\n      <div\n        aria-hidden\n        className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.96),_transparent_65%)]\"\n      />\n      <div aria-hidden className={cn(\"pointer-events-none absolute inset-0 opacity-80 blur-3xl\", gradientMap[variant])} />\n      <div\n        aria-hidden\n        className=\"pointer-events-none absolute left-1/2 top-10 h-48 w-[60vw] -translate-x-1/2 rounded-full bg-white/60 blur-[140px]\"\n      />\n      <div\n        aria-hidden\n        className=\"pointer-events-none absolute inset-x-0 bottom-0 h-64 bg-[radial-gradient(circle_at_bottom,_rgba(95,111,255,0.1),_transparent_60%)]\"\n      />\n      <div className={cn(\"container relative z-10 space-y-16\", containerClassName)}>{children}</div>\n    </div>\n  );\n}\n","import type { BlogPost } from \"@/types/blog\";\nimport type { Database } from \"@/types/supabase\";\n\nimport { createClient } from \"./supabaseClient\";\n\ntype CmsEntryRow = Pick<\n  Database[\"public\"][\"Tables\"][\"cms_entries\"][\"Row\"],\n  \"id\" | \"type\" | \"slug\" | \"title\" | \"body\" | \"excerpt\" | \"tags\" | \"cover_image_url\" | \"status\" | \"published_at\"\n>;\n\nfunction mapRowToBlogPost(row: CmsEntryRow): BlogPost {\n  const slug = (row.slug ?? \"\").trim();\n\n  return {\n    id: row.id,\n    slug,\n    title: row.title ?? \"\",\n    content: row.body ?? \"\",\n    excerpt: row.excerpt ?? null,\n    cover_image_url: row.cover_image_url ?? null,\n    tags: row.tags ?? [],\n    published_at: row.published_at ?? null,\n    created_at: null,\n    updated_at: null,\n    status: row.status === \"published\" ? \"published\" : \"draft\",\n  };\n}\n\nconst BLOG_POST_FIELDS =\n  \"id, type, slug, title, body, excerpt, cover_image_url, tags, published_at, status\";\n\nexport async function getPublishedBlogPosts(): Promise<BlogPost[]> {\n  const supabase = createClient();\n  const nowIso = new Date().toISOString();\n\n  const { data, error } = await supabase\n    .from(\"cms_entries\")\n    .select(BLOG_POST_FIELDS)\n    .eq(\"type\", \"blog\")\n    .eq(\"status\", \"published\")\n    .or(`published_at.is.null,published_at.lte.${nowIso}`)\n    .order(\"published_at\", { ascending: false, nullsFirst: false });\n\n  if (error) {\n    console.error(\"ブログ記事一覧の取得に失敗しました\", error);\n    throw new Error(\"ブログ記事一覧の取得に失敗しました\");\n  }\n\n  const rows: CmsEntryRow[] = data ?? [];\n  return rows\n    .map(mapRowToBlogPost)\n    .filter((post) => post.slug.length > 0 && post.status === \"published\");\n}\n\nexport async function getPublishedBlogPostBySlug(slug: string): Promise<BlogPost | null> {\n  const normalizedSlug = slug.trim();\n\n  if (!normalizedSlug) {\n    return null;\n  }\n\n  // 一覧と同じ取得条件で記事一覧を取り、その中から slug 一致のものを探す\n  const posts = await getPublishedBlogPosts();\n  console.log(\"[Blog] getBySlug\", {\n    normalizedSlug,\n    slugs: posts.map((post) => post.slug),\n  });\n\n  const found = posts.find((post) => post.slug === normalizedSlug);\n\n  console.log(\"[Blog] found\", !!found);\n\n  return found ?? null;\n}\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const BlogPostList = registerClientReference(\n    function() { throw new Error(\"Attempted to call BlogPostList() from the server but BlogPostList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/marketing/src/components/blog/BlogPostList.tsx\",\n    \"BlogPostList\",\n);\n","import Link from \"next/link\";\n\nimport { BlogPostList } from \"@/components/blog/BlogPostList\";\nimport { AuroraPage } from \"@/components/layouts/AuroraPage\";\nimport { siteContent } from \"@/content/site\";\nimport { getPublishedBlogPosts } from \"@/lib/blog\";\n\nexport default async function BlogPage() {\n  const posts = await getPublishedBlogPosts();\n  const { title, description } = siteContent.blog;\n\n  return (\n    <AuroraPage variant=\"violet\" containerClassName=\"space-y-16 px-3 sm:px-4\">\n      <section className=\"text-center\">\n        <div className=\"space-y-6\">\n          <span className=\"inline-flex items-center rounded-full border border-white/50 bg-white/30 px-4 py-1 text-xs font-semibold uppercase tracking-[0.25em] text-primary\">\n            Blog\n          </span>\n          <h1 className=\"text-4xl font-semibold text-[#0f172a] sm:text-5xl\">{title}</h1>\n          <p className=\"mx-auto max-w-3xl text-lg leading-relaxed text-neutral-600\">{description}</p>\n        </div>\n      </section>\n      <BlogPostList posts={posts} />\n    </AuroraPage>\n  );\n}\n\nexport const dynamic = 'force-dynamic';\nexport const revalidate = 0;\n"],"names":[],"mappings":"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","ignoreList":[2]}