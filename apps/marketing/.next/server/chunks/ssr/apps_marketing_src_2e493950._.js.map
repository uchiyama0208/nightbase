{"version":3,"sources":["../../../../../../apps/marketing/src/components/layouts/AuroraPage.tsx","../../../../../../apps/marketing/src/lib/manual.ts","../../../../../../apps/marketing/src/components/manual/ManualSidebar.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/marketing/src/app/manual/layout.tsx"],"sourcesContent":["import type { ReactNode } from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\ntype AuroraVariant = \"indigo\" | \"violet\" | \"teal\" | \"amber\";\n\nconst gradientMap: Record<AuroraVariant, string> = {\n  indigo: \"bg-gradient-to-br from-[#c7d2fe]/80 via-[#e0f2ff]/70 to-[#c4f1ff]/80\",\n  violet: \"bg-gradient-to-br from-[#e0c3fc]/70 via-[#c1d3ff]/70 to-[#d4fcf7]/60\",\n  teal: \"bg-gradient-to-br from-[#bbf7d0]/70 via-[#bae6fd]/70 to-[#ede9fe]/70\",\n  amber: \"bg-gradient-to-br from-[#ffe4c7]/70 via-[#dbeafe]/60 to-[#e9d5ff]/70\",\n};\n\ninterface AuroraPageProps {\n  children: ReactNode;\n  className?: string;\n  containerClassName?: string;\n  variant?: AuroraVariant;\n}\n\nexport function AuroraPage({\n  children,\n  className,\n  containerClassName,\n  variant = \"indigo\",\n}: AuroraPageProps) {\n  return (\n    <div className={cn(\"relative isolate overflow-hidden py-20 sm:py-28\", className)}>\n      <div\n        aria-hidden\n        className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.96),_transparent_65%)]\"\n      />\n      <div aria-hidden className={cn(\"pointer-events-none absolute inset-0 opacity-80 blur-3xl\", gradientMap[variant])} />\n      <div\n        aria-hidden\n        className=\"pointer-events-none absolute left-1/2 top-10 h-48 w-[60vw] -translate-x-1/2 rounded-full bg-white/60 blur-[140px]\"\n      />\n      <div\n        aria-hidden\n        className=\"pointer-events-none absolute inset-x-0 bottom-0 h-64 bg-[radial-gradient(circle_at_bottom,_rgba(95,111,255,0.1),_transparent_60%)]\"\n      />\n      <div className={cn(\"container relative z-10 space-y-16\", containerClassName)}>{children}</div>\n    </div>\n  );\n}\n","import { createClient } from \"@/lib/supabaseClient\";\nimport type { ManualPage } from \"@/types/manual\";\nimport type { Database } from \"@/types/supabase\";\n\nfunction hasSupabaseEnv() {\n  return Boolean(process.env.NEXT_PUBLIC_SUPABASE_URL && process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\n}\n\ntype CmsEntryRow = Pick<\n  Database[\"public\"][\"Tables\"][\"cms_entries\"][\"Row\"],\n  \"id\" | \"type\" | \"slug\" | \"title\" | \"body\" | \"status\" | \"published_at\"\n>;\n\nfunction mapRowToManualPage(row: CmsEntryRow): ManualPage {\n  return {\n    id: row.id,\n    slug: row.slug,\n    title: row.title ?? \"\",\n    section: \"general\",\n    body_markdown: row.body ?? null,\n    order: 0,\n    status: row.status === \"published\" ? \"published\" : \"draft\",\n    published_at: row.published_at ?? null,\n    created_at: null,\n    updated_at: null,\n  };\n}\n\nexport async function getPublishedManualPages(): Promise<ManualPage[]> {\n  if (!hasSupabaseEnv()) {\n    console.warn(\"Supabase環境変数が未設定のため、マニュアルページの取得をスキップします。\");\n    return [];\n  }\n\n  const supabase = createClient();\n\n  const { data, error } = await supabase\n    .from(\"cms_entries\")\n    .select(\"id, type, slug, title, body, status, published_at\")\n    .eq(\"type\", \"manual\")\n    .eq(\"status\", \"published\")\n    .order(\"published_at\", { ascending: true, nullsFirst: false })\n    .order(\"title\", { ascending: true });\n\n  if (error) {\n    console.error(\"Failed to fetch manual pages\", error);\n    return [];\n  }\n\n  const rows: CmsEntryRow[] = data ?? [];\n  return rows.map(mapRowToManualPage);\n}\n\nexport async function getManualPageBySlug(slug: string): Promise<ManualPage | null> {\n  if (!hasSupabaseEnv()) {\n    console.warn(\"Supabase環境変数が未設定のため、マニュアルページの取得をスキップします。\");\n    return null;\n  }\n\n  const supabase = createClient();\n\n  const { data, error } = await supabase\n    .from(\"cms_entries\")\n    .select(\"id, type, slug, title, body, status, published_at\")\n    .eq(\"type\", \"manual\")\n    .eq(\"slug\", slug.trim())\n    .eq(\"status\", \"published\")\n    .maybeSingle();\n\n  if (error) {\n    console.error(\"Failed to fetch manual page\", error);\n    return null;\n  }\n\n  if (!data) return null;\n\n  return mapRowToManualPage(data as CmsEntryRow);\n}\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ManualSidebar = registerClientReference(\n    function() { throw new Error(\"Attempted to call ManualSidebar() from the server but ManualSidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/marketing/src/components/manual/ManualSidebar.tsx\",\n    \"ManualSidebar\",\n);\n","import type { ReactNode } from \"react\";\n\nimport { AuroraPage } from \"@/components/layouts/AuroraPage\";\nimport { ManualSidebar } from \"@/components/manual/ManualSidebar\";\nimport { getPublishedManualPages } from \"@/lib/manual\";\n\nexport default async function ManualLayout({ children }: { children: ReactNode }) {\n  const pages = await getPublishedManualPages();\n\n  return (\n    <AuroraPage variant=\"violet\" containerClassName=\"max-w-6xl space-y-14 px-3 sm:px-4\">\n      <div className=\"grid gap-10 lg:grid-cols-[260px_minmax(0,1fr)]\">\n        <ManualSidebar pages={pages} />\n        <div className=\"space-y-10\">{children}</div>\n      </div>\n    </AuroraPage>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[2]}