{"version":3,"sources":["../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../../../node_modules/lucide-react/src/icons/refresh-cw.ts","../../../../../../apps/app/src/app/admin/cms/blog/%5Bid%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name RefreshCw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAwIDEgOS05IDkuNzUgOS43NSAwIDAgMSA2Ljc0IDIuNzRMMjEgOCIgLz4KICA8cGF0aCBkPSJNMjEgM3Y1aC01IiAvPgogIDxwYXRoIGQ9Ik0yMSAxMmE5IDkgMCAwIDEtOSA5IDkuNzUgOS43NSAwIDAgMS02Ljc0LTIuNzRMMyAxNiIgLz4KICA8cGF0aCBkPSJNOCAxNkgzdjUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/refresh-cw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RefreshCw = createLucideIcon('RefreshCw', [\n  ['path', { d: 'M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8', key: 'v9h5vc' }],\n  ['path', { d: 'M21 3v5h-5', key: '1q7to0' }],\n  ['path', { d: 'M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16', key: '3uifl3' }],\n  ['path', { d: 'M8 16H3v5', key: '1cv678' }],\n]);\n\nexport default RefreshCw;\n","\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport { Loader2, RefreshCw } from \"lucide-react\";\n\nimport { AdminProtected } from \"@/components/admin/AdminProtected\";\nimport { BlogEditor, type BlogEditorValues } from \"@/components/admin/cms/BlogEditor\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function AdminBlogEditorPage() {\n  const params = useParams<{ id?: string | string[] }>();\n  const idParam = params?.id;\n  const id = Array.isArray(idParam) ? idParam[0] : idParam;\n\n  return (\n    <AdminProtected>\n      {({ supabase }) => (\n        id ? (\n          <BlogEditorLoader supabase={supabase} id={id} />\n        ) : (\n          <div className=\"rounded-3xl border border-red-400/40 bg-red-500/10 p-8 text-center text-sm text-red-100\">\n            編集対象の記事 ID が見つかりませんでした。\n          </div>\n        )\n      )}\n    </AdminProtected>\n  );\n}\n\nfunction BlogEditorLoader({ supabase, id }: { supabase: any; id: string }) {\n  const [state, setState] = useState<{\n    loading: boolean;\n    error: string | null;\n    data: BlogEditorValues | null;\n  }>({ loading: true, error: null, data: null });\n\n  const fetchPost = useCallback(async () => {\n    setState((prev) => ({ ...prev, loading: true, error: null }));\n    const { data, error } = await supabase\n      .from(\"cms_entries\")\n      .select(\"id, type, title, slug, body, excerpt, tags, cover_image_url, status, published_at\")\n      .eq(\"id\", id)\n      .eq(\"type\", \"blog\")\n      .maybeSingle();\n\n    console.log(\"[AdminBlogEditorPage] fetch result\", { data, error });\n\n    if (error) {\n      setState({ loading: false, error: error.message ?? \"記事の取得に失敗しました\", data: null });\n      return;\n    }\n\n    if (!data) {\n      setState({ loading: false, error: \"記事が見つかりません\", data: null });\n      return;\n    }\n\n    const tags: string[] = Array.isArray((data as any).tags)\n      ? ((data as any).tags as string[])\n      : [];\n\n    const primaryCategory = tags.length > 0 ? tags[0] : \"\";\n\n    const mapped: BlogEditorValues = {\n      id: data.id,\n      previousSlug: data.slug,\n      title: data.title,\n      slug: data.slug,\n      content: (data as any).body ?? \"\",\n      excerpt: (data as any).excerpt ?? \"\",\n      category: primaryCategory,\n      categories: tags,\n      cover_image_url: (data as any).cover_image_url ?? \"\",\n      status: (data.status as BlogEditorValues[\"status\"]) ?? \"draft\",\n      published_at: data.published_at ?? \"\",\n    };\n\n    setState({ loading: false, error: null, data: mapped });\n  }, [supabase, id]);\n\n  useEffect(() => {\n    fetchPost();\n  }, [fetchPost]);\n\n  if (state.loading) {\n    return (\n      <div className=\"flex min-h-[50vh] flex-col items-center justify-center gap-3 rounded-3xl border border-white/10 bg-white/5 p-12 text-slate-300\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n        <p>記事を読み込んでいます…</p>\n      </div>\n    );\n  }\n\n  if (state.error || !state.data) {\n    return (\n      <div className=\"flex min-h-[40vh] flex-col items-center justify-center gap-4 rounded-3xl border border-red-400/20 bg-red-500/5 p-10 text-center text-sm text-red-100\">\n        <p>{state.error ?? \"記事データを取得できませんでした。\"}</p>\n        <Button onClick={fetchPost} variant=\"outline\" className=\"gap-2 border-white/30 text-white\">\n          <RefreshCw className=\"h-4 w-4\" /> 再読み込み\n        </Button>\n      </div>\n    );\n  }\n\n  return <BlogEditor initialData={state.data} supabaseClient={supabase} />;\n}\n\nexport const dynamic = 'force-dynamic';\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml","ReactServerDOMTurbopackClient","React","AppRouterContext","ReactDOM"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6]}