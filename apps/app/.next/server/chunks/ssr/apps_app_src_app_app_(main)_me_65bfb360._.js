module.exports=[44451,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(59623),e=a.i(70106);let f=(0,e.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),g=(0,e.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var h=a.i(92258);let i=(0,e.default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),j=(0,e.default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),k=(0,e.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l=(0,e.default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var m=a.i(33441),n=a.i(77156),o=a.i(41379),p=a.i(45750),q=a.i(92772),r=a.i(11587),s=a.i(5050),t=(0,s.createServerReference)("409f2946cba878b9b7e24b1b1318c211c4fa668f4e",s.callServer,void 0,s.findSourceMapURL,"updateUserEmail"),u=(0,s.createServerReference)("406d72d3c3349be9ee3a0d8faf4aaea221fd59aa62",s.callServer,void 0,s.findSourceMapURL,"updateUserPassword"),v=(0,s.createServerReference)("602701cf9b26122e06a59b45db5cd44f4aed6c9a51",s.callServer,void 0,s.findSourceMapURL,"enableEmailLogin");function w({initialEmail:a,initialName:e,identities:s,userId:w,lineUserId:x}){let{theme:y,setTheme:z}=(0,d.useTheme)(),[A,B]=(0,c.useState)(a),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)(""),[W,X]=(0,c.useState)(""),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)(!1),[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)(""),[ae,af]=(0,c.useState)(!1),[ag,ah]=(0,c.useState)("");console.log("ProfileClient - lineUserId:",x),console.log("ProfileClient - identities:",s);let ai=!!x||s.some(a=>"line"===a.provider||"oauth"===a.provider&&a.identity_data?.provider==="line"),aj=a&&a.endsWith("@line.nightbase.app");console.log("ProfileClient - isLineLinked:",ai),console.log("ProfileClient - isLinePlaceholderEmail:",aj);let ak=()=>{let a=`/api/line-link?mode=link&userId=${w}`;console.log("Navigating to:",a),window.location.href=a},al=async()=>{if(!S){ah("メールアドレスを入力してください"),af(!0);return}if(!U||U.length<6){ah("パスワードは6文字以上で入力してください"),af(!0);return}if(U!==W){ah("パスワードが一致しません"),af(!0);return}H(!0);let a=await v(S,U);H(!1),a.success?(ad("メールアドレスとパスワードでのログインを有効にしました。"),ab(!0),R(!1)):(ah(a.error||"エラーが発生しました"),af(!0))},am=async()=>{if(!A||A===a){ah("新しいメールアドレスを入力してください"),af(!0);return}H(!0);let b=await t(A);H(!1),b.success?(ad("メールアドレスを更新しました。"),ab(!0),J(!1)):(ah(b.error||"エラーが発生しました"),af(!0))},an=async()=>{if(!C||C.length<6){ah("パスワードは6文字以上で入力してください"),af(!0);return}if(C!==E){ah("パスワードが一致しません"),af(!0);return}H(!0);let a=await u(C);H(!1),a.success?(ad("パスワードを更新しました。"),ab(!0),D(""),F(""),L(!1)):(ah(a.error||"エラーが発生しました"),af(!0))};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"px-4 pb-2",children:(0,b.jsx)("h2",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"表示設定"})}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 border-y border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("button",{onClick:()=>z("light"),className:"w-full flex items-center px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 active:bg-gray-100 dark:active:bg-gray-700 transition-colors",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${"light"===y?"bg-yellow-100 dark:bg-yellow-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:(0,b.jsx)(f,{className:`h-5 w-5 ${"light"===y?"text-yellow-600 dark:text-yellow-400":"text-gray-600 dark:text-gray-400"}`})}),(0,b.jsxs)("div",{className:"ml-3 flex-1 text-left",children:[(0,b.jsx)("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:"ライトモード"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:"明るいテーマで表示"})]}),"light"===y&&(0,b.jsx)(m.Check,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})]}),(0,b.jsx)("div",{className:"ml-16 border-b border-gray-200 dark:border-gray-700"}),(0,b.jsxs)("button",{onClick:()=>z("dark"),className:"w-full flex items-center px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 active:bg-gray-100 dark:active:bg-gray-700 transition-colors",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${"dark"===y?"bg-indigo-100 dark:bg-indigo-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:(0,b.jsx)(g,{className:`h-5 w-5 ${"dark"===y?"text-indigo-600 dark:text-indigo-400":"text-gray-600 dark:text-gray-400"}`})}),(0,b.jsxs)("div",{className:"ml-3 flex-1 text-left",children:[(0,b.jsx)("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:"ダークモード"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:"暗いテーマで表示"})]}),"dark"===y&&(0,b.jsx)(m.Check,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"px-4 pb-2",children:(0,b.jsx)("h2",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"アカウント"})}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 border-y border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("div",{className:"w-full px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-start",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${ai?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:(0,b.jsx)(j,{className:`h-5 w-5 ${ai?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"}`})}),(0,b.jsxs)("div",{className:"ml-3 flex-1",children:[(0,b.jsx)("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:"LINE連携"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:ai?"連携済み - LINEアカウントでログイン可能です":"LINEアカウントと連携すると、LINEでログインできるようになります"}),ai?(0,b.jsx)(p.Button,{onClick:ak,variant:"outline",className:"mt-2 h-8 text-xs",size:"sm",children:"別のLINEアカウントで再連携"}):(0,b.jsx)(p.Button,{onClick:ak,className:"mt-2 bg-[#00B900] hover:bg-[#00A000] text-white h-8 text-xs",size:"sm",children:"LINE連携する"})]})]})}),(0,b.jsx)("div",{className:"ml-16 border-b border-gray-200 dark:border-gray-700"}),aj?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>R(!Q),className:"w-full flex items-center px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 active:bg-gray-100 dark:active:bg-gray-700 transition-colors",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700",children:(0,b.jsx)(h.Mail,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"ml-3 flex-1 text-left min-w-0",children:[(0,b.jsx)("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:"メール・パスワードログイン"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:"メールアドレスとパスワードでのログインを有効にする"})]}),(0,b.jsx)(l,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 flex-shrink-0"})]}),Q&&(0,b.jsx)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:(0,b.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300 flex items-start gap-2",children:[(0,b.jsx)(k,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,b.jsx)("span",{children:"現在LINEアカウントのみでログイン可能です。 メールアドレスとパスワードを設定すると、それらを使ってもログインできるようになります。"})]})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"メールアドレス"}),(0,b.jsx)(q.Input,{type:"email",value:S,onChange:a=>T(a.target.value),placeholder:"example@example.com",className:"w-full"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"パスワード"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(q.Input,{type:Y?"text":"password",value:U,onChange:a=>V(a.target.value),placeholder:"新しいパスワード（6文字以上）",className:"w-full pr-10"}),(0,b.jsx)("button",{type:"button",onClick:()=>Z(!Y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:Y?(0,b.jsx)(o.EyeOff,{className:"h-4 w-4"}):(0,b.jsx)(n.Eye,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"パスワード（確認）"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(q.Input,{type:$?"text":"password",value:W,onChange:a=>X(a.target.value),placeholder:"パスワード確認",className:"w-full pr-10"}),(0,b.jsx)("button",{type:"button",onClick:()=>_(!$),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:$?(0,b.jsx)(o.EyeOff,{className:"h-4 w-4"}):(0,b.jsx)(n.Eye,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 pt-2",children:[(0,b.jsx)(p.Button,{onClick:al,disabled:G||!S||!U,className:"w-full",size:"sm",children:"設定する"}),(0,b.jsx)(p.Button,{onClick:()=>{R(!1),T(""),V(""),X("")},variant:"outline",className:"w-full",size:"sm",children:"キャンセル"})]})]})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>J(!I),className:"w-full flex items-center px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 active:bg-gray-100 dark:active:bg-gray-700 transition-colors",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700",children:(0,b.jsx)(h.Mail,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"ml-3 flex-1 text-left min-w-0",children:[(0,b.jsx)("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:"メールアドレス"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5 truncate",children:a||"未設定"})]}),(0,b.jsx)(l,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 flex-shrink-0"})]}),I&&(0,b.jsx)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(q.Input,{type:"email",value:A,onChange:a=>B(a.target.value),placeholder:"example@example.com",className:"w-full"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(p.Button,{onClick:am,disabled:G||A===a,className:"flex-1",size:"sm",children:"更新"}),(0,b.jsx)(p.Button,{onClick:()=>{J(!1),B(a)},variant:"outline",size:"sm",children:"キャンセル"})]})]})}),(0,b.jsx)("div",{className:"ml-16 border-b border-gray-200 dark:border-gray-700"}),(0,b.jsxs)("button",{onClick:()=>L(!K),className:"w-full flex items-center px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 active:bg-gray-100 dark:active:bg-gray-700 transition-colors",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700",children:(0,b.jsx)(i,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"ml-3 flex-1 text-left",children:[(0,b.jsx)("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:"パスワード"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:"変更"})]}),(0,b.jsx)(l,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 flex-shrink-0"})]}),K&&(0,b.jsx)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(q.Input,{type:M?"text":"password",value:C,onChange:a=>D(a.target.value),placeholder:"新しいパスワード（6文字以上）",className:"w-full pr-10"}),(0,b.jsx)("button",{type:"button",onClick:()=>N(!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:M?(0,b.jsx)(o.EyeOff,{className:"h-4 w-4"}):(0,b.jsx)(n.Eye,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(q.Input,{type:O?"text":"password",value:E,onChange:a=>F(a.target.value),placeholder:"パスワード確認",className:"w-full pr-10"}),(0,b.jsx)("button",{type:"button",onClick:()=>P(!O),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:O?(0,b.jsx)(o.EyeOff,{className:"h-4 w-4"}):(0,b.jsx)(n.Eye,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(p.Button,{onClick:an,disabled:G||!C,className:"flex-1",size:"sm",children:"更新"}),(0,b.jsx)(p.Button,{onClick:()=>{L(!1),D(""),F("")},variant:"outline",size:"sm",children:"キャンセル"})]})]})})]})]})]}),(0,b.jsx)(r.Dialog,{open:aa,onOpenChange:ab,children:(0,b.jsxs)(r.DialogContent,{className:"sm:max-w-md bg-white dark:bg-white",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsxs)(r.DialogTitle,{className:"flex items-center gap-2 text-green-600 dark:text-green-600",children:[(0,b.jsx)(m.Check,{className:"h-5 w-5"}),"完了"]}),(0,b.jsx)(r.DialogDescription,{className:"pt-2 whitespace-pre-line text-gray-700 dark:text-gray-700",children:ac})]}),(0,b.jsx)(r.DialogFooter,{className:"sm:justify-center",children:(0,b.jsx)(p.Button,{type:"button",className:"w-full sm:w-auto",onClick:()=>ab(!1),children:"閉じる"})})]})}),(0,b.jsx)(r.Dialog,{open:ae,onOpenChange:af,children:(0,b.jsxs)(r.DialogContent,{className:"sm:max-w-md bg-white dark:bg-white",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsxs)(r.DialogTitle,{className:"flex items-center gap-2 text-red-600 dark:text-red-600",children:[(0,b.jsx)(k,{className:"h-5 w-5"}),"エラー"]}),(0,b.jsx)(r.DialogDescription,{className:"pt-2 whitespace-pre-line text-gray-700 dark:text-gray-700",children:ag})]}),(0,b.jsx)(r.DialogFooter,{className:"sm:justify-center",children:(0,b.jsx)(p.Button,{type:"button",className:"w-full sm:w-auto",onClick:()=>af(!1),children:"閉じる"})})]})})]})}a.s(["ProfileClient",()=>w],44451)},74485,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(45750),e=a.i(11587),f=a.i(81560),g=a.i(5050),h=(0,g.createServerReference)("00b26826f1f362a3a742fd822438fcf2313af78f6d",g.callServer,void 0,g.findSourceMapURL,"deleteAccount"),i=a.i(50944);function j(){let[a,g]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!1);(0,i.useRouter)();let l=async()=>{k(!0);try{await h()}catch(a){if(a?.digest?.startsWith("NEXT_REDIRECT"))return;console.error("Failed to delete account:",a),alert("アカウントの削除に失敗しました。")}finally{k(!1),g(!1)}};return(0,b.jsxs)(e.Dialog,{open:a,onOpenChange:g,children:[(0,b.jsx)(e.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"destructive",className:"w-full mt-6",children:[(0,b.jsx)(f.Trash2,{className:"mr-2 h-4 w-4"}),"アカウント削除"]})}),(0,b.jsxs)(e.DialogContent,{children:[(0,b.jsxs)(e.DialogHeader,{children:[(0,b.jsx)(e.DialogTitle,{className:"text-red-600",children:"アカウントを削除しますか？"}),(0,b.jsxs)(e.DialogDescription,{children:["この操作は取り消せません。",(0,b.jsx)("br",{}),"あなたのアカウント情報は削除されますが、過去の勤怠記録などのプロフィール情報は店舗に残ります。"]})]}),(0,b.jsxs)(e.DialogFooter,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>g(!1),disabled:j,children:"キャンセル"}),(0,b.jsx)(d.Button,{variant:"destructive",onClick:l,disabled:j,children:j?"削除中...":"削除する"})]})]})]})}a.s(["DeleteAccountModal",()=>j],74485)}];

//# sourceMappingURL=apps_app_src_app_app_%28main%29_me_65bfb360._.js.map