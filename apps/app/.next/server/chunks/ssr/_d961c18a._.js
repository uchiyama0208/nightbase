module.exports=[15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},13749,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],13749)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},53007,17755,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11587);let e=(0,a.i(70106).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);a.s(["MoreHorizontal",()=>e],17755);var f=a.i(13749),g=a.i(81560),h=a.i(45750),i=a.i(92772),j=a.i(2783),k=a.i(62403),l=a.i(5050),m=(0,l.createServerReference)("4053f19b6ba98e578a5988f028429cf9430ddcb1bf",l.callServer,void 0,l.findSourceMapURL,"createMenu"),n=(0,l.createServerReference)("4070165c305bd13da630c1b8b8cc0969aae9be5211",l.callServer,void 0,l.findSourceMapURL,"updateMenu"),o=(0,l.createServerReference)("40691d237e8932b9146ced4ea863c081d5f59d1a9d",l.callServer,void 0,l.findSourceMapURL,"deleteMenu"),p=a.i(50944);function q({menu:a,open:l,onOpenChange:q,categories:r}){let[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)("select"),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),C=(0,p.useRouter)();(0,c.useEffect)(()=>{l&&(a?(x(a.category),v("select"),z("")):(x(""),z(""),v(r.length>0?"select":"create")))},[l,a,r]);let D=async b=>{b.preventDefault(),t(!0);let c=new FormData(b.currentTarget),d="";if(!(d="create"===u?y:w)){alert("カテゴリーを入力してください"),t(!1);return}c.set("category",d);try{a?(c.append("id",a.id),await n(c)):await m(c),q(!1),C.refresh()}catch(a){console.error("Failed to save menu:",a),alert("メニューの保存に失敗しました")}finally{t(!1)}},E=async()=>{if(a){t(!0);try{await o(a.id),q(!1),C.refresh()}catch(a){console.error("Failed to delete menu:",a),alert("削除に失敗しました")}finally{t(!1)}}};return(0,b.jsx)(d.Dialog,{open:l,onOpenChange:q,children:(0,b.jsxs)(d.DialogContent,{className:"sm:max-w-[425px] bg-white dark:bg-gray-800 w-[95%] rounded-lg max-h-[90vh] overflow-y-auto p-6 text-gray-900 dark:text-gray-100",children:[(0,b.jsxs)(d.DialogHeader,{className:"flex flex-row items-center justify-between gap-2 relative",children:[(0,b.jsx)("button",{type:"button",onClick:()=>q(!1),className:"inline-flex h-8 w-8 items-center justify-center rounded-full text-gray-500 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-100 dark:hover:bg-gray-700 focus-visible:outline-none focus-visible:ring-0","aria-label":"戻る",children:(0,b.jsx)(f.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsx)(d.DialogTitle,{className:"flex-1 text-center text-xl font-bold text-gray-900 dark:text-white truncate",children:a?"メニュー編集":"メニュー追加"}),a?(0,b.jsx)("button",{type:"button",onClick:()=>B(!A),className:"inline-flex h-8 w-8 items-center justify-center rounded-full text-gray-500 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-100 dark:hover:bg-gray-700","aria-label":"オプション",children:(0,b.jsx)(e,{className:"h-4 w-4"})}):(0,b.jsx)("div",{className:"w-8 h-8"}),A&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>B(!1)}),(0,b.jsx)("div",{className:"absolute right-0 top-10 z-50 w-40 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-lg p-2 flex flex-col gap-1 text-sm animate-in fade-in zoom-in-95 duration-100",children:(0,b.jsxs)("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2",onClick:()=>{B(!1),E()},children:[(0,b.jsx)(g.Trash2,{className:"h-4 w-4"}),"削除"]})})]})]}),(0,b.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"name",children:"メニュー名"}),(0,b.jsx)(i.Input,{id:"name",name:"name",defaultValue:a?.name||"",placeholder:"例: 生ビール",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"カテゴリー"}),(0,b.jsxs)("div",{className:"inline-flex h-10 items-center rounded-full bg-gray-100 dark:bg-gray-700 p-1 w-full",children:[(0,b.jsx)("button",{type:"button",onClick:()=>v("select"),disabled:0===r.length,className:`flex-1 h-full flex items-center justify-center rounded-full text-sm font-medium transition-colors ${"select"===u?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"既存から選択"}),(0,b.jsx)("button",{type:"button",onClick:()=>v("create"),className:`flex-1 h-full flex items-center justify-center rounded-full text-sm font-medium transition-colors ${"create"===u?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"新規作成"})]}),"select"===u?(0,b.jsxs)(k.Select,{value:w,onValueChange:x,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"カテゴリーを選択"})}),(0,b.jsx)(k.SelectContent,{children:r.map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))})]}):(0,b.jsx)(i.Input,{value:y,onChange:a=>z(a.target.value),placeholder:"新しいカテゴリー名"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"price",children:"金額 (円)"}),(0,b.jsx)(i.Input,{id:"price",name:"price",type:"number",defaultValue:a?.price||"",placeholder:"1000",required:!0,min:"0"})]}),(0,b.jsxs)(d.DialogFooter,{className:"flex-col sm:flex-col gap-3",children:[(0,b.jsx)(h.Button,{type:"submit",disabled:s,className:"h-11 w-full",children:s?"保存中...":"保存"}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:()=>q(!1),className:"h-11 w-full",children:"キャンセル"})]})]})]})})}a.s(["MenuEditModal",()=>q],53007)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},73320,11883,a=>{"use strict";let b=(0,a.i(70106).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],73320);var c=a.i(87924),d=a.i(72131),e=a.i(46872),f=a.i(72752),g=a.i(30553),h=a.i(87610);function i(){return()=>{}}var j="Avatar",[k,l]=function(a,b=[]){let e=[],f=()=>{let b=e.map(a=>d.createContext(a));return function(c){let e=c?.[a]||b;return d.useMemo(()=>({[`__scope${a}`]:{...c,[a]:e}}),[c,e])}};return f.scopeName=a,[function(b,f){let g=d.createContext(f);g.displayName=b+"Context";let h=e.length;e=[...e,f];let i=b=>{let{scope:e,children:f,...i}=b,j=e?.[a]?.[h]||g,k=d.useMemo(()=>i,Object.values(i));return(0,c.jsx)(j.Provider,{value:k,children:f})};return i.displayName=b+"Provider",[i,function(c,e){let i=e?.[a]?.[h]||g,j=d.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return d.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return c.scopeName=b.scopeName,c}(f,...b)]}(j),[m,n]=k(j),o=d.forwardRef((a,b)=>{let{__scopeAvatar:e,...f}=a,[h,i]=d.useState("idle");return(0,c.jsx)(m,{scope:e,imageLoadingStatus:h,onImageLoadingStatusChange:i,children:(0,c.jsx)(g.Primitive.span,{...f,ref:b})})});o.displayName=j;var p="AvatarImage",q=d.forwardRef((a,b)=>{let{__scopeAvatar:j,src:k,onLoadingStatusChange:l=()=>{},...m}=a,o=n(p,j),q=function(a,{referrerPolicy:b,crossOrigin:c}){let e=(0,h.useSyncExternalStore)(i,()=>!0,()=>!1),g=d.useRef(null),j=e?(g.current||(g.current=new window.Image),g.current):null,[k,l]=d.useState(()=>t(j,a));return(0,f.useLayoutEffect)(()=>{l(t(j,a))},[j,a]),(0,f.useLayoutEffect)(()=>{let a=a=>()=>{l(a)};if(!j)return;let d=a("loaded"),e=a("error");return j.addEventListener("load",d),j.addEventListener("error",e),b&&(j.referrerPolicy=b),"string"==typeof c&&(j.crossOrigin=c),()=>{j.removeEventListener("load",d),j.removeEventListener("error",e)}},[j,c,b]),k}(k,m),r=(0,e.useCallbackRef)(a=>{l(a),o.onImageLoadingStatusChange(a)});return(0,f.useLayoutEffect)(()=>{"idle"!==q&&r(q)},[q,r]),"loaded"===q?(0,c.jsx)(g.Primitive.img,{...m,ref:b,src:k}):null});q.displayName=p;var r="AvatarFallback",s=d.forwardRef((a,b)=>{let{__scopeAvatar:e,delayMs:f,...h}=a,i=n(r,e),[j,k]=d.useState(void 0===f);return d.useEffect(()=>{if(void 0!==f){let a=window.setTimeout(()=>k(!0),f);return()=>window.clearTimeout(a)}},[f]),j&&"loaded"!==i.imageLoadingStatus?(0,c.jsx)(g.Primitive.span,{...h,ref:b}):null});function t(a,b){return a?b?(a.src!==b&&(a.src=b),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}s.displayName=r;var u=a.i(55294);let v=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(o,{ref:d,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...b}));v.displayName=o.displayName;let w=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(q,{ref:d,className:(0,u.cn)("aspect-square h-full w-full",a),...b}));w.displayName=q.displayName;let x=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(s,{ref:d,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...b}));x.displayName=s.displayName,a.s(["Avatar",()=>v,"AvatarFallback",()=>x,"AvatarImage",()=>w],11883)}];

//# sourceMappingURL=_d961c18a._.js.map