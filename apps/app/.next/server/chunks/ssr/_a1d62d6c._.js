module.exports=[3688,a=>{"use strict";var b=a.i(72131),c=a.i(72752);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},33441,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},73320,11883,a=>{"use strict";let b=(0,a.i(70106).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],73320);var c=a.i(87924),d=a.i(72131),e=a.i(46872),f=a.i(72752),g=a.i(30553),h=a.i(87610);function i(){return()=>{}}var j="Avatar",[k,l]=function(a,b=[]){let e=[],f=()=>{let b=e.map(a=>d.createContext(a));return function(c){let e=c?.[a]||b;return d.useMemo(()=>({[`__scope${a}`]:{...c,[a]:e}}),[c,e])}};return f.scopeName=a,[function(b,f){let g=d.createContext(f);g.displayName=b+"Context";let h=e.length;e=[...e,f];let i=b=>{let{scope:e,children:f,...i}=b,j=e?.[a]?.[h]||g,k=d.useMemo(()=>i,Object.values(i));return(0,c.jsx)(j.Provider,{value:k,children:f})};return i.displayName=b+"Provider",[i,function(c,e){let i=e?.[a]?.[h]||g,j=d.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return d.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return c.scopeName=b.scopeName,c}(f,...b)]}(j),[m,n]=k(j),o=d.forwardRef((a,b)=>{let{__scopeAvatar:e,...f}=a,[h,i]=d.useState("idle");return(0,c.jsx)(m,{scope:e,imageLoadingStatus:h,onImageLoadingStatusChange:i,children:(0,c.jsx)(g.Primitive.span,{...f,ref:b})})});o.displayName=j;var p="AvatarImage",q=d.forwardRef((a,b)=>{let{__scopeAvatar:j,src:k,onLoadingStatusChange:l=()=>{},...m}=a,o=n(p,j),q=function(a,{referrerPolicy:b,crossOrigin:c}){let e=(0,h.useSyncExternalStore)(i,()=>!0,()=>!1),g=d.useRef(null),j=e?(g.current||(g.current=new window.Image),g.current):null,[k,l]=d.useState(()=>t(j,a));return(0,f.useLayoutEffect)(()=>{l(t(j,a))},[j,a]),(0,f.useLayoutEffect)(()=>{let a=a=>()=>{l(a)};if(!j)return;let d=a("loaded"),e=a("error");return j.addEventListener("load",d),j.addEventListener("error",e),b&&(j.referrerPolicy=b),"string"==typeof c&&(j.crossOrigin=c),()=>{j.removeEventListener("load",d),j.removeEventListener("error",e)}},[j,c,b]),k}(k,m),r=(0,e.useCallbackRef)(a=>{l(a),o.onImageLoadingStatusChange(a)});return(0,f.useLayoutEffect)(()=>{"idle"!==q&&r(q)},[q,r]),"loaded"===q?(0,c.jsx)(g.Primitive.img,{...m,ref:b,src:k}):null});q.displayName=p;var r="AvatarFallback",s=d.forwardRef((a,b)=>{let{__scopeAvatar:e,delayMs:f,...h}=a,i=n(r,e),[j,k]=d.useState(void 0===f);return d.useEffect(()=>{if(void 0!==f){let a=window.setTimeout(()=>k(!0),f);return()=>window.clearTimeout(a)}},[f]),j&&"loaded"!==i.imageLoadingStatus?(0,c.jsx)(g.Primitive.span,{...h,ref:b}):null});function t(a,b){return a?b?(a.src!==b&&(a.src=b),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}s.displayName=r;var u=a.i(55294);let v=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(o,{ref:d,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...b}));v.displayName=o.displayName;let w=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(q,{ref:d,className:(0,u.cn)("aspect-square h-full w-full",a),...b}));w.displayName=q.displayName;let x=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(s,{ref:d,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...b}));x.displayName=s.displayName,a.s(["Avatar",()=>v,"AvatarFallback",()=>x,"AvatarImage",()=>w],11883)},96443,8436,46618,a=>{"use strict";var b=a.i(5050),c=(0,b.createServerReference)("405876b122190683f26917671ae7068209f3aa4158",b.callServer,void 0,b.findSourceMapURL,"updateStore");a.s(["updateStore",()=>c],96443);var d=(0,b.createServerReference)("401480709320f02adfc2c53fe10d5e53c5f50c595f",b.callServer,void 0,b.findSourceMapURL,"uploadStoreIcon");a.s(["uploadStoreIcon",()=>d],8436);var e=(0,b.createServerReference)("00d692a8991a77d14a953f671fadf7ca43ce78a0e6",b.callServer,void 0,b.findSourceMapURL,"deleteStoreIcon");a.s(["deleteStoreIcon",()=>e],46618)},79763,a=>{"use strict";var b=a.i(87924),c=a.i(45750),d=a.i(92772),e=a.i(2783),f=a.i(62403),g=a.i(96443),h=a.i(8436),i=a.i(46618),j=a.i(73320),k=a.i(70106);let l=(0,k.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var m=a.i(81560);let n=(0,k.default)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);var o=a.i(11883),p=a.i(50944),q=a.i(72131);let r=["バー","ガールズバー","スナック","キャバクラ","ホストクラブ","ラウンジ","クラブ","パブ","コンカフェ","メイドカフェ","セクキャバ","マッスルバー","ボーイズバー","オカマバー","その他"],s=["北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"],t=[{value:"monday",label:"月曜日"},{value:"tuesday",label:"火曜日"},{value:"wednesday",label:"水曜日"},{value:"thursday",label:"木曜日"},{value:"friday",label:"金曜日"},{value:"saturday",label:"土曜日"},{value:"sunday",label:"日曜日"}];function u({store:a}){let k=a.day_switch_time&&"string"==typeof a.day_switch_time?`${a.day_switch_time.slice(0,2)}:00`:"05:00",u=(0,p.useRouter)(),v=q.default.useRef(null),w=async a=>{let b=a.target.files?.[0];if(!b)return;let c=new FormData;c.append("file",b);try{await (0,h.uploadStoreIcon)(c),u.refresh()}catch(a){console.error("Icon upload failed:",a),alert("アップロードに失敗しました")}},x=async()=>{if(confirm("アイコンを削除しますか？"))try{await (0,i.deleteStoreIcon)(),u.refresh()}catch(a){console.error("Icon delete failed:",a),alert("削除に失敗しました")}};return(0,b.jsx)("form",{action:g.updateStore,className:"space-y-6",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden p-6 space-y-6 border border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsxs)(o.Avatar,{className:"h-24 w-24 cursor-pointer",onClick:()=>{v.current?.click()},children:[(0,b.jsx)(o.AvatarImage,{src:a.icon_url||"",className:"object-cover"}),(0,b.jsx)(o.AvatarFallback,{className:"bg-gray-100 dark:bg-gray-800 text-2xl",children:(0,b.jsx)(n,{className:"h-12 w-12 text-gray-400"})}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-full opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:(0,b.jsx)(j.Upload,{className:"h-6 w-6 text-white"})})]}),(0,b.jsx)("input",{type:"file",ref:v,className:"hidden",accept:"image/*",onChange:w})]}),a.icon_url&&(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("a",{href:a.icon_url,download:`store-icon-${a.id}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 transition-colors",title:"ダウンロード",children:(0,b.jsx)(l,{className:"h-4 w-4"})}),(0,b.jsx)("button",{type:"button",onClick:x,className:"p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors",title:"削除",children:(0,b.jsx)(m.Trash2,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"name",className:"text-gray-900 dark:text-gray-200",children:"店舗名"}),(0,b.jsx)(d.Input,{id:"name",name:"name",defaultValue:a.name,required:!0,className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"allow_join_requests",name:"allow_join_requests",defaultChecked:a.allow_join_requests,className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400",style:{accentColor:"#2563eb"}}),(0,b.jsx)(e.Label,{htmlFor:"allow_join_requests",className:"cursor-pointer text-gray-900 dark:text-gray-200",children:"参加申請を許可する"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-6",children:"店舗IDを使った参加申請を受け付けます"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"industry",className:"text-gray-900 dark:text-gray-200",children:"業種"}),(0,b.jsxs)(f.Select,{name:"industry",defaultValue:a.industry||void 0,children:[(0,b.jsx)(f.SelectTrigger,{className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white",children:(0,b.jsx)(f.SelectValue,{placeholder:"業種を選択"})}),(0,b.jsx)(f.SelectContent,{children:r.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"prefecture",className:"text-gray-900 dark:text-gray-200",children:"都道府県"}),(0,b.jsxs)(f.Select,{name:"prefecture",defaultValue:a.prefecture||void 0,children:[(0,b.jsx)(f.SelectTrigger,{className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white",children:(0,b.jsx)(f.SelectValue,{placeholder:"都道府県を選択"})}),(0,b.jsx)(f.SelectContent,{children:s.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"business_start_time",className:"text-gray-900 dark:text-gray-200",children:"営業開始時間"}),(0,b.jsx)(d.Input,{type:"time",id:"business_start_time",name:"business_start_time",defaultValue:a.business_start_time,className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"business_end_time",className:"text-gray-900 dark:text-gray-200",children:"営業終了時間"}),(0,b.jsx)(d.Input,{type:"time",id:"business_end_time",name:"business_end_time",defaultValue:a.business_end_time,className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"day_switch_time",className:"text-gray-900 dark:text-gray-200",children:"日にち切り替え時間"}),(0,b.jsxs)(f.Select,{name:"day_switch_time",defaultValue:k,children:[(0,b.jsx)(f.SelectTrigger,{className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white",children:(0,b.jsx)(f.SelectValue,{placeholder:"日にち切り替え時間を選択"})}),(0,b.jsx)(f.SelectContent,{children:Array.from({length:24}).map((a,c)=>{let d=`${c.toString().padStart(2,"0")}:00`;return(0,b.jsxs)(f.SelectItem,{value:d,children:[c,"時"]},d)})})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"この時間を過ぎると翌日の出勤扱いになります"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(e.Label,{className:"text-gray-900 dark:text-gray-200",children:"定休日"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:t.map(c=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:`closed_${c.value}`,name:"closed_days",value:c.value,defaultChecked:a.closed_days?.includes(c.value),className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400",style:{accentColor:"#2563eb"}}),(0,b.jsx)(e.Label,{htmlFor:`closed_${c.value}`,className:"text-sm font-normal cursor-pointer text-gray-700 dark:text-gray-300",children:c.label})]},c.value))})]}),(0,b.jsx)("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700",children:(0,b.jsx)(c.Button,{type:"submit",className:"w-full",children:"保存する"})})]})})}a.s(["StoreSettingsForm",()=>u],79763)}];

//# sourceMappingURL=_a1d62d6c._.js.map