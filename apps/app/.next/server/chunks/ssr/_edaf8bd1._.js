module.exports=[88731,77133,39761,76803,a=>{"use strict";var b=a.i(72131),c=a.i(49815);let d=new Set(["admin","editor"]);function e(){let a=(0,b.useMemo)(()=>(0,c.createBrowserClient)(),[]),[e,f]=(0,b.useState)("loading"),[g,h]=(0,b.useState)(null),i=(0,b.useRef)(!0),j=(0,b.useCallback)(async(a,b)=>{try{await fetch("/auth/session",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:a,session:b})})}catch(a){console.error("サーバーセッションの同期に失敗しました",a)}},[]),k=(0,b.useCallback)(async()=>{let{data:b,error:c}=await a.auth.getSession();if(!i.current)return;if(c||!b.session){await j("SIGNED_OUT",null),f("unauthenticated"),h(null);return}let e=b.session;await j("INITIAL_SESSION",e);let{data:g,error:k}=await a.from("profiles").select("role, email, display_name").eq("user_id",e.user.id).maybeSingle();if(i.current){if(k){console.error("プロフィールの取得に失敗しました",k),f("unauthorized"),h(e.user.email??null);return}g&&d.has(g.role)?(f("authorized"),h(g.display_name??g.email??e.user.email??null)):(f("unauthorized"),h(e.user.email??null))}},[a,j]);return(0,b.useEffect)(()=>{i.current=!0,k();let{data:b}=a.auth.onAuthStateChange((a,b)=>{j(a,b),k()});return()=>{i.current=!1,b?.subscription.unsubscribe?.()}},[a,k,j]),{supabase:a,authState:e,userEmail:g,refreshAuth:k}}a.s(["useAdminAuthState",()=>e],88731);var f=a.i(30216);a.s(["CircleUser",()=>f.default],77133);var g=a.i(70106);let h=(0,g.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);a.s(["BarChart3",()=>h],39761);let i=(0,g.default)("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);a.s(["ClipboardCheck",()=>i],76803)},4720,56972,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>c],4720);let d=(0,b.default)("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]);a.s(["NotebookPen",()=>d],56972)},93136,93102,a=>{"use strict";var b=a.i(87924),c=a.i(45750),d=a.i(88731),e=a.i(72131),f=a.i(38246),g=a.i(50944),h=a.i(77133),i=a.i(72692),j=a.i(57355),k=a.i(39761),l=a.i(76803),m=a.i(4720),n=a.i(30617),o=a.i(56972),p=a.i(21161),q=a.i(60246),r=a.i(55294);a.i(35112);var s=a.i(70121),t=Symbol("radix.slottable");function u(a){return e.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===t}var v=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,c)=>{var d,f;let g,h,i,j=(f=d=`Primitive.${c}`,(g=e.forwardRef((a,b)=>{let{children:c,...d}=a;if(e.isValidElement(c)){var f;let a,g,h=(f=c,(g=(a=Object.getOwnPropertyDescriptor(f.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.ref:(g=(a=Object.getOwnPropertyDescriptor(f,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.props.ref:f.props.ref||f.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==e.Fragment&&(i.ref=b?(0,s.composeRefs)(b,h):h),e.cloneElement(c,i)}return e.Children.count(c)>1?e.Children.only(null):null})).displayName=`${f}.SlotClone`,h=g,(i=e.forwardRef((a,c)=>{let{children:d,...f}=a,g=e.Children.toArray(d),i=g.find(u);if(i){let a=i.props.children,d=g.map(b=>b!==i?b:e.Children.count(a)>1?e.Children.only(null):e.isValidElement(a)?a.props.children:null);return(0,b.jsx)(h,{...f,ref:c,children:e.isValidElement(a)?e.cloneElement(a,void 0,d):null})}return(0,b.jsx)(h,{...f,ref:c,children:d})})).displayName=`${d}.Slot`,i),k=e.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,b.jsx)(e?j:c,{...f,ref:d})});return k.displayName=`Primitive.${c}`,{...a,[c]:k}},{}),w=a.i(77192),x=a.i(46872),y=a.i(7827),z=a.i(72752),A=a.i(30656),B=a.i(7554),C="ScrollArea",[D,E]=function(a,c=[]){let d=[],f=()=>{let b=d.map(a=>e.createContext(a));return function(c){let d=c?.[a]||b;return e.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return f.scopeName=a,[function(c,f){let g=e.createContext(f),h=d.length;d=[...d,f];let i=c=>{let{scope:d,children:f,...i}=c,j=d?.[a]?.[h]||g,k=e.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=c+"Provider",[i,function(b,d){let i=d?.[a]?.[h]||g,j=e.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${c}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return e.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(f,...c)]}(C),[F,G]=D(C),H=e.forwardRef((a,c)=>{let{__scopeScrollArea:d,type:f="hover",dir:g,scrollHideDelay:h=600,...i}=a,[j,k]=e.useState(null),[l,m]=e.useState(null),[n,o]=e.useState(null),[p,q]=e.useState(null),[r,t]=e.useState(null),[u,w]=e.useState(0),[x,z]=e.useState(0),[A,B]=e.useState(!1),[C,D]=e.useState(!1),E=(0,s.useComposedRefs)(c,a=>k(a)),G=(0,y.useDirection)(g);return(0,b.jsx)(F,{scope:d,type:f,dir:G,scrollHideDelay:h,scrollArea:j,viewport:l,onViewportChange:m,content:n,onContentChange:o,scrollbarX:p,onScrollbarXChange:q,scrollbarXEnabled:A,onScrollbarXEnabledChange:B,scrollbarY:r,onScrollbarYChange:t,scrollbarYEnabled:C,onScrollbarYEnabledChange:D,onCornerWidthChange:w,onCornerHeightChange:z,children:(0,b.jsx)(v.div,{dir:G,...i,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":u+"px","--radix-scroll-area-corner-height":x+"px",...a.style}})})});H.displayName=C;var I="ScrollAreaViewport",J=e.forwardRef((a,c)=>{let{__scopeScrollArea:d,children:f,nonce:g,...h}=a,i=G(I,d),j=e.useRef(null),k=(0,s.useComposedRefs)(c,j,i.onViewportChange);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:g}),(0,b.jsx)(v.div,{"data-radix-scroll-area-viewport":"",...h,ref:k,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...a.style},children:(0,b.jsx)("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:f})})]})});J.displayName=I;var K="ScrollAreaScrollbar",L=e.forwardRef((a,c)=>{let{forceMount:d,...f}=a,g=G(K,a.__scopeScrollArea),{onScrollbarXEnabledChange:h,onScrollbarYEnabledChange:i}=g,j="horizontal"===a.orientation;return e.useEffect(()=>(j?h(!0):i(!0),()=>{j?h(!1):i(!1)}),[j,h,i]),"hover"===g.type?(0,b.jsx)(M,{...f,ref:c,forceMount:d}):"scroll"===g.type?(0,b.jsx)(N,{...f,ref:c,forceMount:d}):"auto"===g.type?(0,b.jsx)(O,{...f,ref:c,forceMount:d}):"always"===g.type?(0,b.jsx)(P,{...f,ref:c}):null});L.displayName=K;var M=e.forwardRef((a,c)=>{let{forceMount:d,...f}=a,g=G(K,a.__scopeScrollArea),[h,i]=e.useState(!1);return e.useEffect(()=>{let a=g.scrollArea,b=0;if(a){let c=()=>{window.clearTimeout(b),i(!0)},d=()=>{b=window.setTimeout(()=>i(!1),g.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(b),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[g.scrollArea,g.scrollHideDelay]),(0,b.jsx)(w.Presence,{present:d||h,children:(0,b.jsx)(O,{"data-state":h?"visible":"hidden",...f,ref:c})})}),N=e.forwardRef((a,c)=>{var d;let{forceMount:f,...g}=a,h=G(K,a.__scopeScrollArea),i="horizontal"===a.orientation,j=af(()=>l("SCROLL_END"),100),[k,l]=(d={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},e.useReducer((a,b)=>d[a][b]??a,"hidden"));return e.useEffect(()=>{if("idle"===k){let a=window.setTimeout(()=>l("HIDE"),h.scrollHideDelay);return()=>window.clearTimeout(a)}},[k,h.scrollHideDelay,l]),e.useEffect(()=>{let a=h.viewport,b=i?"scrollLeft":"scrollTop";if(a){let c=a[b],d=()=>{let d=a[b];c!==d&&(l("SCROLL"),j()),c=d};return a.addEventListener("scroll",d),()=>a.removeEventListener("scroll",d)}},[h.viewport,i,l,j]),(0,b.jsx)(w.Presence,{present:f||"hidden"!==k,children:(0,b.jsx)(P,{"data-state":"hidden"===k?"hidden":"visible",...g,ref:c,onPointerEnter:(0,B.composeEventHandlers)(a.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:(0,B.composeEventHandlers)(a.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),O=e.forwardRef((a,c)=>{let d=G(K,a.__scopeScrollArea),{forceMount:f,...g}=a,[h,i]=e.useState(!1),j="horizontal"===a.orientation,k=af(()=>{if(d.viewport){let a=d.viewport.offsetWidth<d.viewport.scrollWidth,b=d.viewport.offsetHeight<d.viewport.scrollHeight;i(j?a:b)}},10);return ag(d.viewport,k),ag(d.content,k),(0,b.jsx)(w.Presence,{present:f||h,children:(0,b.jsx)(P,{"data-state":h?"visible":"hidden",...g,ref:c})})}),P=e.forwardRef((a,c)=>{let{orientation:d="vertical",...f}=a,g=G(K,a.__scopeScrollArea),h=e.useRef(null),i=e.useRef(0),[j,k]=e.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=aa(j.viewport,j.content),m={...f,sizes:j,onSizesChange:k,hasThumb:!!(l>0&&l<1),onThumbChange:a=>h.current=a,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:a=>i.current=a};function n(a,b){return function(a,b,c,d="ltr"){let e=ab(c),f=b||e/2,g=c.scrollbar.paddingStart+f,h=c.scrollbar.size-c.scrollbar.paddingEnd-(e-f),i=c.content-c.viewport;return ad([g,h],"ltr"===d?[0,i]:[-1*i,0])(a)}(a,i.current,j,b)}return"horizontal"===d?(0,b.jsx)(Q,{...m,ref:c,onThumbPositionChange:()=>{if(g.viewport&&h.current){let a=ac(g.viewport.scrollLeft,j,g.dir);h.current.style.transform=`translate3d(${a}px, 0, 0)`}},onWheelScroll:a=>{g.viewport&&(g.viewport.scrollLeft=a)},onDragScroll:a=>{g.viewport&&(g.viewport.scrollLeft=n(a,g.dir))}}):"vertical"===d?(0,b.jsx)(R,{...m,ref:c,onThumbPositionChange:()=>{if(g.viewport&&h.current){let a=ac(g.viewport.scrollTop,j);h.current.style.transform=`translate3d(0, ${a}px, 0)`}},onWheelScroll:a=>{g.viewport&&(g.viewport.scrollTop=a)},onDragScroll:a=>{g.viewport&&(g.viewport.scrollTop=n(a))}}):null}),Q=e.forwardRef((a,c)=>{let{sizes:d,onSizesChange:f,...g}=a,h=G(K,a.__scopeScrollArea),[i,j]=e.useState(),k=e.useRef(null),l=(0,s.useComposedRefs)(c,k,h.onScrollbarXChange);return e.useEffect(()=>{k.current&&j(getComputedStyle(k.current))},[k]),(0,b.jsx)(U,{"data-orientation":"horizontal",...g,ref:l,sizes:d,style:{bottom:0,left:"rtl"===h.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===h.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ab(d)+"px",...a.style},onThumbPointerDown:b=>a.onThumbPointerDown(b.x),onDragScroll:b=>a.onDragScroll(b.x),onWheelScroll:(b,c)=>{if(h.viewport){var d,e;let f=h.viewport.scrollLeft+b.deltaX;a.onWheelScroll(f),d=f,e=c,d>0&&d<e&&b.preventDefault()}},onResize:()=>{k.current&&h.viewport&&i&&f({content:h.viewport.scrollWidth,viewport:h.viewport.offsetWidth,scrollbar:{size:k.current.clientWidth,paddingStart:_(i.paddingLeft),paddingEnd:_(i.paddingRight)}})}})}),R=e.forwardRef((a,c)=>{let{sizes:d,onSizesChange:f,...g}=a,h=G(K,a.__scopeScrollArea),[i,j]=e.useState(),k=e.useRef(null),l=(0,s.useComposedRefs)(c,k,h.onScrollbarYChange);return e.useEffect(()=>{k.current&&j(getComputedStyle(k.current))},[k]),(0,b.jsx)(U,{"data-orientation":"vertical",...g,ref:l,sizes:d,style:{top:0,right:"ltr"===h.dir?0:void 0,left:"rtl"===h.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ab(d)+"px",...a.style},onThumbPointerDown:b=>a.onThumbPointerDown(b.y),onDragScroll:b=>a.onDragScroll(b.y),onWheelScroll:(b,c)=>{if(h.viewport){var d,e;let f=h.viewport.scrollTop+b.deltaY;a.onWheelScroll(f),d=f,e=c,d>0&&d<e&&b.preventDefault()}},onResize:()=>{k.current&&h.viewport&&i&&f({content:h.viewport.scrollHeight,viewport:h.viewport.offsetHeight,scrollbar:{size:k.current.clientHeight,paddingStart:_(i.paddingTop),paddingEnd:_(i.paddingBottom)}})}})}),[S,T]=D(K),U=e.forwardRef((a,c)=>{let{__scopeScrollArea:d,sizes:f,hasThumb:g,onThumbChange:h,onThumbPointerUp:i,onThumbPointerDown:j,onThumbPositionChange:k,onDragScroll:l,onWheelScroll:m,onResize:n,...o}=a,p=G(K,d),[q,r]=e.useState(null),t=(0,s.useComposedRefs)(c,a=>r(a)),u=e.useRef(null),w=e.useRef(""),y=p.viewport,z=f.content-f.viewport,A=(0,x.useCallbackRef)(m),C=(0,x.useCallbackRef)(k),D=af(n,10);function E(a){u.current&&l({x:a.clientX-u.current.left,y:a.clientY-u.current.top})}return e.useEffect(()=>{let a=a=>{let b=a.target;q?.contains(b)&&A(a,z)};return document.addEventListener("wheel",a,{passive:!1}),()=>document.removeEventListener("wheel",a,{passive:!1})},[y,q,z,A]),e.useEffect(C,[f,C]),ag(q,D),ag(p.content,D),(0,b.jsx)(S,{scope:d,scrollbar:q,hasThumb:g,onThumbChange:(0,x.useCallbackRef)(h),onThumbPointerUp:(0,x.useCallbackRef)(i),onThumbPositionChange:C,onThumbPointerDown:(0,x.useCallbackRef)(j),children:(0,b.jsx)(v.div,{...o,ref:t,style:{position:"absolute",...o.style},onPointerDown:(0,B.composeEventHandlers)(a.onPointerDown,a=>{0===a.button&&(a.target.setPointerCapture(a.pointerId),u.current=q.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),E(a))}),onPointerMove:(0,B.composeEventHandlers)(a.onPointerMove,E),onPointerUp:(0,B.composeEventHandlers)(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&b.releasePointerCapture(a.pointerId),document.body.style.webkitUserSelect=w.current,p.viewport&&(p.viewport.style.scrollBehavior=""),u.current=null})})})}),V="ScrollAreaThumb",W=e.forwardRef((a,c)=>{let{forceMount:d,...e}=a,f=T(V,a.__scopeScrollArea);return(0,b.jsx)(w.Presence,{present:d||f.hasThumb,children:(0,b.jsx)(X,{ref:c,...e})})}),X=e.forwardRef((a,c)=>{let{__scopeScrollArea:d,style:f,...g}=a,h=G(V,d),i=T(V,d),{onThumbPositionChange:j}=i,k=(0,s.useComposedRefs)(c,a=>i.onThumbChange(a)),l=e.useRef(void 0),m=af(()=>{l.current&&(l.current(),l.current=void 0)},100);return e.useEffect(()=>{let a=h.viewport;if(a){let b=()=>{m(),l.current||(l.current=ae(a,j),j())};return j(),a.addEventListener("scroll",b),()=>a.removeEventListener("scroll",b)}},[h.viewport,m,j]),(0,b.jsx)(v.div,{"data-state":i.hasThumb?"visible":"hidden",...g,ref:k,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...f},onPointerDownCapture:(0,B.composeEventHandlers)(a.onPointerDownCapture,a=>{let b=a.target.getBoundingClientRect(),c=a.clientX-b.left,d=a.clientY-b.top;i.onThumbPointerDown({x:c,y:d})}),onPointerUp:(0,B.composeEventHandlers)(a.onPointerUp,i.onThumbPointerUp)})});W.displayName=V;var Y="ScrollAreaCorner",Z=e.forwardRef((a,c)=>{let d=G(Y,a.__scopeScrollArea),e=!!(d.scrollbarX&&d.scrollbarY);return"scroll"!==d.type&&e?(0,b.jsx)($,{...a,ref:c}):null});Z.displayName=Y;var $=e.forwardRef((a,c)=>{let{__scopeScrollArea:d,...f}=a,g=G(Y,d),[h,i]=e.useState(0),[j,k]=e.useState(0),l=!!(h&&j);return ag(g.scrollbarX,()=>{let a=g.scrollbarX?.offsetHeight||0;g.onCornerHeightChange(a),k(a)}),ag(g.scrollbarY,()=>{let a=g.scrollbarY?.offsetWidth||0;g.onCornerWidthChange(a),i(a)}),l?(0,b.jsx)(v.div,{...f,ref:c,style:{width:h,height:j,position:"absolute",right:"ltr"===g.dir?0:void 0,left:"rtl"===g.dir?0:void 0,bottom:0,...a.style}}):null});function _(a){return a?parseInt(a,10):0}function aa(a,b){let c=a/b;return isNaN(c)?0:c}function ab(a){let b=aa(a.viewport,a.content),c=a.scrollbar.paddingStart+a.scrollbar.paddingEnd;return Math.max((a.scrollbar.size-c)*b,18)}function ac(a,b,c="ltr"){let d=ab(b),e=b.scrollbar.paddingStart+b.scrollbar.paddingEnd,f=b.scrollbar.size-e,g=b.content-b.viewport,h=(0,A.clamp)(a,"ltr"===c?[0,g]:[-1*g,0]);return ad([0,g],[0,f-d])(h)}function ad(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}var ae=(a,b=()=>{})=>{let c={left:a.scrollLeft,top:a.scrollTop},d=0;return!function e(){let f={left:a.scrollLeft,top:a.scrollTop},g=c.left!==f.left,h=c.top!==f.top;(g||h)&&b(),c=f,d=window.requestAnimationFrame(e)}(),()=>window.cancelAnimationFrame(d)};function af(a,b){let c=(0,x.useCallbackRef)(a),d=e.useRef(0);return e.useEffect(()=>()=>window.clearTimeout(d.current),[]),e.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(c,b)},[c,b])}function ag(a,b){let c=(0,x.useCallbackRef)(b);(0,z.useLayoutEffect)(()=>{let b=0;if(a){let d=new ResizeObserver(()=>{cancelAnimationFrame(b),b=window.requestAnimationFrame(c)});return d.observe(a),()=>{window.cancelAnimationFrame(b),d.unobserve(a)}}},[a,c])}let ah=e.forwardRef(({className:a,children:c,...d},e)=>(0,b.jsxs)(H,{ref:e,className:(0,r.cn)("relative overflow-hidden",a),...d,children:[(0,b.jsx)(J,{className:"h-full w-full rounded-[inherit]",children:c}),(0,b.jsx)(ai,{}),(0,b.jsx)(Z,{})]}));ah.displayName=H.displayName;let ai=e.forwardRef(({className:a,orientation:c="vertical",...d},e)=>(0,b.jsx)(L,{ref:e,orientation:c,className:(0,r.cn)("flex touch-none select-none transition-colors","vertical"===c&&"h-full w-2.5 border-l border-slate-800/60","horizontal"===c&&"h-2.5 border-t border-slate-800/60",a),...d,children:(0,b.jsx)(W,{className:"relative flex-1 rounded-full bg-slate-700/60"})}));ai.displayName=L.displayName,a.s(["ScrollArea",()=>ah],93102);let aj=[{title:"Overview",items:[{href:"/admin",label:"ダッシュボード",icon:n.LayoutDashboard}]},{title:"CMS",items:[{href:"/admin/cms/blog",label:"ブログ",icon:m.FileText},{href:"/admin/cms/case-studies",label:"導入事例",icon:l.ClipboardCheck},{href:"/admin/cms/manuals",label:"マニュアル",icon:o.NotebookPen}]},{title:"System",items:[{href:"/admin/analytics",label:"分析",icon:k.BarChart3},{href:"/admin/settings",label:"設定",icon:p.Settings},{href:"/admin/users",label:"ユーザー管理",icon:q.Users}]}];function ak(){let a=(0,g.usePathname)();return(0,b.jsx)("aside",{className:"hidden w-64 flex-none border-r border-slate-200 bg-white pt-6 text-slate-700 lg:flex",children:(0,b.jsx)(ah,{className:"w-full px-6",children:(0,b.jsxs)("div",{className:"space-y-8 pb-12",children:[aj.map(c=>(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:c.title}),(0,b.jsx)("nav",{className:"space-y-1",children:c.items.map(c=>{let d=a?.startsWith(c.href),e=c.icon;return(0,b.jsxs)(f.default,{href:c.href,className:(0,r.cn)("group flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition",d?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"),children:[(0,b.jsx)(e,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:c.label})]},c.href)})})]},c.title)),(0,b.jsxs)("div",{className:"mb-10 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-slate-600",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-slate-800",children:"サポート"}),(0,b.jsx)("p",{className:"mt-2 text-xs leading-relaxed text-slate-500",children:"運用に関するお問い合わせは support@nightbase.jp までご連絡ください。"})]})]})})})}function al({userEmail:a,supabaseClient:d,onRefreshAuth:k}){let l=(0,g.usePathname)(),m=(0,g.useSelectedLayoutSegments)(),[,n]=(0,e.useTransition)(),o=(0,e.useMemo)(()=>(function(a){if(0===a.length)return{title:"ダッシュボード",subtitle:"NightBase Admin"};let b=a.join("/");return b.startsWith("cms/blog")?{title:"ブログ",subtitle:"CMS"}:b.startsWith("cms/case-studies")?{title:"導入事例",subtitle:"CMS"}:b.startsWith("cms/manuals")?{title:"マニュアル",subtitle:"CMS"}:b.startsWith("cms")?{title:"CMS",subtitle:"コンテンツ管理"}:b.startsWith("settings")?{title:"設定",subtitle:"システム"}:b.startsWith("users")?{title:"ユーザー管理",subtitle:"システム"}:b.startsWith("analytics")?{title:"分析",subtitle:"レポート"}:{title:"管理画面",subtitle:"NightBase"}})(m),[m]);return(0,b.jsxs)("header",{className:"sticky top-0 z-40 flex h-16 w-full flex-none items-center justify-between border-b border-slate-200 bg-white/90 px-6 backdrop-blur",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(j.Sheet,{children:[(0,b.jsx)(j.SheetTrigger,{asChild:!0,children:(0,b.jsx)(c.Button,{variant:"outline",size:"icon",className:"border-slate-300 bg-white text-slate-700 lg:hidden",children:(0,b.jsx)(i.Menu,{className:"h-5 w-5"})})}),(0,b.jsxs)(j.SheetContent,{side:"left",className:"w-72 bg-white p-0 text-slate-900",children:[(0,b.jsx)(j.SheetHeader,{className:"px-6 pt-6",children:(0,b.jsx)(j.SheetTitle,{className:"text-slate-900",children:"NightBase Admin"})}),(0,b.jsx)("nav",{className:"space-y-8 px-6 pb-10",children:aj.map(a=>(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-500",children:a.title}),(0,b.jsx)("div",{className:"space-y-1",children:a.items.map(a=>(0,b.jsxs)(f.default,{href:a.href,className:(0,r.cn)("flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium",l?.startsWith(a.href)?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"),children:[(0,b.jsx)(a.icon,{className:"h-4 w-4"}),a.label]},a.href))})]},a.title))})]})]}),(0,b.jsxs)("div",{className:"hidden flex-col lg:flex",children:[(0,b.jsx)("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:o.subtitle}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:o.title})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"hidden flex-col items-end text-xs leading-tight text-slate-500 sm:flex",children:[(0,b.jsx)("span",{className:"font-semibold text-slate-900",children:a??"Admin"}),(0,b.jsx)("span",{className:"text-slate-400",children:"NightBase Team"})]}),(0,b.jsx)(c.Button,{asChild:!0,variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full border border-slate-300 bg-white text-slate-700 hover:bg-slate-50","aria-label":"アカウント設定",children:(0,b.jsx)(f.default,{href:"/admin/settings",children:(0,b.jsx)(h.CircleUser,{className:"h-6 w-6"})})}),(0,b.jsx)(c.Button,{asChild:!0,type:"button",variant:"outline",className:"border-slate-300 text-slate-700 hover:bg-slate-50",children:(0,b.jsx)(f.default,{href:"/",children:"ホームページに戻る"})})]})]})}var am=a.i(92772),an=a.i(2783),ao=a.i(49815);function ap(){let a=(0,g.useRouter)(),d=(0,e.useMemo)(()=>(0,ao.createBrowserClient)(),[]),[f,h]=(0,e.useState)(""),[i,j]=(0,e.useState)(""),[k,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)(!1),[o,p]=(0,e.useState)(null);async function q(b){b.preventDefault(),n(!0),p(null);let{error:c}=await d.auth.signInWithPassword({email:f,password:i});(n(!1),c)?p("ログインに失敗しました。メールアドレスとパスワードをご確認ください。"):a.refresh()}return(0,b.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white/95 p-8 text-slate-900 shadow-2xl",children:[(0,b.jsx)("h1",{className:"mb-3 text-2xl font-semibold",children:"管理画面にログイン"}),(0,b.jsx)("p",{className:"mb-6 text-sm text-slate-600",children:"NightBase の管理者アカウントでサインインしてください。"}),(0,b.jsxs)("form",{className:"space-y-5",onSubmit:q,autoComplete:"on",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(an.Label,{htmlFor:"admin-email",children:"メールアドレス"}),(0,b.jsx)(am.Input,{id:"admin-email",type:"email",name:"email",autoComplete:"email",value:f,onChange:a=>h(a.target.value),required:!0,disabled:m,className:"border-slate-200 bg-white/90 text-slate-900 placeholder:text-slate-400"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(an.Label,{htmlFor:"admin-password",children:"パスワード"}),(0,b.jsx)(am.Input,{id:"admin-password",type:k?"text":"password",name:"password",autoComplete:"current-password",value:i,onChange:a=>j(a.target.value),required:!0,disabled:m,className:"border-slate-200 bg-white/90 text-slate-900 placeholder:text-slate-400"}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm text-slate-600",htmlFor:"admin-show-password",children:[(0,b.jsx)("input",{id:"admin-show-password",type:"checkbox",checked:k,onChange:a=>l(a.target.checked),className:"h-4 w-4 rounded border-slate-300 text-primary focus:ring-primary/40",disabled:m}),"パスワードを表示"]})]}),o?(0,b.jsx)("p",{className:"text-sm text-red-600",children:o}):null,(0,b.jsx)(c.Button,{type:"submit",disabled:m,className:"w-full bg-primary text-white hover:bg-primary/90",children:m?"ログイン中…":"ログイン"})]})]})}function aq({children:a}){let{supabase:e,authState:f,userEmail:g,refreshAuth:h}=(0,d.useAdminAuthState)();return"loading"===f?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-4 py-12 text-slate-700",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4 text-sm text-slate-500",children:[(0,b.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-2 border-slate-300 border-t-slate-700","aria-hidden":!0}),(0,b.jsx)("p",{children:"読み込み中です…"})]})}):"unauthenticated"===f?(0,b.jsx)("div",{className:"min-h-screen bg-slate-50 px-4 py-12 text-slate-900",children:(0,b.jsx)("div",{className:"mx-auto flex max-w-6xl items-center justify-center",children:(0,b.jsx)(ap,{})})}):"unauthorized"===f?(0,b.jsx)("div",{className:"min-h-screen bg-slate-50 px-4 py-12 text-slate-900",children:(0,b.jsx)("div",{className:"mx-auto flex max-w-6xl items-center justify-center",children:(0,b.jsxs)("div",{className:"w-full max-w-md space-y-5 rounded-2xl bg-white p-8 text-center text-slate-900 shadow-xl",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:"管理権限がありません"}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"このアカウントには NightBase 管理画面へのアクセス権限がありません。管理者にお問い合わせください。"}),(0,b.jsx)(c.Button,{variant:"outline",className:"w-full text-slate-700",onClick:async()=>{await e.auth.signOut(),await h()},children:"別のアカウントでログイン"})]})})}):(0,b.jsx)("div",{className:"flex min-h-screen bg-white text-slate-900",children:(0,b.jsxs)("div",{className:"flex min-h-screen w-full",children:[(0,b.jsx)(ak,{}),(0,b.jsxs)("div",{className:"flex min-h-screen flex-1 flex-col",children:[(0,b.jsx)(al,{userEmail:g,supabaseClient:e,onRefreshAuth:h}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto bg-white",children:a({supabase:e})})]})]})})}a.s(["AdminProtected",()=>aq],93136)}];

//# sourceMappingURL=_edaf8bd1._.js.map