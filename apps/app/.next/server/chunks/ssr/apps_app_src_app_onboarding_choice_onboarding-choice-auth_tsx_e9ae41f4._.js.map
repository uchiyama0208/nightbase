{"version":3,"sources":["../../../../../../apps/app/src/app/onboarding/choice/onboarding-choice-auth.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"next/navigation\";\nimport { createBrowserClient } from \"@/lib/supabaseClient\";\n\nexport function OnboardingChoiceAuth() {\n    const searchParams = useSearchParams();\n    const [processing, setProcessing] = useState(false);\n\n    useEffect(() => {\n        const handleSession = async () => {\n            const accessToken = searchParams.get(\"access_token\");\n            const refreshToken = searchParams.get(\"refresh_token\");\n\n            if (!accessToken || !refreshToken || processing) {\n                return;\n            }\n\n            setProcessing(true);\n\n            try {\n                const supabase = createBrowserClient();\n                const { error } = await supabase.auth.setSession({\n                    access_token: accessToken,\n                    refresh_token: refreshToken,\n                });\n\n                if (error) {\n                    console.error(\"Error setting session:\", error);\n                } else {\n                    // Remove tokens from URL for cleaner history\n                    const newUrl = new URL(window.location.href);\n                    newUrl.searchParams.delete(\"access_token\");\n                    newUrl.searchParams.delete(\"refresh_token\");\n                    window.history.replaceState({}, \"\", newUrl.toString());\n                }\n            } catch (err) {\n                console.error(\"Unexpected error setting session:\", err);\n            }\n        };\n\n        handleSession();\n    }, [searchParams, processing]);\n\n    return null;\n}\n"],"names":[],"mappings":"uCAEA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEO,SAAS,IACZ,IAAM,EAAe,CAAA,EAAA,EAAA,eAAA,AAAe,IAC9B,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAqC7C,MAnCA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KAgCN,CA/BsB,UAClB,IAAM,EAAc,EAAa,GAAG,CAAC,gBAC/B,EAAe,EAAa,GAAG,CAAC,iBAEtC,GAAI,AAAC,GAAgB,IAAgB,GAIrC,GAAc,EAJM,CAMpB,GAAI,AAN6C,CAO7C,IAAM,EAAW,CAAA,EAAA,EAAA,mBAAA,AAAmB,IAC9B,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,UAAU,CAAC,CAC7C,aAAc,EACd,cAAe,CACnB,GAEA,GAAI,EACA,KADO,GACC,KAAK,CAAC,yBAA0B,OACrC,CAEH,IAAM,EAAS,IAAI,IAAI,OAAO,QAAQ,CAAC,IAAI,EAC3C,EAAO,YAAY,CAAC,MAAM,CAAC,gBAC3B,EAAO,YAAY,CAAC,MAAM,CAAC,iBAC3B,OAAO,OAAO,CAAC,YAAY,CAAC,CAAC,EAAG,GAAI,EAAO,QAAQ,GACvD,CACJ,CAAE,MAAO,EAAK,CACV,QAAQ,KAAK,CAAC,oCAAqC,EACvD,GACJ,GAGJ,EAAG,CAAC,EAAc,EAAW,EAEtB,IACX"}