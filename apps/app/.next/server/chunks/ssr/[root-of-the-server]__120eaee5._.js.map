{"version":3,"sources":["../../../../../../apps/app/src/app/app/%28main%29/invitations/join-requests/join-requests-list.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/app/src/app/app/%28main%29/invitations/join-requests/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const JoinRequestsList = registerClientReference(\n    function() { throw new Error(\"Attempted to call JoinRequestsList() from the server but JoinRequestsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/app/src/app/app/(main)/invitations/join-requests/join-requests-list.tsx\",\n    \"JoinRequestsList\",\n);\n","import { createServerClient } from \"@/lib/supabaseServerClient\";\nimport { redirect } from \"next/navigation\";\nimport { JoinRequestsList } from \"./join-requests-list\";\n\nexport default async function JoinRequestsPage() {\n    const supabase = await createServerClient();\n    const { data: { user } } = await supabase.auth.getUser();\n\n    if (!user) {\n        redirect(\"/login\");\n    }\n\n    const { data: appUser } = await supabase\n        .from(\"users\")\n        .select(\"current_profile_id\")\n        .eq(\"id\", user.id)\n        .maybeSingle();\n\n    if (!appUser?.current_profile_id) {\n        redirect(\"/app/me\");\n    }\n\n    const { data: profile } = await supabase\n        .from(\"profiles\")\n        .select(\"store_id, role\")\n        .eq(\"id\", appUser.current_profile_id)\n        .maybeSingle();\n\n    if (!profile || !profile.store_id) {\n        redirect(\"/app/me\");\n    }\n\n    if (profile.role !== \"staff\") {\n        redirect(\"/app/dashboard\");\n    }\n\n    // Fetch pending join requests\n    const { data: joinRequests } = await supabase\n        .from(\"profiles\")\n        .select(\"id, display_name, real_name, role, created_at, approval_status\")\n        .eq(\"store_id\", profile.store_id)\n        .eq(\"approval_status\", \"pending\")\n        .order(\"created_at\", { ascending: false });\n\n    return (\n        <div className=\"p-6 space-y-6\">\n            <div>\n                <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">参加申請</h1>\n                <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\n                    店舗への参加申請を管理します\n                </p>\n            </div>\n\n            <JoinRequestsList requests={joinRequests || []} />\n        </div>\n    );\n}\n\nexport const dynamic = 'force-dynamic';\nexport const revalidate = 0;\n"],"names":[],"mappings":"+VAEO,IAAM,EAAmB,CAAA,EAAA,AADhC,EAAA,CAAA,CAAA,OACgC,uBAAA,AAAuB,EACnD,WAAa,MAAM,AAAI,MAAM,8OAAgP,EAC7Q,6GACA,0EAHG,IAAM,EAAmB,CAAA,EADhC,AACgC,EADhC,CAAA,CAAA,OACgC,uBAAuB,AAAvB,EAC5B,WAAa,MAAM,AAAI,MAAM,8OAAgP,EAC7Q,yFACA,qJCLJ,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,eAAe,IAC1B,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,IACnC,CAAE,KAAM,MAAE,CAAI,CAAE,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,EAElD,CAAC,GACD,CAAA,EADO,AACP,EAAA,QAAA,AAAQ,EAAC,UAGb,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC3B,IAAI,CAAC,SACL,MAAM,CAAC,sBACP,EAAE,CAAC,KAAM,EAAK,EAAE,EAChB,WAAW,EAEZ,CAAC,GAAS,oBAAoB,AAC9B,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,WAGb,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC3B,IAAI,CAAC,YACL,MAAM,CAAC,kBACP,EAAE,CAAC,KAAM,EAAQ,kBAAkB,EACnC,WAAW,EAEZ,CAAC,GAAY,EAAQ,MAAT,EAAiB,EAAE,AAC/B,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,WAGQ,SAAS,CAA1B,EAAQ,IAAI,EACZ,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,kBAIb,GAAM,CAAE,KAAM,CAAY,CAAE,CAAG,MAAM,EAChC,IAAI,CAAC,YACL,MAAM,CAAC,kEACP,EAAE,CAAC,WAAY,EAAQ,QAAQ,EAC/B,EAAE,CAAC,kBAAmB,WACtB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAE5C,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4DAAmD,SACjE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iDAAwC,sBAKzD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,CAAC,SAAU,GAAgB,EAAE,KAG1D,kCAEuB,+BACG","ignoreList":[0]}