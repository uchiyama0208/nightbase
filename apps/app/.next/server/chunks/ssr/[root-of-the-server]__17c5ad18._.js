module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},87355,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(55294);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-3xl border border-white/10 bg-white/5 p-6 shadow-[0_20px_60px_-20px_rgba(15,23,42,0.45)] backdrop-blur",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("mb-6 flex flex-col gap-2",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-lg font-semibold text-slate-50",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-slate-300",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-slate-100",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("mt-6 flex items-center justify-between",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},27534,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(55294);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-left text-sm text-slate-900",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("text-xs uppercase tracking-[0.25em] text-slate-500",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("divide-y divide-slate-100",a),...c}));g.displayName="TableBody";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b border-slate-200 transition hover:bg-slate-50",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("py-3 text-xs font-semibold text-slate-500",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("py-4 text-sm text-slate-900",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-xs text-slate-500",a),...c})).displayName="TableCaption",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("bg-slate-50",a),...c})).displayName="TableFooter",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},72692,a=>{"use strict";let b=(0,a.i(70106).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);a.s(["Menu",()=>b],72692)},57355,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97942),e=a.i(55294);let f=d.Root,g=d.Trigger,h=d.Portal;d.Close;let i=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Overlay,{ref:f,className:(0,e.cn)("fixed inset-0 z-50 bg-slate-950/70 backdrop-blur data-[state=open]:animate-in data-[state=closed]:animate-out",a),...c}));i.displayName=d.Overlay.displayName;let j=c.forwardRef(({side:a="right",className:c,children:f,...g},j)=>(0,b.jsxs)(h,{children:[(0,b.jsx)(i,{}),(0,b.jsx)(d.Content,{ref:j,className:(0,e.cn)("fixed z-50 flex h-full w-full max-w-md flex-col bg-slate-950/95 p-6 text-slate-100 shadow-2xl backdrop-blur data-[state=open]:animate-in data-[state=closed]:animate-out","right"===a&&"right-0 top-0 data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right","left"===a&&"left-0 top-0 data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left","bottom"===a&&"bottom-0 left-1/2 -translate-x-1/2 data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom","top"===a&&"top-0 left-1/2 -translate-x-1/2 data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",c),...g,children:f})]}));j.displayName=d.Content.displayName;let k=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("mb-6 flex flex-col gap-2",a),...c});k.displayName="SheetHeader";let l=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Title,{ref:f,className:(0,e.cn)("text-lg font-semibold text-slate-50",a),...c}));l.displayName=d.Title.displayName;let m=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Description,{ref:f,className:(0,e.cn)("text-sm text-slate-400",a),...c}));m.displayName=d.Description.displayName,a.s(["Sheet",()=>f,"SheetContent",()=>j,"SheetDescription",()=>m,"SheetHeader",()=>k,"SheetTitle",()=>l,"SheetTrigger",()=>g])},30617,21161,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);a.s(["LayoutDashboard",()=>c],30617);let d=(0,b.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>d],21161)},11520,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(55294);let e=(0,c.cva)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-white focus:ring-primary",secondary:"border-transparent bg-secondary text-[#111111] focus:ring-secondary",outline:"border-neutral-700/20 bg-transparent text-neutral-200 focus:ring-neutral-500",neutral:"border-transparent bg-neutral-100 text-neutral-600 focus:ring-neutral-300",success:"border-transparent bg-emerald-500/15 text-emerald-500 focus:ring-emerald-400",warning:"border-transparent bg-amber-500/15 text-amber-500 focus:ring-amber-400",destructive:"border-transparent bg-red-500/15 text-red-500 focus:ring-red-400"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},22151,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(70106);let f=(0,e.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var g=a.i(4720),h=a.i(56972);let i=(0,e.default)("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);var j=a.i(11520),k=a.i(45750),l=a.i(87355),m=a.i(27534),n=a.i(55294);async function o(a,b){let[c,d]=await Promise.all([a.from("cms_entries").select("id",{count:"exact",head:!0}).eq("type",b).eq("status","published"),a.from("cms_entries").select("id",{count:"exact",head:!0}).eq("type",b).neq("status","published")]);return c.error&&console.error(`cms_entries(${b})の公開件数取得に失敗しました`,c.error),d.error&&console.error(`cms_entries(${b})の下書き件数取得に失敗しました`,d.error),{published:c.count??0,draft:d.count??0}}async function p(a){let{data:b,error:c}=await a.from("cms_entries").select("id, type, title, status, published_at").in("type",["blog","case_study","manual"]).order("published_at",{ascending:!1,nullsFirst:!1}).limit(18);return c?(console.error("最近のコンテンツの取得に失敗しました",c),[]):(b??[]).map(a=>{let b=a.published_at??null,c="blog"===a.type?"ブログ":"case_study"===a.type?"導入事例":"マニュアル",d="blog"===a.type?`/admin/cms/blog/${a.id}`:"case_study"===a.type?`/admin/cms/case-studies/${a.id}`:`/admin/cms/manuals/${a.id}`;return{id:a.id,title:a.title??"(無題)",status:a.status??"draft",updatedAt:b,type:c,editHref:d,statusLabel:"published"===a.status?"公開中":"下書き"}}).sort((a,b)=>{let c=a.updatedAt?new Date(a.updatedAt).getTime():0;return(b.updatedAt?new Date(b.updatedAt).getTime():0)-c}).slice(0,9)}function q({supabaseClient:a}){let[e,q]=(0,c.useState)({blog:{published:0,draft:0},caseStudies:{published:0,draft:0},manuals:{published:0,draft:0}}),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0);(0,c.useEffect)(()=>{let b=!0;return async function(){u(!0);try{let[c,d,e,f]=await Promise.all([o(a,"blog"),o(a,"case_study"),o(a,"manual"),p(a)]);if(!b)return;q({blog:c,caseStudies:d,manuals:e}),s(f)}finally{b&&u(!1)}}(),()=>{b=!1}},[a]);let v=[{title:"ブログ",description:"NightBase ブログの記事を管理",href:"/admin/cms/blog",counts:e.blog,type:"blog"},{title:"導入事例",description:"導入ストーリーを更新",href:"/admin/cms/case-studies",counts:e.caseStudies,type:"case"},{title:"マニュアル",description:"社内向けナレッジを整備",href:"/admin/cms/manuals",counts:e.manuals,type:"manual"}];return(0,b.jsxs)("div",{className:"space-y-10 p-8",children:[(0,b.jsx)("section",{className:"grid gap-6 md:grid-cols-3",children:v.map(a=>(0,b.jsxs)(l.Card,{className:"border border-slate-200 bg-white",children:[(0,b.jsxs)(l.CardHeader,{className:"flex flex-row items-start justify-between space-y-0",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(l.CardTitle,{className:"text-slate-900",children:a.title}),(0,b.jsx)(l.CardDescription,{className:"text-slate-500",children:a.description})]}),(0,b.jsx)("div",{className:"rounded-2xl bg-slate-900 p-3 text-white",children:(a=>{switch(a){case"blog":return(0,b.jsx)(g.FileText,{className:"h-5 w-5"});case"case":return(0,b.jsx)(i,{className:"h-5 w-5"});default:return(0,b.jsx)(h.NotebookPen,{className:"h-5 w-5"})}})(a.type)})]}),(0,b.jsxs)(l.CardContent,{className:"flex items-end justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"公開中"}),(0,b.jsx)("p",{className:"text-3xl font-semibold text-slate-900",children:t?"--":a.counts.published})]}),(0,b.jsxs)("div",{className:"space-y-2 text-right",children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"下書き"}),(0,b.jsx)("p",{className:"text-3xl font-semibold text-slate-900",children:t?"--":a.counts.draft})]})]}),(0,b.jsx)("div",{className:"flex justify-end px-6 pb-6",children:(0,b.jsx)(k.Button,{asChild:!0,variant:"ghost",className:"gap-2 text-sm text-primary hover:text-primary/80",children:(0,b.jsxs)(d.default,{href:a.href,children:["管理ページへ ",(0,b.jsx)(f,{className:"h-4 w-4"})]})})})]},a.title))}),(0,b.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"最近更新されたコンテンツ"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Supabase に保存された最新の更新履歴を確認できます。"})]})}),(0,b.jsx)("div",{className:"mt-6 overflow-hidden rounded-2xl border border-slate-200",children:(0,b.jsxs)(m.Table,{className:"min-w-full",children:[(0,b.jsx)(m.TableHeader,{children:(0,b.jsxs)(m.TableRow,{className:"border-b border-slate-100",children:[(0,b.jsx)(m.TableHead,{className:"px-6",children:"種別"}),(0,b.jsx)(m.TableHead,{children:"タイトル"}),(0,b.jsx)(m.TableHead,{children:"ステータス"}),(0,b.jsx)(m.TableHead,{className:"text-right",children:"最終更新"}),(0,b.jsx)(m.TableHead,{className:"text-right",children:"操作"})]})}),(0,b.jsx)(m.TableBody,{children:t?(0,b.jsx)(m.TableRow,{children:(0,b.jsx)(m.TableCell,{colSpan:5,className:"py-10 text-center text-sm text-slate-400",children:"読み込み中です…"})}):0===r.length?(0,b.jsx)(m.TableRow,{children:(0,b.jsx)(m.TableCell,{colSpan:5,className:"py-10 text-center text-sm text-slate-400",children:"まだ更新履歴がありません。"})}):r.map(a=>(0,b.jsxs)(m.TableRow,{className:"border-white/5",children:[(0,b.jsx)(m.TableCell,{className:"px-6",children:(0,b.jsx)(j.Badge,{variant:"outline",className:"border-slate-300 bg-slate-50 text-xs text-slate-700",children:a.type})}),(0,b.jsx)(m.TableCell,{className:"max-w-[300px] truncate text-sm text-slate-900",children:a.title}),(0,b.jsx)(m.TableCell,{children:(0,b.jsx)(j.Badge,{variant:"published"===a.status?"success":"neutral",className:(0,n.cn)("px-3 py-1 text-xs","published"===a.status?"bg-emerald-500/20 text-emerald-300":"bg-slate-800 text-slate-300"),children:a.statusLabel})}),(0,b.jsx)(m.TableCell,{className:"text-right text-sm text-slate-600",children:(0,n.formatDateTime)(a.updatedAt)}),(0,b.jsx)(m.TableCell,{className:"text-right",children:(0,b.jsx)(k.Button,{asChild:!0,size:"sm",variant:"outline",className:"border-slate-300 text-slate-700",children:(0,b.jsx)(d.default,{href:a.editHref,children:"編集"})})})]},`${a.type}-${a.id}`))})]})})]})]})}var r=a.i(93136);function s(){return(0,b.jsx)(r.AdminProtected,{children:({supabase:a})=>(0,b.jsx)(q,{supabaseClient:a})})}a.s(["default",()=>s,"dynamic",0,"force-dynamic"],22151)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__17c5ad18._.js.map