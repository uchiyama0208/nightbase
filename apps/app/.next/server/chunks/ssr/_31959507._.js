module.exports=[27534,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(55294);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-left text-sm text-slate-900",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("text-xs uppercase tracking-[0.25em] text-slate-500",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("divide-y divide-slate-100",a),...c}));g.displayName="TableBody";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b border-slate-200 transition hover:bg-slate-50",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("py-3 text-xs font-semibold text-slate-500",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("py-4 text-sm text-slate-900",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-xs text-slate-500",a),...c})).displayName="TableCaption",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("bg-slate-50",a),...c})).displayName="TableFooter",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},33441,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},12144,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(55294);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm transition focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 disabled:cursor-not-allowed disabled:opacity-60",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},3688,a=>{"use strict";var b=a.i(72131),c=a.i(72752);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},11587,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97942),e=a.i(55294);let f=d.Root,g=d.Trigger,h=d.Portal,i=d.Close,j=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Overlay,{ref:f,className:(0,e.cn)("fixed inset-0 z-50 bg-slate-950/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out",a),...c}));j.displayName=d.Overlay.displayName;let k=c.forwardRef(({className:a,children:c,...f},g)=>(0,b.jsxs)(h,{children:[(0,b.jsx)(j,{}),(0,b.jsx)(d.Content,{ref:g,className:(0,e.cn)("fixed left-1/2 top-1/2 z-50 w-[calc(100%-2rem)] max-w-xl -translate-x-1/2 -translate-y-1/2 rounded-3xl border border-slate-200 bg-white p-8 text-slate-900 shadow-2xl backdrop-blur data-[state=open]:animate-in data-[state=closed]:animate-out dark:border-white/10 dark:bg-slate-950/95 dark:text-slate-100",a),...f,children:c})]}));k.displayName=d.Content.displayName;let l=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("mb-6 flex flex-col gap-2 text-center sm:text-left",a),...c});l.displayName="DialogHeader";let m=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...c});m.displayName="DialogFooter";let n=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Title,{ref:f,className:(0,e.cn)("text-xl font-semibold text-slate-900 dark:text-slate-50",a),...c}));n.displayName=d.Title.displayName;let o=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Description,{ref:f,className:(0,e.cn)("text-sm text-slate-500 dark:text-slate-400",a),...c}));o.displayName=d.Description.displayName,a.s(["Dialog",()=>f,"DialogClose",()=>i,"DialogContent",()=>k,"DialogDescription",()=>o,"DialogFooter",()=>m,"DialogHeader",()=>l,"DialogTitle",()=>n,"DialogTrigger",()=>g])},30216,a=>{"use strict";let b=(0,a.i(70106).default)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);a.s(["default",()=>b])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},68471,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(27534),e=a.i(45750),f=a.i(15618),g=a.i(84064),h=a.i(18697);function i({attendanceRecords:a,profiles:i,roleFilter:j}){let[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(j),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null);i.filter(a=>"cast"===w?"cast"===a.role:"staff"===a.role||"admin"===a.role);let C={};for(let a of i)C[a.id]=a;let D=a.filter(a=>{if(!a.user_id)return!1;let b=C[a.user_id];if(!b||"cast"===w&&"cast"!==b.role||"staff"===w&&"staff"!==b.role&&"admin"!==b.role)return!1;if(q.trim()){let a=q.trim().toLowerCase();if(!(b.display_name_kana||b.display_name||b.real_name||"").toLowerCase().includes(a))return!1}return(!s||a.date===s)&&(!u||"working"===a.status)}),E=a=>{if(!a)return"-";if(/^\d{2}:\d{2}(?::\d{2})?$/.test(a))return a.slice(0,5);let b=new Date(a);return isNaN(b.getTime())?"-":b.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})},F=(a={})=>{n(a.initialData||null),p(a.record||null),l(!0)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 mb-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 items-center",children:[(0,b.jsx)("input",{type:"text",placeholder:"名前で検索",value:q,onChange:a=>r(a.target.value),className:"w-full h-10 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 text-xs md:text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,b.jsx)("input",{type:"date",value:s,onChange:a=>t(a.target.value),className:"w-full h-10 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 text-xs md:text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,b.jsxs)("label",{className:"flex items-center justify-center gap-1.5 text-xs md:text-sm text-gray-600 dark:text-gray-300 cursor-pointer h-10 rounded-md border border-transparent hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,b.jsx)("input",{type:"checkbox",checked:u,onChange:a=>v(a.target.checked),className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 focus:ring-blue-500 dark:focus:ring-blue-400",style:{accentColor:"#2563eb"}}),(0,b.jsx)("span",{className:"whitespace-nowrap",children:"出勤中のみ"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"inline-flex h-10 items-center rounded-full bg-gray-100 dark:bg-gray-800 p-1 text-xs",children:[(0,b.jsx)("button",{type:"button",onClick:()=>x("cast"),className:`px-4 h-full flex items-center rounded-full font-medium transition-colors ${"cast"===w?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"キャスト"}),(0,b.jsx)("button",{type:"button",onClick:()=>x("staff"),className:`px-4 h-full flex items-center rounded-full font-medium transition-colors ${"staff"===w?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"スタッフ"})]}),(0,b.jsx)(e.Button,{size:"icon",variant:"outline",className:"h-10 w-10 rounded-full bg-white border-blue-500 hover:bg-blue-50 dark:bg-gray-800 dark:border-blue-400 dark:hover:bg-gray-700",onClick:()=>F(),children:(0,b.jsx)(f.Plus,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})})]})]}),(0,b.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 overflow-x-auto",children:(0,b.jsxs)(d.Table,{children:[(0,b.jsx)(d.TableHeader,{children:(0,b.jsxs)(d.TableRow,{className:"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[(0,b.jsx)(d.TableHead,{className:"px-2 sm:px-4 text-center text-gray-500 dark:text-gray-400 w-1/7 whitespace-nowrap",children:"日付"}),(0,b.jsx)(d.TableHead,{className:"px-2 sm:px-4 text-center text-gray-500 dark:text-gray-400 w-1/7 whitespace-nowrap",children:"名前"}),(0,b.jsx)(d.TableHead,{className:"px-2 sm:px-4 text-center text-gray-500 dark:text-gray-400 w-1/7 whitespace-nowrap",children:"開始"}),(0,b.jsx)(d.TableHead,{className:"px-2 sm:px-4 text-center text-gray-500 dark:text-gray-400 w-1/7 whitespace-nowrap",children:"終了"}),(0,b.jsx)(d.TableHead,{className:"px-2 sm:px-4 text-center text-gray-500 dark:text-gray-400 w-1/7 whitespace-nowrap",children:"送迎先"}),(0,b.jsx)(d.TableHead,{className:"hidden md:table-cell px-2 sm:px-4 text-center text-gray-500 dark:text-gray-400 w-1/7 whitespace-nowrap",children:"状態"}),(0,b.jsx)(d.TableHead,{className:"hidden md:table-cell px-2 sm:px-4 text-center text-gray-500 dark:text-gray-400 w-1/7 whitespace-nowrap",children:"打刻出勤"}),(0,b.jsx)(d.TableHead,{className:"hidden md:table-cell px-2 sm:px-4 text-center text-gray-500 dark:text-gray-400 w-1/7 whitespace-nowrap",children:"打刻退勤"})]})}),(0,b.jsxs)(d.TableBody,{children:[D.map(a=>{var c,e;let f,g;if(!a.user_id)return null;let h=C[a.user_id],i=h&&(h.display_name||h.real_name)||"不明";return(0,b.jsxs)(d.TableRow,{className:"cursor-pointer border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50",onClick:()=>{a.isVirtual?F({initialData:{profileId:a.user_id,date:a.date,status:a.status,startTime:a.clock_in_time?a.clock_in_time.slice(0,5):"",endTime:a.clock_out_time?a.clock_out_time.slice(0,5):""}}):F({record:a})},children:[(0,b.jsx)(d.TableCell,{className:"font-medium text-xs md:text-sm px-2 sm:px-4 text-center text-gray-900 dark:text-white whitespace-nowrap",children:isNaN((f=new Date(c=a.date)).getTime())?c:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"md:hidden",children:f.toLocaleDateString("ja-JP",{month:"numeric",day:"numeric",weekday:"short"})}),(0,b.jsx)("span",{className:"hidden md:inline",children:f.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",weekday:"short"})})]})}),(0,b.jsx)(d.TableCell,{className:"text-xs md:text-sm px-2 sm:px-4 text-center text-gray-900 dark:text-white whitespace-nowrap",children:i}),(0,b.jsx)(d.TableCell,{className:"text-xs md:text-sm px-2 sm:px-4 text-center text-gray-900 dark:text-white whitespace-nowrap",children:E(a.start_time)}),(0,b.jsx)(d.TableCell,{className:"text-xs md:text-sm px-2 sm:px-4 text-center text-gray-900 dark:text-white whitespace-nowrap",children:E(a.end_time)}),(0,b.jsx)(d.TableCell,{className:"text-xs md:text-sm px-2 sm:px-4 text-center text-gray-900 dark:text-white whitespace-nowrap",children:a.pickup_destination||"-"}),(0,b.jsx)(d.TableCell,{className:"hidden md:table-cell px-2 sm:px-4 text-center",children:(g=({scheduled:{label:"予定",color:"bg-blue-100 text-blue-800"},working:{label:"出勤中",color:"bg-green-100 text-green-800"},finished:{label:"完了",color:"bg-gray-100 text-gray-800"},absent:{label:"欠勤",color:"bg-red-100 text-red-800"},forgot_clockout:{label:"退勤忘れ",color:"bg-yellow-100 text-yellow-800"}})[e=a.status]??{label:e,color:"bg-gray-100 text-gray-800"},(0,b.jsx)("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${g.color} whitespace-nowrap`,children:g.label}))}),(0,b.jsx)(d.TableCell,{className:"hidden md:table-cell text-xs md:text-sm px-2 sm:px-4 text-center text-gray-900 dark:text-white whitespace-nowrap",children:E(a.clock_in??null)}),(0,b.jsx)(d.TableCell,{className:"hidden md:table-cell text-xs md:text-sm px-2 sm:px-4 text-center text-gray-900 dark:text-white whitespace-nowrap",children:E(a.clock_out??null)})]},a.id)}),0===D.length&&a.length>0&&(0,b.jsx)(d.TableRow,{children:(0,b.jsx)(d.TableCell,{colSpan:8,className:"h-24 text-center text-xs md:text-sm text-gray-500 dark:text-gray-400",children:"検索条件に一致する出勤記録がありません"})}),0===a.length&&(0,b.jsx)(d.TableRow,{children:(0,b.jsx)(d.TableCell,{colSpan:8,className:"h-24 text-center text-xs md:text-sm text-gray-500 dark:text-gray-400",children:"出勤記録がありません"})})]})]})}),(0,b.jsx)(g.AttendanceModal,{isOpen:k,onClose:()=>{l(!1),n(null),p(null)},profiles:i,currentProfileId:"",defaultRole:w,initialData:m,editingRecord:o,onOpenProfileEdit:a=>{let b=C[a];b&&(B(b),z(!0))},onFocusAttendanceForProfile:a=>{let b=C[a];b&&r(b.display_name_kana||b.display_name||b.real_name||"")}}),(0,b.jsx)(h.UserEditModal,{profile:A,open:y,onOpenChange:a=>{z(a),a||B(null)}})]})}a.s(["AttendanceTable",()=>i])}];

//# sourceMappingURL=_31959507._.js.map