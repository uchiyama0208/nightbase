{"version":3,"sources":["../../../../../../node_modules/lucide-react/src/icons/eye-off.ts","../../../../../../apps/app/src/app/app/%28main%29/features/features-client.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name EyeOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAuNzMzIDUuMDc2YTEwLjc0NCAxMC43NDQgMCAwIDEgMTEuMjA1IDYuNTc1IDEgMSAwIDAgMSAwIC42OTYgMTAuNzQ3IDEwLjc0NyAwIDAgMS0xLjQ0NCAyLjQ5IiAvPgogIDxwYXRoIGQ9Ik0xNC4wODQgMTQuMTU4YTMgMyAwIDAgMS00LjI0Mi00LjI0MiIgLz4KICA8cGF0aCBkPSJNMTcuNDc5IDE3LjQ5OWExMC43NSAxMC43NSAwIDAgMS0xNS40MTctNS4xNTEgMSAxIDAgMCAxIDAtLjY5NiAxMC43NSAxMC43NSAwIDAgMSA0LjQ0Ni01LjE0MyIgLz4KICA8cGF0aCBkPSJtMiAyIDIwIDIwIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eye-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst EyeOff = createLucideIcon('EyeOff', [\n  [\n    'path',\n    {\n      d: 'M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49',\n      key: 'ct8e1f',\n    },\n  ],\n  ['path', { d: 'M14.084 14.158a3 3 0 0 1-4.242-4.242', key: '151rxh' }],\n  [\n    'path',\n    {\n      d: 'M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143',\n      key: '13bj9a',\n    },\n  ],\n  ['path', { d: 'm2 2 20 20', key: '1ooewy' }],\n]);\n\nexport default EyeOff;\n","\"use client\";\n\nimport { Label } from \"@/components/ui/label\";\nimport { EyeOff } from \"lucide-react\";\nimport { useState, useTransition } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\ninterface FeatureFlags {\n    show_dashboard: boolean;\n    show_attendance: boolean;\n    show_timecard: boolean;\n    show_users: boolean;\n    show_roles: boolean;\n    show_menus: boolean;\n}\n\ninterface FeaturesClientProps {\n    initialFlags: FeatureFlags;\n    updateFeature: (feature: string, value: boolean) => Promise<void>;\n}\n\nexport function FeaturesClient({ initialFlags, updateFeature }: FeaturesClientProps) {\n    const [flags, setFlags] = useState<FeatureFlags>(initialFlags);\n    const [isPending, startTransition] = useTransition();\n    const router = useRouter();\n\n    const handleToggle = async (feature: keyof FeatureFlags) => {\n        const newValue = !flags[feature];\n\n        // 楽観的更新\n        setFlags(prev => ({ ...prev, [feature]: newValue }));\n\n        // サーバーアクションを呼び出し\n        startTransition(async () => {\n            try {\n                await updateFeature(feature, newValue);\n                router.refresh();\n            } catch (error) {\n                // エラーが発生した場合は元に戻す\n                setFlags(prev => ({ ...prev, [feature]: !newValue }));\n                alert(\"更新に失敗しました\");\n            }\n        });\n    };\n\n    const features = [\n        {\n            id: \"show_dashboard\",\n            name: \"ダッシュボード\",\n            description: \"出勤状況のサマリーや今日の稼働状況をひと目で確認できます。\",\n            icon: \"DB\",\n            iconBg: \"bg-blue-100 dark:bg-blue-900\",\n            iconText: \"text-blue-600 dark:text-blue-400\",\n            category: \"必須機能\",\n        },\n        {\n            id: \"show_attendance\",\n            name: \"勤怠\",\n            description: \"シフトと出勤ステータスを一覧で確認・管理できます。\",\n            icon: \"AT\",\n            iconBg: \"bg-emerald-100 dark:bg-emerald-900\",\n            iconText: \"text-emerald-600 dark:text-emerald-400\",\n            category: \"マネジメント向け\",\n        },\n        {\n            id: \"show_timecard\",\n            name: \"タイムカード\",\n            description: \"出勤・退勤の打刻と勤務履歴の確認に使う基本機能です。\",\n            icon: \"TC\",\n            iconBg: \"bg-sky-100 dark:bg-sky-900\",\n            iconText: \"text-sky-600 dark:text-sky-400\",\n            category: \"キャスト/スタッフ共通\",\n        },\n        {\n            id: \"show_users\",\n            name: \"プロフィール情報\",\n            description: \"キャスト・スタッフ・ゲストのアカウントを一元管理します。\",\n            icon: \"US\",\n            iconBg: \"bg-amber-100 dark:bg-amber-900\",\n            iconText: \"text-amber-600 dark:text-amber-400\",\n            category: \"管理者向け\",\n        },\n        {\n            id: \"show_roles\",\n            name: \"権限管理\",\n            description: \"ロールごとの権限を細かく設定し、店舗の運用ルールをコントロールします。\",\n            icon: \"RL\",\n            iconBg: \"bg-fuchsia-100 dark:bg-fuchsia-900\",\n            iconText: \"text-fuchsia-600 dark:text-fuchsia-400\",\n            category: \"高度な設定\",\n        },\n        {\n            id: \"show_menus\",\n            name: \"メニュー\",\n            description: \"お店のメニューを登録・管理し、金額やカテゴリを設定できます。\",\n            icon: \"MN\",\n            iconBg: \"bg-orange-100 dark:bg-orange-900\",\n            iconText: \"text-orange-600 dark:text-orange-400\",\n            category: \"店舗運営\",\n        },\n    ];\n\n    return (\n        <div className=\"bg-gray-50 dark:bg-gray-900 min-h-screen pb-10\">\n            <div className=\"max-w-3xl mx-auto pt-6 px-4\">\n                <div className=\"flex items-center justify-between mb-4\">\n                    <div>\n                        <h1 className=\"text-xl md:text-2xl font-bold text-gray-900 dark:text-white\">機能追加</h1>\n                        <p className=\"mt-1 text-xs md:text-sm text-gray-500 dark:text-gray-400\">\n                            店舗ごとに利用可能な機能を追加・削除します。インストール済みの機能だけがサイドバーに表示され、アクセス可能になります。\n                        </p>\n                    </div>\n                </div>\n\n                <div className=\"grid gap-4 md:grid-cols-2\">\n                    {features.map((feature) => {\n                        const isEnabled = flags[feature.id as keyof FeatureFlags];\n                        return (\n                            <div key={feature.id} className=\"relative\">\n                                <div\n                                    className={`w-full flex flex-col rounded-2xl border p-4 shadow-sm transition-all ${isEnabled\n                                        ? \"border-blue-500 bg-blue-50/80 dark:bg-blue-900/20\"\n                                        : \"border-slate-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80\"\n                                        }`}\n                                >\n                                    <div className=\"flex items-start gap-3\">\n                                        <div className={`flex h-9 w-9 items-center justify-center rounded-xl ${feature.iconBg} ${feature.iconText} text-sm font-semibold`}>\n                                            {feature.icon}\n                                        </div>\n                                        <div className=\"space-y-1 flex-1\">\n                                            <p className=\"text-sm font-semibold text-slate-900 dark:text-white\">{feature.name}</p>\n                                            <p className=\"text-xs text-slate-500 dark:text-gray-400\">{feature.description}</p>\n                                        </div>\n                                    </div>\n                                    <div className=\"mt-4 flex items-center justify-between\">\n                                        <p className=\"text-[11px] font-medium tracking-wide text-slate-400 uppercase\">{feature.category}</p>\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => handleToggle(feature.id as keyof FeatureFlags)}\n                                            disabled={isPending}\n                                            className={`inline-flex items-center rounded-full border px-3 py-1 text-[11px] font-semibold tracking-wide transition-colors ${isEnabled\n                                                ? \"border-blue-600 bg-blue-600 text-white hover:bg-blue-700\"\n                                                : \"border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-slate-700 dark:text-gray-200 hover:bg-slate-50 dark:hover:bg-gray-600\"\n                                                } ${isPending ? \"opacity-50 cursor-wait\" : \"cursor-pointer\"}`}\n                                        >\n                                            {isEnabled ? (\n                                                <>\n                                                    <span>インストール済み</span>\n                                                    <EyeOff className=\"h-3 w-3 ml-1\" />\n                                                </>\n                                            ) : (\n                                                <span>インストール</span>\n                                            )}\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}