module.exports=[27534,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(55294);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-left text-sm text-slate-900",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("text-xs uppercase tracking-[0.25em] text-slate-500",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("divide-y divide-slate-100",a),...c}));g.displayName="TableBody";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b border-slate-200 transition hover:bg-slate-50",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("py-3 text-xs font-semibold text-slate-500",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("py-4 text-sm text-slate-900",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-xs text-slate-500",a),...c})).displayName="TableCaption",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("bg-slate-50",a),...c})).displayName="TableFooter",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},33441,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},12144,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(55294);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm transition focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 disabled:cursor-not-allowed disabled:opacity-60",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},3688,a=>{"use strict";var b=a.i(72131),c=a.i(72752);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},11587,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97942),e=a.i(55294);let f=d.Root,g=d.Trigger,h=d.Portal,i=d.Close,j=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Overlay,{ref:f,className:(0,e.cn)("fixed inset-0 z-50 bg-slate-950/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out",a),...c}));j.displayName=d.Overlay.displayName;let k=c.forwardRef(({className:a,children:c,...f},g)=>(0,b.jsxs)(h,{children:[(0,b.jsx)(j,{}),(0,b.jsx)(d.Content,{ref:g,className:(0,e.cn)("fixed left-1/2 top-1/2 z-50 w-[calc(100%-2rem)] max-w-xl -translate-x-1/2 -translate-y-1/2 rounded-3xl border border-slate-200 bg-white p-8 text-slate-900 shadow-2xl backdrop-blur data-[state=open]:animate-in data-[state=closed]:animate-out dark:border-white/10 dark:bg-slate-950/95 dark:text-slate-100",a),...f,children:c})]}));k.displayName=d.Content.displayName;let l=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("mb-6 flex flex-col gap-2 text-center sm:text-left",a),...c});l.displayName="DialogHeader";let m=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...c});m.displayName="DialogFooter";let n=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Title,{ref:f,className:(0,e.cn)("text-xl font-semibold text-slate-900 dark:text-slate-50",a),...c}));n.displayName=d.Title.displayName;let o=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Description,{ref:f,className:(0,e.cn)("text-sm text-slate-500 dark:text-slate-400",a),...c}));o.displayName=d.Description.displayName,a.s(["Dialog",()=>f,"DialogClose",()=>i,"DialogContent",()=>k,"DialogDescription",()=>o,"DialogFooter",()=>m,"DialogHeader",()=>l,"DialogTitle",()=>n,"DialogTrigger",()=>g])},30216,a=>{"use strict";let b=(0,a.i(70106).default)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);a.s(["default",()=>b])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},24273,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(45750),e=a.i(92772),f=a.i(62403),g=a.i(27534),h=a.i(15618),i=a.i(87532),j=a.i(36472),k=a.i(81560);let l=(0,a.i(70106).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var m=a.i(5050),n=(0,m.createServerReference)("40d4255bde3a40e06cbba9327018213fdd3715a285",m.callServer,void 0,m.findSourceMapURL,"getBottleKeeps"),o=(0,m.createServerReference)("4081bb467de1e95924eb9ad27672a73dcd31e8e747",m.callServer,void 0,m.findSourceMapURL,"deleteBottleKeep"),p=a.i(81278),q=a.i(56711),r=a.i(2411);function s({storeId:a,menus:m,profiles:s}){let[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)("all"),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useTransition)(),F=(0,c.useCallback)(async()=>{E(async()=>{u(await n({status:z,search:B})||[])})},[z,B]);(0,c.useEffect)(()=>{F()},[F,z,B]);let G=async a=>{confirm("このボトルキープを削除しますか？")&&(await o(a),F())};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,b.jsxs)("div",{className:"relative flex-1 sm:flex-none sm:w-[240px]",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"ボトル名やゲスト名で検索...",value:B,onChange:a=>C(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(f.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(f.SelectTrigger,{className:"flex-1 sm:flex-none sm:w-[240px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"ステータス"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"すべて"}),(0,b.jsx)(f.SelectItem,{value:"active",children:"利用中"}),(0,b.jsx)(f.SelectItem,{value:"empty",children:"空"}),(0,b.jsx)(f.SelectItem,{value:"returned",children:"返却済"})]})]})]}),(0,b.jsxs)(d.Button,{onClick:()=>{y(null),w(!0)},className:"w-full sm:w-auto",children:[(0,b.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"新規登録"]})]}),(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden bg-white dark:bg-gray-800",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{className:"bg-gray-50 dark:bg-gray-900",children:[(0,b.jsx)(g.TableHead,{className:"text-gray-900 dark:text-white font-semibold text-center w-1/3 md:w-1/6",children:"ゲスト"}),(0,b.jsx)(g.TableHead,{className:"text-gray-900 dark:text-white font-semibold text-center w-1/3 md:w-1/6",children:"ボトル"}),(0,b.jsx)(g.TableHead,{className:"text-gray-900 dark:text-white font-semibold text-center w-1/3 md:w-1/6",children:"残量"}),(0,b.jsx)(g.TableHead,{className:"hidden md:table-cell text-gray-900 dark:text-white font-semibold text-center w-1/6",children:"ステータス"}),(0,b.jsx)(g.TableHead,{className:"hidden md:table-cell text-gray-900 dark:text-white font-semibold text-center w-1/6",children:"開栓日"}),(0,b.jsx)(g.TableHead,{className:"hidden md:table-cell text-gray-900 dark:text-white font-semibold text-center w-1/6",children:"操作"})]})}),(0,b.jsx)(g.TableBody,{children:D?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"読み込み中..."})}):0===t.length?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsx)(j.Wine,{className:"h-12 w-12 text-gray-300"}),(0,b.jsx)("p",{children:"ボトルキープがありません"})]})})}):t.map(a=>{var c;return(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{className:"text-center",children:a.bottle_keep_holders?.map(a=>a.profiles?.display_name).filter(Boolean).join(", ")||"-"}),(0,b.jsx)(g.TableCell,{className:"text-center",children:a.menus?.name||"-"}),(0,b.jsx)(g.TableCell,{className:"text-center",children:(0,b.jsx)("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${a.remaining_amount<=0?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":a.remaining_amount<50?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300":"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300"}`,children:100===(c=a.remaining_amount)?"未開封":75===c?"多め":50===c?"半分":25===c?"少なめ":0===c?"無し":`${c}%`})}),(0,b.jsx)(g.TableCell,{className:"hidden md:table-cell text-center",children:(0,b.jsx)("span",{className:`inline-block px-2 py-1 rounded text-xs ${"active"===a.status?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"empty"===a.status?"bg-gray-100 text-gray-700 dark:bg-gray-900 dark:text-gray-300":"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"}`,children:(a=>{switch(a){case"active":return"利用中";case"empty":return"空";case"returned":return"返却済";default:return a}})(a.status)})}),(0,b.jsx)(g.TableCell,{className:"hidden md:table-cell text-center",children:a.opened_at?(0,q.format)(new Date(a.opened_at),"yyyy/MM/dd",{locale:r.ja}):"-"}),(0,b.jsx)(g.TableCell,{className:"hidden md:table-cell text-center",children:(0,b.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{y(a),w(!0)},children:(0,b.jsx)(l,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>G(a.id),children:(0,b.jsx)(k.Trash2,{className:"h-4 w-4 text-red-500"})})]})})]},a.id)})})]})}),v&&(0,b.jsx)(p.BottleModal,{isOpen:v,onClose:()=>{w(!1),y(null),F()},bottle:x,menus:m,profiles:s})]})}a.s(["BottleList",()=>s],24273)}];

//# sourceMappingURL=_3bb39ffc._.js.map