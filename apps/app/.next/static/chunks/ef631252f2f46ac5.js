(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78583,42531,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>r],78583);let l=(0,t.default)("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]);e.s(["NotebookPen",()=>l],42531)},3282,30985,17923,39090,e=>{"use strict";var t=e.i(71645),r=e.i(1817);let l=new Set(["admin","editor"]);function s(){let e=(0,t.useMemo)(()=>(0,r.createBrowserClient)(),[]),[s,a]=(0,t.useState)("loading"),[n,i]=(0,t.useState)(null),o=(0,t.useRef)(!0),c=(0,t.useCallback)(async(e,t)=>{try{await fetch("/auth/session",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:e,session:t})})}catch(e){console.error("サーバーセッションの同期に失敗しました",e)}},[]),d=(0,t.useCallback)(async()=>{let{data:t,error:r}=await e.auth.getSession();if(!o.current)return;if(r||!t.session){await c("SIGNED_OUT",null),a("unauthenticated"),i(null);return}let s=t.session;await c("INITIAL_SESSION",s);let{data:n,error:d}=await e.from("profiles").select("role, email, display_name").eq("user_id",s.user.id).maybeSingle();if(o.current){if(d){console.error("プロフィールの取得に失敗しました",d),a("unauthorized"),i(s.user.email??null);return}n&&l.has(n.role)?(a("authorized"),i(n.display_name??n.email??s.user.email??null)):(a("unauthorized"),i(s.user.email??null))}},[e,c]);return(0,t.useEffect)(()=>{o.current=!0,d();let{data:t}=e.auth.onAuthStateChange((e,t)=>{c(e,t),d()});return()=>{o.current=!1,t?.subscription.unsubscribe?.()}},[e,d,c]),{supabase:e,authState:s,userEmail:n,refreshAuth:d}}e.s(["useAdminAuthState",()=>s],3282);var a=e.i(68656);e.s(["CircleUser",()=>a.default],30985);var n=e.i(75254);let i=(0,n.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>i],17923);let o=(0,n.default)("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);e.s(["ClipboardCheck",()=>o],39090)},18135,38360,e=>{"use strict";var t=e.i(18050),r=e.i(3420),l=e.i(3282),s=e.i(71645),a=e.i(22016),n=e.i(18566),i=e.i(30985),o=e.i(92161),c=e.i(34730),d=e.i(17923),u=e.i(39090),h=e.i(78583),p=e.i(60289),m=e.i(42531),f=e.i(39616),x=e.i(61911),b=e.i(97495);e.i(74080);var v=e.i(20783),w=Symbol("radix.slottable");function g(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===w}var y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{var l,a;let n,i,o,c=(a=l=`Primitive.${r}`,(n=s.forwardRef((e,t)=>{let{children:r,...l}=e;if(s.isValidElement(r)){var a;let e,n,i=(a=r,(n=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(n=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),o=function(e,t){let r={...t};for(let l in t){let s=e[l],a=t[l];/^on[A-Z]/.test(l)?s&&a?r[l]=(...e)=>{let t=a(...e);return s(...e),t}:s&&(r[l]=s):"style"===l?r[l]={...s,...a}:"className"===l&&(r[l]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}(l,r.props);return r.type!==s.Fragment&&(o.ref=t?(0,v.composeRefs)(t,i):i),s.cloneElement(r,o)}return s.Children.count(r)>1?s.Children.only(null):null})).displayName=`${a}.SlotClone`,i=n,(o=s.forwardRef((e,r)=>{let{children:l,...a}=e,n=s.Children.toArray(l),o=n.find(g);if(o){let e=o.props.children,l=n.map(t=>t!==o?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,t.jsx)(i,{...a,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,l):null})}return(0,t.jsx)(i,{...a,ref:r,children:l})})).displayName=`${l}.Slot`,o),d=s.forwardRef((e,l)=>{let{asChild:s,...a}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?c:r,{...a,ref:l})});return d.displayName=`Primitive.${r}`,{...e,[r]:d}},{}),j=e.i(96626),N=e.i(30207),S=e.i(86318),C=e.i(34620),R=e.i(70152),E=e.i(81140),T="ScrollArea",[P,k]=function(e,r=[]){let l=[],a=()=>{let t=l.map(e=>s.createContext(e));return function(r){let l=r?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...r,[e]:l}}),[r,l])}};return a.scopeName=e,[function(r,a){let n=s.createContext(a),i=l.length;l=[...l,a];let o=r=>{let{scope:l,children:a,...o}=r,c=l?.[e]?.[i]||n,d=s.useMemo(()=>o,Object.values(o));return(0,t.jsx)(c.Provider,{value:d,children:a})};return o.displayName=r+"Provider",[o,function(t,l){let o=l?.[e]?.[i]||n,c=s.useContext(o);if(c)return c;if(void 0!==a)return a;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let l=r.reduce((t,{useScope:r,scopeName:l})=>{let s=r(e)[`__scope${l}`];return{...t,...s}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}(a,...r)]}(T),[_,L]=P(T),A=s.forwardRef((e,r)=>{let{__scopeScrollArea:l,type:a="hover",dir:n,scrollHideDelay:i=600,...o}=e,[c,d]=s.useState(null),[u,h]=s.useState(null),[p,m]=s.useState(null),[f,x]=s.useState(null),[b,w]=s.useState(null),[g,j]=s.useState(0),[N,C]=s.useState(0),[R,E]=s.useState(!1),[T,P]=s.useState(!1),k=(0,v.useComposedRefs)(r,e=>d(e)),L=(0,S.useDirection)(n);return(0,t.jsx)(_,{scope:l,type:a,dir:L,scrollHideDelay:i,scrollArea:c,viewport:u,onViewportChange:h,content:p,onContentChange:m,scrollbarX:f,onScrollbarXChange:x,scrollbarXEnabled:R,onScrollbarXEnabledChange:E,scrollbarY:b,onScrollbarYChange:w,scrollbarYEnabled:T,onScrollbarYEnabledChange:P,onCornerWidthChange:j,onCornerHeightChange:C,children:(0,t.jsx)(y.div,{dir:L,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});A.displayName=T;var D="ScrollAreaViewport",M=s.forwardRef((e,r)=>{let{__scopeScrollArea:l,children:a,nonce:n,...i}=e,o=L(D,l),c=s.useRef(null),d=(0,v.useComposedRefs)(r,c,o.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,t.jsx)(y.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});M.displayName=D;var H="ScrollAreaScrollbar",W=s.forwardRef((e,r)=>{let{forceMount:l,...a}=e,n=L(H,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,c="horizontal"===e.orientation;return s.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===n.type?(0,t.jsx)(z,{...a,ref:r,forceMount:l}):"scroll"===n.type?(0,t.jsx)(O,{...a,ref:r,forceMount:l}):"auto"===n.type?(0,t.jsx)(B,{...a,ref:r,forceMount:l}):"always"===n.type?(0,t.jsx)(I,{...a,ref:r}):null});W.displayName=H;var z=s.forwardRef((e,r)=>{let{forceMount:l,...a}=e,n=L(H,e.__scopeScrollArea),[i,o]=s.useState(!1);return s.useEffect(()=>{let e=n.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),o(!0)},l=()=>{t=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",l),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",l)}}},[n.scrollArea,n.scrollHideDelay]),(0,t.jsx)(j.Presence,{present:l||i,children:(0,t.jsx)(B,{"data-state":i?"visible":"hidden",...a,ref:r})})}),O=s.forwardRef((e,r)=>{var l;let{forceMount:a,...n}=e,i=L(H,e.__scopeScrollArea),o="horizontal"===e.orientation,c=ea(()=>u("SCROLL_END"),100),[d,u]=(l={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},s.useReducer((e,t)=>l[e][t]??e,"hidden"));return s.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,i.scrollHideDelay,u]),s.useEffect(()=>{let e=i.viewport,t=o?"scrollLeft":"scrollTop";if(e){let r=e[t],l=()=>{let l=e[t];r!==l&&(u("SCROLL"),c()),r=l};return e.addEventListener("scroll",l),()=>e.removeEventListener("scroll",l)}},[i.viewport,o,u,c]),(0,t.jsx)(j.Presence,{present:a||"hidden"!==d,children:(0,t.jsx)(I,{"data-state":"hidden"===d?"hidden":"visible",...n,ref:r,onPointerEnter:(0,E.composeEventHandlers)(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:(0,E.composeEventHandlers)(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),B=s.forwardRef((e,r)=>{let l=L(H,e.__scopeScrollArea),{forceMount:a,...n}=e,[i,o]=s.useState(!1),c="horizontal"===e.orientation,d=ea(()=>{if(l.viewport){let e=l.viewport.offsetWidth<l.viewport.scrollWidth,t=l.viewport.offsetHeight<l.viewport.scrollHeight;o(c?e:t)}},10);return en(l.viewport,d),en(l.content,d),(0,t.jsx)(j.Presence,{present:a||i,children:(0,t.jsx)(I,{"data-state":i?"visible":"hidden",...n,ref:r})})}),I=s.forwardRef((e,r)=>{let{orientation:l="vertical",...a}=e,n=L(H,e.__scopeScrollArea),i=s.useRef(null),o=s.useRef(0),[c,d]=s.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=ee(c.viewport,c.content),h={...a,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function p(e,t){return function(e,t,r,l="ltr"){let s=et(r),a=t||s/2,n=r.scrollbar.paddingStart+a,i=r.scrollbar.size-r.scrollbar.paddingEnd-(s-a),o=r.content-r.viewport;return el([n,i],"ltr"===l?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===l?(0,t.jsx)(U,{...h,ref:r,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=er(n.viewport.scrollLeft,c,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=p(e,n.dir))}}):"vertical"===l?(0,t.jsx)(F,{...h,ref:r,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=er(n.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=p(e))}}):null}),U=s.forwardRef((e,r)=>{let{sizes:l,onSizesChange:a,...n}=e,i=L(H,e.__scopeScrollArea),[o,c]=s.useState(),d=s.useRef(null),u=(0,v.useComposedRefs)(r,d,i.onScrollbarXChange);return s.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(Y,{"data-orientation":"horizontal",...n,ref:u,sizes:l,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":et(l)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(i.viewport){var l,s;let a=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(a),l=a,s=r,l>0&&l<s&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Q(o.paddingLeft),paddingEnd:Q(o.paddingRight)}})}})}),F=s.forwardRef((e,r)=>{let{sizes:l,onSizesChange:a,...n}=e,i=L(H,e.__scopeScrollArea),[o,c]=s.useState(),d=s.useRef(null),u=(0,v.useComposedRefs)(r,d,i.onScrollbarYChange);return s.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(Y,{"data-orientation":"vertical",...n,ref:u,sizes:l,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":et(l)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(i.viewport){var l,s;let a=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(a),l=a,s=r,l>0&&l<s&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Q(o.paddingTop),paddingEnd:Q(o.paddingBottom)}})}})}),[V,X]=P(H),Y=s.forwardRef((e,r)=>{let{__scopeScrollArea:l,sizes:a,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:h,onResize:p,...m}=e,f=L(H,l),[x,b]=s.useState(null),w=(0,v.useComposedRefs)(r,e=>b(e)),g=s.useRef(null),j=s.useRef(""),S=f.viewport,C=a.content-a.viewport,R=(0,N.useCallbackRef)(h),T=(0,N.useCallbackRef)(d),P=ea(p,10);function k(e){g.current&&u({x:e.clientX-g.current.left,y:e.clientY-g.current.top})}return s.useEffect(()=>{let e=e=>{let t=e.target;x?.contains(t)&&R(e,C)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[S,x,C,R]),s.useEffect(T,[a,T]),en(x,P),en(f.content,P),(0,t.jsx)(V,{scope:l,scrollbar:x,hasThumb:n,onThumbChange:(0,N.useCallbackRef)(i),onThumbPointerUp:(0,N.useCallbackRef)(o),onThumbPositionChange:T,onThumbPointerDown:(0,N.useCallbackRef)(c),children:(0,t.jsx)(y.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:(0,E.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),g.current=x.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),k(e))}),onPointerMove:(0,E.composeEventHandlers)(e.onPointerMove,k),onPointerUp:(0,E.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=j.current,f.viewport&&(f.viewport.style.scrollBehavior=""),g.current=null})})})}),$="ScrollAreaThumb",q=s.forwardRef((e,r)=>{let{forceMount:l,...s}=e,a=X($,e.__scopeScrollArea);return(0,t.jsx)(j.Presence,{present:l||a.hasThumb,children:(0,t.jsx)(K,{ref:r,...s})})}),K=s.forwardRef((e,r)=>{let{__scopeScrollArea:l,style:a,...n}=e,i=L($,l),o=X($,l),{onThumbPositionChange:c}=o,d=(0,v.useComposedRefs)(r,e=>o.onThumbChange(e)),u=s.useRef(void 0),h=ea(()=>{u.current&&(u.current(),u.current=void 0)},100);return s.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{h(),u.current||(u.current=es(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,h,c]),(0,t.jsx)(y.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:(0,E.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,l=e.clientY-t.top;o.onThumbPointerDown({x:r,y:l})}),onPointerUp:(0,E.composeEventHandlers)(e.onPointerUp,o.onThumbPointerUp)})});q.displayName=$;var Z="ScrollAreaCorner",G=s.forwardRef((e,r)=>{let l=L(Z,e.__scopeScrollArea),s=!!(l.scrollbarX&&l.scrollbarY);return"scroll"!==l.type&&s?(0,t.jsx)(J,{...e,ref:r}):null});G.displayName=Z;var J=s.forwardRef((e,r)=>{let{__scopeScrollArea:l,...a}=e,n=L(Z,l),[i,o]=s.useState(0),[c,d]=s.useState(0),u=!!(i&&c);return en(n.scrollbarX,()=>{let e=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(e),d(e)}),en(n.scrollbarY,()=>{let e=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(e),o(e)}),u?(0,t.jsx)(y.div,{...a,ref:r,style:{width:i,height:c,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null});function Q(e){return e?parseInt(e,10):0}function ee(e,t){let r=e/t;return isNaN(r)?0:r}function et(e){let t=ee(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function er(e,t,r="ltr"){let l=et(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,n=t.content-t.viewport,i=(0,R.clamp)(e,"ltr"===r?[0,n]:[-1*n,0]);return el([0,n],[0,a-l])(i)}function el(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let l=(t[1]-t[0])/(e[1]-e[0]);return t[0]+l*(r-e[0])}}var es=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},l=0;return!function s(){let a={left:e.scrollLeft,top:e.scrollTop},n=r.left!==a.left,i=r.top!==a.top;(n||i)&&t(),r=a,l=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(l)};function ea(e,t){let r=(0,N.useCallbackRef)(e),l=s.useRef(0);return s.useEffect(()=>()=>window.clearTimeout(l.current),[]),s.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(r,t)},[r,t])}function en(e,t){let r=(0,N.useCallbackRef)(t);(0,C.useLayoutEffect)(()=>{let t=0;if(e){let l=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return l.observe(e),()=>{window.cancelAnimationFrame(t),l.unobserve(e)}}},[e,r])}let ei=s.forwardRef(({className:e,children:r,...l},s)=>(0,t.jsxs)(A,{ref:s,className:(0,b.cn)("relative overflow-hidden",e),...l,children:[(0,t.jsx)(M,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(eo,{}),(0,t.jsx)(G,{})]}));ei.displayName=A.displayName;let eo=s.forwardRef(({className:e,orientation:r="vertical",...l},s)=>(0,t.jsx)(W,{ref:s,orientation:r,className:(0,b.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-slate-800/60","horizontal"===r&&"h-2.5 border-t border-slate-800/60",e),...l,children:(0,t.jsx)(q,{className:"relative flex-1 rounded-full bg-slate-700/60"})}));eo.displayName=W.displayName,e.s(["ScrollArea",()=>ei],38360);let ec=[{title:"Overview",items:[{href:"/admin",label:"ダッシュボード",icon:p.LayoutDashboard}]},{title:"CMS",items:[{href:"/admin/cms/blog",label:"ブログ",icon:h.FileText},{href:"/admin/cms/case-studies",label:"導入事例",icon:u.ClipboardCheck},{href:"/admin/cms/manuals",label:"マニュアル",icon:m.NotebookPen}]},{title:"System",items:[{href:"/admin/analytics",label:"分析",icon:d.BarChart3},{href:"/admin/settings",label:"設定",icon:f.Settings},{href:"/admin/users",label:"ユーザー管理",icon:x.Users}]}];function ed(){let e=(0,n.usePathname)();return(0,t.jsx)("aside",{className:"hidden w-64 flex-none border-r border-slate-200 bg-white pt-6 text-slate-700 lg:flex",children:(0,t.jsx)(ei,{className:"w-full px-6",children:(0,t.jsxs)("div",{className:"space-y-8 pb-12",children:[ec.map(r=>(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:r.title}),(0,t.jsx)("nav",{className:"space-y-1",children:r.items.map(r=>{let l=e?.startsWith(r.href),s=r.icon;return(0,t.jsxs)(a.default,{href:r.href,className:(0,b.cn)("group flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition",l?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"),children:[(0,t.jsx)(s,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:r.label})]},r.href)})})]},r.title)),(0,t.jsxs)("div",{className:"mb-10 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-slate-600",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-800",children:"サポート"}),(0,t.jsx)("p",{className:"mt-2 text-xs leading-relaxed text-slate-500",children:"運用に関するお問い合わせは support@nightbase.jp までご連絡ください。"})]})]})})})}function eu({userEmail:e,supabaseClient:l,onRefreshAuth:d}){let u=(0,n.usePathname)(),h=(0,n.useSelectedLayoutSegments)(),[,p]=(0,s.useTransition)(),m=(0,s.useMemo)(()=>(function(e){if(0===e.length)return{title:"ダッシュボード",subtitle:"NightBase Admin"};let t=e.join("/");return t.startsWith("cms/blog")?{title:"ブログ",subtitle:"CMS"}:t.startsWith("cms/case-studies")?{title:"導入事例",subtitle:"CMS"}:t.startsWith("cms/manuals")?{title:"マニュアル",subtitle:"CMS"}:t.startsWith("cms")?{title:"CMS",subtitle:"コンテンツ管理"}:t.startsWith("settings")?{title:"設定",subtitle:"システム"}:t.startsWith("users")?{title:"ユーザー管理",subtitle:"システム"}:t.startsWith("analytics")?{title:"分析",subtitle:"レポート"}:{title:"管理画面",subtitle:"NightBase"}})(h),[h]);return(0,t.jsxs)("header",{className:"sticky top-0 z-40 flex h-16 w-full flex-none items-center justify-between border-b border-slate-200 bg-white/90 px-6 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(c.Sheet,{children:[(0,t.jsx)(c.SheetTrigger,{asChild:!0,children:(0,t.jsx)(r.Button,{variant:"outline",size:"icon",className:"border-slate-300 bg-white text-slate-700 lg:hidden",children:(0,t.jsx)(o.Menu,{className:"h-5 w-5"})})}),(0,t.jsxs)(c.SheetContent,{side:"left",className:"w-72 bg-white p-0 text-slate-900",children:[(0,t.jsx)(c.SheetHeader,{className:"px-6 pt-6",children:(0,t.jsx)(c.SheetTitle,{className:"text-slate-900",children:"NightBase Admin"})}),(0,t.jsx)("nav",{className:"space-y-8 px-6 pb-10",children:ec.map(e=>(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-500",children:e.title}),(0,t.jsx)("div",{className:"space-y-1",children:e.items.map(e=>(0,t.jsxs)(a.default,{href:e.href,className:(0,b.cn)("flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium",u?.startsWith(e.href)?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"),children:[(0,t.jsx)(e.icon,{className:"h-4 w-4"}),e.label]},e.href))})]},e.title))})]})]}),(0,t.jsxs)("div",{className:"hidden flex-col lg:flex",children:[(0,t.jsx)("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:m.subtitle}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:m.title})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"hidden flex-col items-end text-xs leading-tight text-slate-500 sm:flex",children:[(0,t.jsx)("span",{className:"font-semibold text-slate-900",children:e??"Admin"}),(0,t.jsx)("span",{className:"text-slate-400",children:"NightBase Team"})]}),(0,t.jsx)(r.Button,{asChild:!0,variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full border border-slate-300 bg-white text-slate-700 hover:bg-slate-50","aria-label":"アカウント設定",children:(0,t.jsx)(a.default,{href:"/admin/settings",children:(0,t.jsx)(i.CircleUser,{className:"h-6 w-6"})})}),(0,t.jsx)(r.Button,{asChild:!0,type:"button",variant:"outline",className:"border-slate-300 text-slate-700 hover:bg-slate-50",children:(0,t.jsx)(a.default,{href:"/",children:"ホームページに戻る"})})]})]})}var eh=e.i(68340),ep=e.i(30406),em=e.i(1817);function ef(){let e=(0,n.useRouter)(),l=(0,s.useMemo)(()=>(0,em.createBrowserClient)(),[]),[a,i]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[m,f]=(0,s.useState)(null);async function x(t){t.preventDefault(),p(!0),f(null);let{error:r}=await l.auth.signInWithPassword({email:a,password:o});(p(!1),r)?f("ログインに失敗しました。メールアドレスとパスワードをご確認ください。"):e.refresh()}return(0,t.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white/95 p-8 text-slate-900 shadow-2xl",children:[(0,t.jsx)("h1",{className:"mb-3 text-2xl font-semibold",children:"管理画面にログイン"}),(0,t.jsx)("p",{className:"mb-6 text-sm text-slate-600",children:"NightBase の管理者アカウントでサインインしてください。"}),(0,t.jsxs)("form",{className:"space-y-5",onSubmit:x,autoComplete:"on",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ep.Label,{htmlFor:"admin-email",children:"メールアドレス"}),(0,t.jsx)(eh.Input,{id:"admin-email",type:"email",name:"email",autoComplete:"email",value:a,onChange:e=>i(e.target.value),required:!0,disabled:h,className:"border-slate-200 bg-white/90 text-slate-900 placeholder:text-slate-400"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ep.Label,{htmlFor:"admin-password",children:"パスワード"}),(0,t.jsx)(eh.Input,{id:"admin-password",type:d?"text":"password",name:"password",autoComplete:"current-password",value:o,onChange:e=>c(e.target.value),required:!0,disabled:h,className:"border-slate-200 bg-white/90 text-slate-900 placeholder:text-slate-400"}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-slate-600",htmlFor:"admin-show-password",children:[(0,t.jsx)("input",{id:"admin-show-password",type:"checkbox",checked:d,onChange:e=>u(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-primary focus:ring-primary/40",disabled:h}),"パスワードを表示"]})]}),m?(0,t.jsx)("p",{className:"text-sm text-red-600",children:m}):null,(0,t.jsx)(r.Button,{type:"submit",disabled:h,className:"w-full bg-primary text-white hover:bg-primary/90",children:h?"ログイン中…":"ログイン"})]})]})}function ex({children:e}){let{supabase:s,authState:a,userEmail:n,refreshAuth:i}=(0,l.useAdminAuthState)();return"loading"===a?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-4 py-12 text-slate-700",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 text-sm text-slate-500",children:[(0,t.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-2 border-slate-300 border-t-slate-700","aria-hidden":!0}),(0,t.jsx)("p",{children:"読み込み中です…"})]})}):"unauthenticated"===a?(0,t.jsx)("div",{className:"min-h-screen bg-slate-50 px-4 py-12 text-slate-900",children:(0,t.jsx)("div",{className:"mx-auto flex max-w-6xl items-center justify-center",children:(0,t.jsx)(ef,{})})}):"unauthorized"===a?(0,t.jsx)("div",{className:"min-h-screen bg-slate-50 px-4 py-12 text-slate-900",children:(0,t.jsx)("div",{className:"mx-auto flex max-w-6xl items-center justify-center",children:(0,t.jsxs)("div",{className:"w-full max-w-md space-y-5 rounded-2xl bg-white p-8 text-center text-slate-900 shadow-xl",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"管理権限がありません"}),(0,t.jsx)("p",{className:"text-sm text-slate-600",children:"このアカウントには NightBase 管理画面へのアクセス権限がありません。管理者にお問い合わせください。"}),(0,t.jsx)(r.Button,{variant:"outline",className:"w-full text-slate-700",onClick:async()=>{await s.auth.signOut(),await i()},children:"別のアカウントでログイン"})]})})}):(0,t.jsx)("div",{className:"flex min-h-screen bg-white text-slate-900",children:(0,t.jsxs)("div",{className:"flex min-h-screen w-full",children:[(0,t.jsx)(ed,{}),(0,t.jsxs)("div",{className:"flex min-h-screen flex-1 flex-col",children:[(0,t.jsx)(eu,{userEmail:n,supabaseClient:s,onRefreshAuth:i}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto bg-white",children:e({supabase:s})})]})]})})}e.s(["AdminProtected",()=>ex],18135)}]);