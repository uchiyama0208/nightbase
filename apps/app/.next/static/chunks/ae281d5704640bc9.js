(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82054,e=>{"use strict";var t=e.i(18050),s=e.i(71645),a=e.i(97495);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{ref:r,className:(0,a.cn)("w-full caption-bottom text-left text-sm text-slate-900",e),...s})}));r.displayName="Table";let l=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("thead",{ref:r,className:(0,a.cn)("text-xs uppercase tracking-[0.25em] text-slate-500",e),...s}));l.displayName="TableHeader";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("tbody",{ref:r,className:(0,a.cn)("divide-y divide-slate-100",e),...s}));i.displayName="TableBody";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("tr",{ref:r,className:(0,a.cn)("border-b border-slate-200 transition hover:bg-slate-50",e),...s}));n.displayName="TableRow";let o=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("th",{ref:r,className:(0,a.cn)("py-3 text-xs font-semibold text-slate-500",e),...s}));o.displayName="TableHead";let c=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("td",{ref:r,className:(0,a.cn)("py-4 text-sm text-slate-900",e),...s}));c.displayName="TableCell",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("caption",{ref:r,className:(0,a.cn)("mt-4 text-xs text-slate-500",e),...s})).displayName="TableCaption",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("tfoot",{ref:r,className:(0,a.cn)("bg-slate-50",e),...s})).displayName="TableFooter",e.s(["Table",()=>r,"TableBody",()=>i,"TableCell",()=>c,"TableHead",()=>o,"TableHeader",()=>l,"TableRow",()=>n])},75160,e=>{"use strict";var t=e.i(18050),s=e.i(71645),a=e.i(97495);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("textarea",{className:(0,a.cn)("w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm transition focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 disabled:cursor-not-allowed disabled:opacity-60",e),ref:r,...s}));r.displayName="Textarea",e.s(["Textarea",()=>r])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},35804,e=>{"use strict";var t=e.i(71645),s=e.i(34620);function a(e){let[a,r]=t.useState(void 0);return(0,s.useLayoutEffect)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let l=t[0];if("borderBoxSize"in l){let e=l.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),a}e.s(["useSize",()=>a])},99682,e=>{"use strict";var t=e.i(71645);function s(e){let s=t.useRef({value:e,previous:e});return t.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},18494,e=>{"use strict";var t=e.i(18050),s=e.i(71645),a=e.i(26999),r=e.i(97495);let l=a.Root,i=a.Trigger,n=a.Portal,o=a.Close,c=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)(a.Overlay,{ref:l,className:(0,r.cn)("fixed inset-0 z-50 bg-slate-950/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out",e),...s}));c.displayName=a.Overlay.displayName;let d=s.forwardRef(({className:e,children:s,...l},i)=>(0,t.jsxs)(n,{children:[(0,t.jsx)(c,{}),(0,t.jsx)(a.Content,{ref:i,className:(0,r.cn)("fixed left-1/2 top-1/2 z-50 w-[calc(100%-2rem)] max-w-xl -translate-x-1/2 -translate-y-1/2 rounded-3xl border border-slate-200 bg-white p-8 text-slate-900 shadow-2xl backdrop-blur data-[state=open]:animate-in data-[state=closed]:animate-out dark:border-white/10 dark:bg-slate-950/95 dark:text-slate-100",e),...l,children:s})]}));d.displayName=a.Content.displayName;let u=({className:e,...s})=>(0,t.jsx)("div",{className:(0,r.cn)("mb-6 flex flex-col gap-2 text-center sm:text-left",e),...s});u.displayName="DialogHeader";let x=({className:e,...s})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});x.displayName="DialogFooter";let h=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)(a.Title,{ref:l,className:(0,r.cn)("text-xl font-semibold text-slate-900 dark:text-slate-50",e),...s}));h.displayName=a.Title.displayName;let f=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)(a.Description,{ref:l,className:(0,r.cn)("text-sm text-slate-500 dark:text-slate-400",e),...s}));f.displayName=a.Description.displayName,e.s(["Dialog",()=>l,"DialogClose",()=>o,"DialogContent",()=>d,"DialogDescription",()=>f,"DialogFooter",()=>x,"DialogHeader",()=>u,"DialogTitle",()=>h,"DialogTrigger",()=>i])},89907,e=>{"use strict";var t=e.i(18050),s=e.i(25913),a=e.i(97495);let r=(0,s.cva)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-white focus:ring-primary",secondary:"border-transparent bg-secondary text-[#111111] focus:ring-secondary",outline:"border-neutral-700/20 bg-transparent text-neutral-200 focus:ring-neutral-500",neutral:"border-transparent bg-neutral-100 text-neutral-600 focus:ring-neutral-300",success:"border-transparent bg-emerald-500/15 text-emerald-500 focus:ring-emerald-400",warning:"border-transparent bg-amber-500/15 text-amber-500 focus:ring-amber-400",destructive:"border-transparent bg-red-500/15 text-red-500 focus:ring-red-400"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...l}){return(0,t.jsx)("div",{className:(0,a.cn)(r({variant:s}),e),...l})}e.s(["Badge",()=>l])},68656,e=>{"use strict";let t=(0,e.i(75254).default)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);e.s(["default",()=>t])},73741,48425,e=>{"use strict";var t=e.i(71645);e.i(74080);var s=e.i(91918),a=e.i(18050),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let l=(0,s.createSlot)(`Primitive.${r}`),i=t.forwardRef((e,t)=>{let{asChild:s,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(s?l:r,{...i,ref:t})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{});e.s(["Primitive",()=>r],48425);var l=t.forwardRef((e,t)=>(0,a.jsx)(r.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label",e.s(["Label",()=>l,"Root",()=>l],73741)},30406,e=>{"use strict";var t=e.i(18050),s=e.i(71645),a=e.i(73741),r=e.i(97495);let l=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)(a.Root,{ref:l,className:(0,r.cn)("text-xs font-semibold uppercase tracking-[0.25em] text-slate-400",e),...s}));l.displayName=a.Root.displayName,e.s(["Label",()=>l])},68340,e=>{"use strict";var t=e.i(18050),s=e.i(71645),a=e.i(97495);let r=s.forwardRef(({className:e,type:s="text",...r},l)=>(0,t.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm transition focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-slate-950 dark:text-slate-50 dark:border-slate-800 dark:placeholder:text-slate-400",e),ref:l,...r}));r.displayName="Input",e.s(["Input",()=>r])},86318,e=>{"use strict";var t=e.i(71645);e.i(18050);var s=t.createContext(void 0);function a(e){let a=t.useContext(s);return e||a||"ltr"}e.s(["useDirection",()=>a])},70152,e=>{"use strict";function t(e,[t,s]){return Math.min(s,Math.max(t,e))}e.s(["clamp",()=>t])},75830,e=>{"use strict";var t=e.i(71645),s=e.i(18050),a=e.i(20783);function r(e){var r;let l,n=(r=e,(l=t.forwardRef((e,s)=>{let{children:r,...l}=e;if(t.isValidElement(r)){var i;let e,n,o=(i=r,(n=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(n=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),c=function(e,t){let s={...t};for(let a in t){let r=e[a],l=t[a];/^on[A-Z]/.test(a)?r&&l?s[a]=(...e)=>{let t=l(...e);return r(...e),t}:r&&(s[a]=r):"style"===a?s[a]={...r,...l}:"className"===a&&(s[a]=[r,l].filter(Boolean).join(" "))}return{...e,...s}}(l,r.props);return r.type!==t.Fragment&&(c.ref=s?(0,a.composeRefs)(s,o):o),t.cloneElement(r,c)}return t.Children.count(r)>1?t.Children.only(null):null})).displayName=`${r}.SlotClone`,l),o=t.forwardRef((e,a)=>{let{children:r,...l}=e,o=t.Children.toArray(r),c=o.find(i);if(c){let e=c.props.children,r=o.map(s=>s!==c?s:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,s.jsx)(n,{...l,ref:a,children:t.isValidElement(e)?t.cloneElement(e,void 0,r):null})}return(0,s.jsx)(n,{...l,ref:a,children:r})});return o.displayName=`${e}.Slot`,o}var l=Symbol("radix.slottable");function i(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}function n(e){let l=e+"CollectionProvider",[i,n]=function(e,a=[]){let r=[],l=()=>{let s=r.map(e=>t.createContext(e));return function(a){let r=a?.[e]||s;return t.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return l.scopeName=e,[function(a,l){let i=t.createContext(l),n=r.length;r=[...r,l];let o=a=>{let{scope:r,children:l,...o}=a,c=r?.[e]?.[n]||i,d=t.useMemo(()=>o,Object.values(o));return(0,s.jsx)(c.Provider,{value:d,children:l})};return o.displayName=a+"Provider",[o,function(s,r){let o=r?.[e]?.[n]||i,c=t.useContext(o);if(c)return c;if(void 0!==l)return l;throw Error(`\`${s}\` must be used within \`${a}\``)}]},function(...e){let s=e[0];if(1===e.length)return s;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=a.reduce((t,{useScope:s,scopeName:a})=>{let r=s(e)[`__scope${a}`];return{...t,...r}},{});return t.useMemo(()=>({[`__scope${s.scopeName}`]:r}),[r])}};return a.scopeName=s.scopeName,a}(l,...a)]}(l),[o,c]=i(l,{collectionRef:{current:null},itemMap:new Map}),d=e=>{let{scope:a,children:r}=e,l=t.default.useRef(null),i=t.default.useRef(new Map).current;return(0,s.jsx)(o,{scope:a,itemMap:i,collectionRef:l,children:r})};d.displayName=l;let u=e+"CollectionSlot",x=r(u),h=t.default.forwardRef((e,t)=>{let{scope:r,children:l}=e,i=c(u,r),n=(0,a.useComposedRefs)(t,i.collectionRef);return(0,s.jsx)(x,{ref:n,children:l})});h.displayName=u;let f=e+"CollectionItemSlot",m="data-radix-collection-item",p=r(f),y=t.default.forwardRef((e,r)=>{let{scope:l,children:i,...n}=e,o=t.default.useRef(null),d=(0,a.useComposedRefs)(r,o),u=c(f,l);return t.default.useEffect(()=>(u.itemMap.set(o,{ref:o,...n}),()=>void u.itemMap.delete(o))),(0,s.jsx)(p,{...{[m]:""},ref:d,children:i})});return y.displayName=f,[{Provider:d,Slot:h,ItemSlot:y},function(s){let a=c(e+"CollectionConsumer",s);return t.default.useCallback(()=>{let e=a.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${m}]`));return Array.from(a.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[a.collectionRef,a.itemMap])},n]}var o=new WeakMap;function c(e,t){var s,a;let r,l,i;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let n=(s=e,a=t,r=s.length,(i=(l=d(a))>=0?l:r+l)<0||i>=r?-1:i);return -1===n?void 0:e[n]}function d(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#e;constructor(e){super(e),this.#e=[...super.keys()],o.set(this,!0)}set(e,t){return o.get(this)&&(this.has(e)?this.#e[this.#e.indexOf(e)]=e:this.#e.push(e)),super.set(e,t),this}insert(e,t,s){let a,r=this.has(t),l=this.#e.length,i=d(e),n=i>=0?i:l+i,o=n<0||n>=l?-1:n;if(o===this.size||r&&o===this.size-1||-1===o)return this.set(t,s),this;let c=this.size+ +!r;i<0&&n++;let u=[...this.#e],x=!1;for(let e=n;e<c;e++)if(n===e){let l=u[e];u[e]===t&&(l=u[e+1]),r&&this.delete(t),a=this.get(l),this.set(t,s)}else{x||u[e-1]!==t||(x=!0);let s=u[x?e:e-1],r=a;a=this.get(s),this.delete(s),this.set(s,r)}return this}with(t,s,a){let r=new e(this);return r.insert(t,s,a),r}before(e){let t=this.#e.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,s){let a=this.#e.indexOf(e);return -1===a?this:this.insert(a,t,s)}after(e){let t=this.#e.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,s){let a=this.#e.indexOf(e);return -1===a?this:this.insert(a+1,t,s)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#e=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#e.splice(this.#e.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=c(this.#e,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=c(this.#e,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#e.indexOf(e)}keyAt(e){return c(this.#e,e)}from(e,t){let s=this.indexOf(e);if(-1===s)return;let a=s+t;return a<0&&(a=0),a>=this.size&&(a=this.size-1),this.at(a)}keyFrom(e,t){let s=this.indexOf(e);if(-1===s)return;let a=s+t;return a<0&&(a=0),a>=this.size&&(a=this.size-1),this.keyAt(a)}find(e,t){let s=0;for(let a of this){if(Reflect.apply(e,t,[a,s,this]))return a;s++}}findIndex(e,t){let s=0;for(let a of this){if(Reflect.apply(e,t,[a,s,this]))return s;s++}return -1}filter(t,s){let a=[],r=0;for(let e of this)Reflect.apply(t,s,[e,r,this])&&a.push(e),r++;return new e(a)}map(t,s){let a=[],r=0;for(let e of this)a.push([e[0],Reflect.apply(t,s,[e,r,this])]),r++;return new e(a)}reduce(...e){let[t,s]=e,a=0,r=s??this.at(0);for(let s of this)r=0===a&&1===e.length?s:Reflect.apply(t,this,[r,s,a,this]),a++;return r}reduceRight(...e){let[t,s]=e,a=s??this.at(-1);for(let s=this.size-1;s>=0;s--){let r=this.at(s);a=s===this.size-1&&1===e.length?r:Reflect.apply(t,this,[a,r,s,this])}return a}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let s=this.keyAt(e),a=this.get(s);t.set(s,a)}return t}toSpliced(...t){let s=[...this.entries()];return s.splice(...t),new e(s)}slice(t,s){let a=new e,r=this.size-1;if(void 0===t)return a;t<0&&(t+=this.size),void 0!==s&&s>0&&(r=s-1);for(let e=t;e<=r;e++){let t=this.keyAt(e),s=this.get(t);a.set(t,s)}return a}every(e,t){let s=0;for(let a of this){if(!Reflect.apply(e,t,[a,s,this]))return!1;s++}return!0}some(e,t){let s=0;for(let a of this){if(Reflect.apply(e,t,[a,s,this]))return!0;s++}return!1}}),e.s(["createCollection",()=>n],75830)},74886,e=>{"use strict";let t=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},58551,e=>{"use strict";var t=e.i(18050),s=e.i(57688),a=e.i(71645),r=e.i(95187),l=(0,r.createServerReference)("40c6ac2758dfc3a203b0445eadd0044237a7643d08",r.callServer,void 0,r.findSourceMapURL,"cancelInvitation"),i=e.i(3420),n=e.i(68340),o=e.i(82054),c=e.i(83660),d=e.i(89907),u=e.i(7233),x=e.i(55436),h=(0,r.createServerReference)("407f73d041bbeb8a449b1a11854978deb1f2bd26db",r.callServer,void 0,r.findSourceMapURL,"createInvitation"),f=e.i(18494),m=e.i(30406),p=e.i(1781),y=e.i(74886),g=e.i(43531),b=e.i(2246);function v({open:e,onOpenChange:r,uninvitedProfiles:l,roles:o}){let[d,x]=(0,a.useState)("form"),[v,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(""),[k,C]=(0,a.useState)("none"),[S,R]=(0,a.useState)("7"),[T,D]=(0,a.useState)(""),[I,M]=(0,a.useState)(!1),[z,B]=(0,a.useState)(""),[O,_]=(0,a.useState)(!1),[A,$]=(0,a.useState)(!1),L=async e=>{if(e.preventDefault(),w){j(!0);try{let e=await h({profileId:w,roleId:"none"===k?void 0:k,expiresInDays:parseInt(S),password:I?T:void 0});if(e.success&&e.invitation){let t=`${window.location.origin}/invite/${e.invitation.token}`;B(t),x("result")}}catch(e){console.error(e),alert("招待の作成に失敗しました")}finally{j(!1)}}},H=()=>{r(!1),setTimeout(()=>{x("form"),N(""),C("none"),R("7"),D(""),M(!1),B("")},300)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Dialog,{open:e&&!A,onOpenChange:H,children:(0,t.jsxs)(f.DialogContent,{className:"max-w-[calc(100vw-32px)] max-h-[calc(100vh-32px)] overflow-y-auto sm:max-w-[500px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white !p-4 sm:!p-6 my-4",children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:"text-black dark:text-white",children:"form"===d?"ユーザーを招待":"招待リンクを作成しました"}),(0,t.jsx)(f.DialogDescription,{children:"form"===d?"招待するプロフィールと条件を設定してください。":"以下のリンクをユーザーに共有してください。"})]}),"form"===d?(0,t.jsxs)("form",{onSubmit:L,className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(m.Label,{children:"プロフィール選択"}),(0,t.jsxs)("button",{type:"button",onClick:()=>$(!0),className:"text-xs text-blue-600 dark:text-blue-400 flex items-center gap-1 hover:underline",children:[(0,t.jsx)(u.Plus,{className:"h-3 w-3"}),"新しいプロフィールを作成"]})]}),(0,t.jsxs)(c.Select,{value:w,onValueChange:N,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"招待するプロフィールを選択"})}),(0,t.jsx)(c.SelectContent,{children:l.map(e=>(0,t.jsxs)(c.SelectItem,{value:e.id,children:[e.display_name," (","cast"===e.role?"キャスト":"スタッフ",")"]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"付与するロール (任意)"}),(0,t.jsxs)(c.Select,{value:k,onValueChange:C,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"ロールを選択 (なし)"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"none",children:"なし (デフォルト権限)"}),o.map(e=>(0,t.jsx)(c.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"有効期限"}),(0,t.jsxs)(c.Select,{value:S,onValueChange:R,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"有効期限を選択"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"1",children:"1日"}),(0,t.jsx)(c.SelectItem,{value:"3",children:"3日"}),(0,t.jsx)(c.SelectItem,{value:"7",children:"1週間"}),(0,t.jsx)(c.SelectItem,{value:"30",children:"30日"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.Checkbox,{id:"use-password",checked:I,onCheckedChange:e=>M(e)}),(0,t.jsx)(m.Label,{htmlFor:"use-password",children:"パスワードを設定する"})]}),I&&(0,t.jsx)(n.Input,{type:"password",placeholder:"パスワードを入力",value:T,onChange:e=>D(e.target.value),required:I})]}),(0,t.jsxs)(f.DialogFooter,{className:"pt-4 gap-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:H,children:"キャンセル"}),(0,t.jsx)(i.Button,{type:"submit",disabled:v||!w,children:v?"作成中...":"招待リンクを作成"})]})]}):(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"招待リンク"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Input,{readOnly:!0,value:z,className:"font-mono text-sm"}),(0,t.jsx)(i.Button,{type:"button",size:"icon",variant:"outline",onClick:()=>{navigator.clipboard.writeText(z),_(!0),setTimeout(()=>_(!1),2e3)},children:O?(0,t.jsx)(g.Check,{className:"h-4 w-4"}):(0,t.jsx)(y.Copy,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(s.default,{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(z)}`,alt:"招待QRコード",className:"border rounded-lg p-2",width:150,height:150,unoptimized:!0})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Button,{type:"button",className:"w-full bg-[#06C755] hover:bg-[#05b54b] text-white",onClick:()=>window.open(`https://line.me/R/msg/text/?${encodeURIComponent(`招待リンクをお送りします。
${z}`)}`,"_blank"),children:"LINEで送る"}),(0,t.jsx)(i.Button,{type:"button",variant:"outline",className:"w-full",onClick:H,children:"閉じる"})]})]})]})}),(0,t.jsx)(b.UserEditModal,{open:A,onOpenChange:$,profile:null,isNested:!0})]})}let j=(0,e.i(75254).default)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var w=e.i(73375),N=e.i(1851),k=e.i(33625);function C({invitation:e,open:r,onOpenChange:o,onCancel:c}){let[u,x]=(0,a.useState)(!1),[h,p]=(0,a.useTransition)();if(!e)return null;let b=`${window.location.origin}/invite/${e.token}`,v=new Date(e.expires_at)<new Date&&"pending"===e.status,C="pending"===e.status&&!v,S=async()=>{confirm("本当にこの招待をキャンセルしますか？")&&p(async()=>{try{await l(e.id),c&&c(),o(!1)}catch(e){alert("キャンセルに失敗しました")}})};return(0,t.jsx)(f.Dialog,{open:r,onOpenChange:o,children:(0,t.jsxs)(f.DialogContent,{className:"max-w-[calc(100vw-32px)] sm:max-w-[400px] max-h-[calc(100vh-32px)] overflow-y-auto bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsxs)("div",{className:"relative flex items-center justify-center py-2",children:[(0,t.jsx)("button",{onClick:()=>o(!1),className:"absolute left-0 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,t.jsx)(w.ChevronLeft,{className:"h-5 w-5 text-gray-500"})}),(0,t.jsx)(f.DialogTitle,{className:"text-black dark:text-white",children:"招待詳細"})]}),(0,t.jsx)(f.DialogDescription,{children:"招待のステータスや詳細を確認できます。"})]}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(m.Label,{className:"text-xs text-muted-foreground",children:"招待プロフィール"}),(0,t.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[e.profile?.avatar_url&&(0,t.jsx)(s.default,{src:e.profile.avatar_url,alt:`${e.profile.display_name}のアバター`,className:"rounded-full object-cover",width:24,height:24}),e.profile?.display_name]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(m.Label,{className:"text-xs text-muted-foreground",children:"ロール"}),(0,t.jsxs)("div",{className:"font-medium",children:[e.profile?.role==="cast"?"キャスト":"スタッフ",e.role&&"staff"!==e.role.name&&"cast"!==e.role.name&&"スタッフ"!==e.role.name&&"キャスト"!==e.role.name&&(0,t.jsxs)("span",{className:"text-sm text-gray-500 ml-1",children:["(",e.role.name,")"]})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(m.Label,{className:"text-xs text-muted-foreground",children:"ステータス"}),(0,t.jsx)("div",{children:"canceled"===e.status?(0,t.jsx)(d.Badge,{variant:"destructive",children:"キャンセル"}):"accepted"===e.status?(0,t.jsx)(d.Badge,{className:"bg-green-500",children:"参加済み"}):v?(0,t.jsx)(d.Badge,{variant:"secondary",children:"期限切れ"}):(0,t.jsx)(d.Badge,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"招待中"})})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(m.Label,{className:"text-xs text-muted-foreground",children:"有効期限"}),(0,t.jsx)("div",{className:"font-medium",children:(0,N.format)(new Date(e.expires_at),"yyyy/MM/dd HH:mm",{locale:k.ja})})]})]}),"pending"===e.status&&!v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"招待リンク"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Input,{readOnly:!0,value:b,className:"font-mono text-sm"}),(0,t.jsx)(i.Button,{type:"button",size:"icon",variant:"outline",onClick:()=>{navigator.clipboard.writeText(b),x(!0),setTimeout(()=>x(!1),2e3)},children:u?(0,t.jsx)(g.Check,{className:"h-4 w-4"}):(0,t.jsx)(y.Copy,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(s.default,{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(b)}`,alt:"招待QRコード",className:"border rounded-lg p-2",width:150,height:150,unoptimized:!0})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(i.Button,{type:"button",className:"w-full bg-[#06C755] hover:bg-[#05b54b] text-white",onClick:()=>window.open(`https://line.me/R/msg/text/?${encodeURIComponent(`招待リンクをお送りします。
${b}`)}`,"_blank"),children:"LINEで共有"}),C&&(0,t.jsxs)(i.Button,{type:"button",variant:"destructive",onClick:S,disabled:h,className:"w-full",children:[(0,t.jsx)(j,{className:"mr-2 h-4 w-4"}),"招待をキャンセル"]})]})]}),(0,t.jsx)(i.Button,{type:"button",variant:"outline",className:"w-full",onClick:()=>o(!1),children:"閉じる"})]})]})})}function S({initialInvitations:e,uninvitedProfiles:r,roles:l}){let[h,f]=(0,a.useState)(e),[m,p]=(0,a.useState)(""),[y,g]=(0,a.useState)("all"),[b,j]=(0,a.useState)("all"),[w,S]=(0,a.useState)(!1),[R,T]=(0,a.useTransition)(),[D,I]=(0,a.useState)(null),[M,z]=(0,a.useState)(null),[B,O]=(0,a.useState)(!1),_=h.filter(e=>{let t=(e.profile?.display_name||"").toLowerCase().includes(m.toLowerCase()),s="all"===y||e.status===y,a="all"===b||e.profile?.role===b;return t&&s&&a});return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(x.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.Input,{placeholder:"名前で検索...",value:m,onChange:e=>p(e.target.value),className:"pl-8 bg-white dark:bg-gray-800"})]}),(0,t.jsxs)(c.Select,{value:y,onValueChange:g,children:[(0,t.jsx)(c.SelectTrigger,{className:"w-[130px] sm:w-[180px] bg-white dark:bg-gray-800",children:(0,t.jsx)(c.SelectValue,{placeholder:"ステータス"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"all",children:"全て"}),(0,t.jsx)(c.SelectItem,{value:"pending",children:"招待中"}),(0,t.jsx)(c.SelectItem,{value:"accepted",children:"参加済み"}),(0,t.jsx)(c.SelectItem,{value:"canceled",children:"キャンセル"}),(0,t.jsx)(c.SelectItem,{value:"expired",children:"期限切れ"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-full overflow-x-auto max-w-[calc(100%-50px)]",children:[(0,t.jsx)("button",{onClick:()=>j("all"),className:`px-3 sm:px-4 py-1.5 text-xs sm:text-sm rounded-full whitespace-nowrap transition-all ${"all"===b?"bg-white dark:bg-gray-700 shadow-sm font-medium":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"全て"}),(0,t.jsx)("button",{onClick:()=>j("cast"),className:`px-3 sm:px-4 py-1.5 text-xs sm:text-sm rounded-full whitespace-nowrap transition-all ${"cast"===b?"bg-white dark:bg-gray-700 shadow-sm font-medium":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"キャスト"}),(0,t.jsx)("button",{onClick:()=>j("staff"),className:`px-3 sm:px-4 py-1.5 text-xs sm:text-sm rounded-full whitespace-nowrap transition-all ${"staff"===b?"bg-white dark:bg-gray-700 shadow-sm font-medium":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"スタッフ"})]}),(0,t.jsx)(i.Button,{onClick:()=>S(!0),size:"icon",className:"rounded-full w-10 h-10 bg-blue-600 hover:bg-blue-700 shrink-0",children:(0,t.jsx)(u.Plus,{className:"h-5 w-5"})})]})]}),(0,t.jsx)("div",{className:"rounded-md border bg-white dark:bg-gray-800",children:(0,t.jsxs)(o.Table,{children:[(0,t.jsx)(o.TableHeader,{children:(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableHead,{className:"text-center w-1/3",children:"名前"}),(0,t.jsx)(o.TableHead,{className:"text-center w-1/3",children:"ステータス"}),(0,t.jsx)(o.TableHead,{className:"text-center w-1/3",children:"有効期限"})]})}),(0,t.jsx)(o.TableBody,{children:0===_.length?(0,t.jsx)(o.TableRow,{children:(0,t.jsx)(o.TableCell,{colSpan:3,className:"text-center py-8 text-gray-500",children:"招待が見つかりません"})}):_.map(e=>{var a;let r;return(0,t.jsxs)(o.TableRow,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50",onClick:()=>{z(e),O(!0)},children:[(0,t.jsx)(o.TableCell,{className:"font-medium text-center w-1/3",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[e.profile?.avatar_url&&(0,t.jsx)(s.default,{src:e.profile.avatar_url,alt:`${e.profile.display_name}のアバター`,className:"rounded-full object-cover",width:24,height:24}),e.profile?.display_name]})}),(0,t.jsx)(o.TableCell,{className:"text-center w-1/3",children:(0,t.jsx)("div",{className:"flex justify-center",children:(a=e.status,r=new Date(e.expires_at)<new Date&&"pending"===a,"canceled"===a?(0,t.jsx)(d.Badge,{variant:"destructive",children:"キャンセル"}):"accepted"===a?(0,t.jsx)(d.Badge,{className:"bg-green-500",children:"参加済み"}):r?(0,t.jsx)(d.Badge,{variant:"secondary",children:"期限切れ"}):(0,t.jsx)(d.Badge,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"招待中"}))})}),(0,t.jsx)(o.TableCell,{className:"text-sm text-gray-500 text-center w-1/3",children:"accepted"===e.status?"ー":(0,N.format)(new Date(e.expires_at),"yyyy/MM/dd HH:mm",{locale:k.ja})})]},e.id)})})]})}),(0,t.jsx)(v,{open:w,onOpenChange:S,uninvitedProfiles:r,roles:l}),(0,t.jsx)(C,{invitation:M,open:B,onOpenChange:O,onCancel:()=>{M&&(f(e=>e.map(e=>e.id===M.id?{...e,status:"canceled"}:e)),z(e=>e?{...e,status:"canceled"}:null))}})]})}e.s(["InvitationList",()=>S],58551)}]);