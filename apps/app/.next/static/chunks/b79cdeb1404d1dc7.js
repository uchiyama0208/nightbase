(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82054,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(97495);let l=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("div",{className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{ref:l,className:(0,s.cn)("w-full caption-bottom text-left text-sm text-slate-900",e),...a})}));l.displayName="Table";let r=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("thead",{ref:l,className:(0,s.cn)("text-xs uppercase tracking-[0.25em] text-slate-500",e),...a}));r.displayName="TableHeader";let n=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("tbody",{ref:l,className:(0,s.cn)("divide-y divide-slate-100",e),...a}));n.displayName="TableBody";let i=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("tr",{ref:l,className:(0,s.cn)("border-b border-slate-200 transition hover:bg-slate-50",e),...a}));i.displayName="TableRow";let c=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("th",{ref:l,className:(0,s.cn)("py-3 text-xs font-semibold text-slate-500",e),...a}));c.displayName="TableHead";let o=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("td",{ref:l,className:(0,s.cn)("py-4 text-sm text-slate-900",e),...a}));o.displayName="TableCell",a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("caption",{ref:l,className:(0,s.cn)("mt-4 text-xs text-slate-500",e),...a})).displayName="TableCaption",a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("tfoot",{ref:l,className:(0,s.cn)("bg-slate-50",e),...a})).displayName="TableFooter",e.s(["Table",()=>l,"TableBody",()=>n,"TableCell",()=>o,"TableHead",()=>c,"TableHeader",()=>r,"TableRow",()=>i])},89907,e=>{"use strict";var t=e.i(18050),a=e.i(25913),s=e.i(97495);let l=(0,a.cva)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-white focus:ring-primary",secondary:"border-transparent bg-secondary text-[#111111] focus:ring-secondary",outline:"border-neutral-700/20 bg-transparent text-neutral-200 focus:ring-neutral-500",neutral:"border-transparent bg-neutral-100 text-neutral-600 focus:ring-neutral-300",success:"border-transparent bg-emerald-500/15 text-emerald-500 focus:ring-emerald-400",warning:"border-transparent bg-amber-500/15 text-amber-500 focus:ring-amber-400",destructive:"border-transparent bg-red-500/15 text-red-500 focus:ring-red-400"}},defaultVariants:{variant:"default"}});function r({className:e,variant:a,...r}){return(0,t.jsx)("div",{className:(0,s.cn)(l({variant:a}),e),...r})}e.s(["Badge",()=>r])},86318,e=>{"use strict";var t=e.i(71645);e.i(18050);var a=t.createContext(void 0);function s(e){let s=t.useContext(a);return e||s||"ltr"}e.s(["useDirection",()=>s])},70152,e=>{"use strict";function t(e,[t,a]){return Math.min(a,Math.max(t,e))}e.s(["clamp",()=>t])},18566,(e,t,a)=>{t.exports=e.r(76562)},73741,48425,e=>{"use strict";var t=e.i(71645);e.i(74080);var a=e.i(91918),s=e.i(18050),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,l)=>{let r=(0,a.createSlot)(`Primitive.${l}`),n=t.forwardRef((e,t)=>{let{asChild:a,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(a?r:l,{...n,ref:t})});return n.displayName=`Primitive.${l}`,{...e,[l]:n}},{});e.s(["Primitive",()=>l],48425);var r=t.forwardRef((e,t)=>(0,s.jsx)(l.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label",e.s(["Label",()=>r,"Root",()=>r],73741)},30406,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(73741),l=e.i(97495);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Root,{ref:r,className:(0,l.cn)("text-xs font-semibold uppercase tracking-[0.25em] text-slate-400",e),...a}));r.displayName=s.Root.displayName,e.s(["Label",()=>r])},68340,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(97495);let l=a.forwardRef(({className:e,type:a="text",...l},r)=>(0,t.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm transition focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-slate-950 dark:text-slate-50 dark:border-slate-800 dark:placeholder:text-slate-400",e),ref:r,...l}));l.displayName="Input",e.s(["Input",()=>l])},68656,e=>{"use strict";let t=(0,e.i(75254).default)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);e.s(["default",()=>t])},33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},18581,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"useMergedRef",{enumerable:!0,get:function(){return l}});let s=e.r(71645);function l(e,t){let a=(0,s.useRef)(null),l=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=a.current;e&&(a.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(a.current=r(e,s)),t&&(l.current=r(t,s))},[e,t])}function r(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},98183,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={assign:function(){return c},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return i}};for(var l in s)Object.defineProperty(a,l,{enumerable:!0,get:s[l]});function r(e){let t={};for(let[a,s]of e.entries()){let e=t[a];void 0===e?t[a]=s:Array.isArray(e)?e.push(s):t[a]=[e,s]}return t}function n(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[a,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.append(a,n(e));else t.set(a,n(s));return t}function c(e,...t){for(let a of t){for(let t of a.keys())e.delete(t);for(let[t,s]of a.entries())e.append(t,s)}return e}},95057,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={formatUrl:function(){return i},formatWithValidation:function(){return o},urlObjectKeys:function(){return c}};for(var l in s)Object.defineProperty(a,l,{enumerable:!0,get:s[l]});let r=e.r(90809)._(e.r(98183)),n=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:a}=e,s=e.protocol||"",l=e.pathname||"",i=e.hash||"",c=e.query||"",o=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?o=t+e.host:a&&(o=t+(~a.indexOf(":")?`[${a}]`:a),e.port&&(o+=":"+e.port)),c&&"object"==typeof c&&(c=String(r.urlQueryToSearchParams(c)));let d=e.search||c&&`?${c}`||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||n.test(s))&&!1!==o?(o="//"+(o||""),l&&"/"!==l[0]&&(l="/"+l)):o||(o=""),i&&"#"!==i[0]&&(i="#"+i),d&&"?"!==d[0]&&(d="?"+d),l=l.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${s}${o}${l}${d}${i}`}let c=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function o(e){return i(e)}},18967,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={DecodeError:function(){return b},MiddlewareNotFoundError:function(){return N},MissingStaticPage:function(){return j},NormalizeError:function(){return g},PageNotFoundError:function(){return y},SP:function(){return m},ST:function(){return f},WEB_VITALS:function(){return r},execOnce:function(){return n},getDisplayName:function(){return u},getLocationOrigin:function(){return o},getURL:function(){return d},isAbsoluteUrl:function(){return c},isResSent:function(){return x},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return v}};for(var l in s)Object.defineProperty(a,l,{enumerable:!0,get:s[l]});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,a=!1;return(...s)=>(a||(a=!0,t=e(...s)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,c=e=>i.test(e);function o(){let{protocol:e,hostname:t,port:a}=window.location;return`${e}//${t}${a?":"+a:""}`}function d(){let{href:e}=window.location,t=o();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function x(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let a=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(a&&x(a))return s;if(!s)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let m="undefined"!=typeof performance,f=m&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class b extends Error{}class g extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class j extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class N extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function v(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"isLocalURL",{enumerable:!0,get:function(){return r}});let s=e.r(18967),l=e.r(52817);function r(e){if(!(0,s.isAbsoluteUrl)(e))return!0;try{let t=(0,s.getLocationOrigin)(),a=new URL(e,t);return a.origin===t&&(0,l.hasBasePath)(a.pathname)}catch(e){return!1}}},84508,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"errorOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},22016,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={default:function(){return b},useLinkStatus:function(){return y}};for(var l in s)Object.defineProperty(a,l,{enumerable:!0,get:s[l]});let r=e.r(90809),n=e.r(18050),i=r._(e.r(71645)),c=e.r(95057),o=e.r(8372),d=e.r(18581),u=e.r(18967),x=e.r(5550);e.r(33525);let h=e.r(91949),p=e.r(73668),m=e.r(9396);function f(e){return"string"==typeof e?e:(0,c.formatUrl)(e)}function b(t){var a;let s,l,r,[c,b]=(0,i.useOptimistic)(h.IDLE_LINK_STATUS),y=(0,i.useRef)(null),{href:j,as:N,children:v,prefetch:w=null,passHref:T,replace:k,shallow:C,scroll:S,onClick:_,onMouseEnter:P,onTouchStart:R,legacyBehavior:O=!1,onNavigate:E,ref:D,unstable_dynamicOnHover:L,...M}=t;s=v,O&&("string"==typeof s||"number"==typeof s)&&(s=(0,n.jsx)("a",{children:s}));let $=i.default.useContext(o.AppRouterContext),I=!1!==w,A=!1!==w?null===(a=w)||"auto"===a?m.FetchStrategy.PPR:m.FetchStrategy.Full:m.FetchStrategy.PPR,{href:B,as:H}=i.default.useMemo(()=>{let e=f(j);return{href:e,as:N?f(N):e}},[j,N]);if(O){if(s?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});l=i.default.Children.only(s)}let U=O?l&&"object"==typeof l&&l.ref:D,F=i.default.useCallback(e=>(null!==$&&(y.current=(0,h.mountLinkInstance)(e,B,$,A,I,b)),()=>{y.current&&((0,h.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,h.unmountPrefetchableInstance)(e)}),[I,B,$,A,b]),z={ref:(0,d.useMergedRef)(F,U),onClick(t){O||"function"!=typeof _||_(t),O&&l.props&&"function"==typeof l.props.onClick&&l.props.onClick(t),!$||t.defaultPrevented||function(t,a,s,l,r,n,c){if("undefined"!=typeof window){let o,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((o=t.currentTarget.getAttribute("target"))&&"_self"!==o||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(a)){r&&(t.preventDefault(),location.replace(a));return}if(t.preventDefault(),c){let e=!1;if(c({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(99781);i.default.startTransition(()=>{u(s||a,r?"replace":"push",n??!0,l.current)})}}(t,B,H,y,k,S,E)},onMouseEnter(e){O||"function"!=typeof P||P(e),O&&l.props&&"function"==typeof l.props.onMouseEnter&&l.props.onMouseEnter(e),$&&I&&(0,h.onNavigationIntent)(e.currentTarget,!0===L)},onTouchStart:function(e){O||"function"!=typeof R||R(e),O&&l.props&&"function"==typeof l.props.onTouchStart&&l.props.onTouchStart(e),$&&I&&(0,h.onNavigationIntent)(e.currentTarget,!0===L)}};return(0,u.isAbsoluteUrl)(H)?z.href=H:O&&!T&&("a"!==l.type||"href"in l.props)||(z.href=(0,x.addBasePath)(H)),r=O?i.default.cloneElement(l,z):(0,n.jsx)("a",{...M,...z,children:s}),(0,n.jsx)(g.Provider,{value:c,children:r})}e.r(84508);let g=(0,i.createContext)(h.IDLE_LINK_STATUS),y=()=>(0,i.useContext)(g);("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},61911,e=>{"use strict";let t=(0,e.i(75254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],61911)},92161,e=>{"use strict";let t=(0,e.i(75254).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);e.s(["Menu",()=>t],92161)},34730,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(26999),l=e.i(97495);let r=s.Root,n=s.Trigger,i=s.Portal;s.Close;let c=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Overlay,{ref:r,className:(0,l.cn)("fixed inset-0 z-50 bg-slate-950/70 backdrop-blur data-[state=open]:animate-in data-[state=closed]:animate-out",e),...a}));c.displayName=s.Overlay.displayName;let o=a.forwardRef(({side:e="right",className:a,children:r,...n},o)=>(0,t.jsxs)(i,{children:[(0,t.jsx)(c,{}),(0,t.jsx)(s.Content,{ref:o,className:(0,l.cn)("fixed z-50 flex h-full w-full max-w-md flex-col bg-slate-950/95 p-6 text-slate-100 shadow-2xl backdrop-blur data-[state=open]:animate-in data-[state=closed]:animate-out","right"===e&&"right-0 top-0 data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right","left"===e&&"left-0 top-0 data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left","bottom"===e&&"bottom-0 left-1/2 -translate-x-1/2 data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom","top"===e&&"top-0 left-1/2 -translate-x-1/2 data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",a),...n,children:r})]}));o.displayName=s.Content.displayName;let d=({className:e,...a})=>(0,t.jsx)("div",{className:(0,l.cn)("mb-6 flex flex-col gap-2",e),...a});d.displayName="SheetHeader";let u=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Title,{ref:r,className:(0,l.cn)("text-lg font-semibold text-slate-50",e),...a}));u.displayName=s.Title.displayName;let x=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Description,{ref:r,className:(0,l.cn)("text-sm text-slate-400",e),...a}));x.displayName=s.Description.displayName,e.s(["Sheet",()=>r,"SheetContent",()=>o,"SheetDescription",()=>x,"SheetHeader",()=>d,"SheetTitle",()=>u,"SheetTrigger",()=>n])},60289,39616,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);e.s(["LayoutDashboard",()=>a],60289);let s=(0,t.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>s],39616)},66441,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(18135),l=e.i(89907),r=e.i(3420),n=e.i(68340),i=e.i(38360),c=e.i(34730),o=e.i(82054),d=e.i(97495);let u=[{key:"blog",type:"blog",label:"ブログ"},{key:"case",type:"case_study",label:"導入事例",isCaseStudy:!0},{key:"manual",type:"manual",label:"マニュアル"}],x={blog:"ブログ",case:"導入事例",manual:"マニュアル"},h=[{value:"all",label:"すべて"},{value:"blog",label:"ブログ"},{value:"case",label:"導入事例"},{value:"manual",label:"マニュアル"}],p=[{value:"all",label:"すべて"},{value:"ok",label:"OK"},{value:"needs_attention",label:"要改善"}];function m({title:e,value:a,description:s}){return(0,t.jsxs)("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:e}),(0,t.jsx)("p",{className:"mt-3 text-4xl font-semibold text-white",children:a}),(0,t.jsx)("p",{className:"mt-2 text-sm text-slate-400",children:s})]})}function f({supabase:e}){let[s,l]=(0,a.useState)({loading:!0,error:null,records:[]}),[i,c]=(0,a.useState)("all"),[o,f]=(0,a.useState)("all"),[v,w]=(0,a.useState)(""),[T,k]=(0,a.useState)(null),C=(0,a.useCallback)(async()=>{l(e=>({...e,loading:!0,error:null}));try{let t=await Promise.all(u.map(async t=>{let{data:a,error:s}=await e.from("cms_entries").select("id, type, title, status, published_at, slug, body").eq("type",t.type);if(s)throw Error(`${t.label}の取得に失敗しました: ${s.message}`);return(a??[]).map(e=>{let a="string"==typeof e?.slug?e.slug:"",s="string"==typeof e?.body?e.body:null;return{id:e.id,title:e.title??`${t.label} ${e.id}`,slug:a,status:e.status??"draft",published_at:e.published_at??null,updated_at:e.published_at??null,type:t.key,body:s&&s.length>0?s:null}})}));l({loading:!1,error:null,records:t.flat()})}catch(e){console.error("[AdminAnalytics] データ取得エラー",e),l({loading:!1,error:e instanceof Error?e.message:"分析データの取得に失敗しました。",records:[]})}},[e]);(0,a.useEffect)(()=>{C()},[C]);let S=(0,a.useMemo)(()=>{var e;let t,a,l,r=new Date,n=new Date(r);n.setDate(r.getDate()-30);let i=s.records.filter(e=>"published"===e.status),c=i.length,o=i.filter(e=>!!e.published_at&&new Date(e.published_at)>=n).length,x=s.records.filter(e=>"published"!==e.status).length,h=s.records.reduce((e,t)=>{let a=t.updated_at??t.published_at;if(!a)return e;let s=new Date(a);return!e||s>e?s:e},null),p=(e=i,(a=new Date(t=new Date)).setDate(t.getDate()-84+1),l=Array.from({length:12},(e,t)=>{let s=new Date(a);return s.setDate(a.getDate()+7*t),{label:`${s.getMonth()+1}/${s.getDate()}`,count:0}}),e.forEach(e=>{if(!e.published_at)return;let t=new Date(e.published_at);if(t<a)return;let s=t.getTime()-a.getTime(),r=Math.min(l.length-1,Math.max(0,Math.floor(s/6048e5)));l[r].count+=1}),l),m=u.map(e=>({label:e.label,count:i.filter(t=>t.type===e.key).length})),f=[...s.records].filter(e=>e.updated_at||e.published_at).sort((e,t)=>{let a=new Date(e.updated_at??e.published_at??0).getTime();return new Date(t.updated_at??t.published_at??0).getTime()-a}).slice(0,10);return{publishedTotal:c,publishedLast30:o,draftCount:x,lastUpdatedLabel:h?(0,d.formatDateTime)(h.toISOString()):"更新履歴なし",timelineData:p,breakdown:m,recent:f}},[s.records]),_=(0,a.useMemo)(()=>s.records.filter(e=>"published"===e.status).map(e=>{var t,a,s;let l,r,n,i=(e.title?.trim()??"").length,c=(l=[],0===(t=i)?l.push("タイトルが設定されていません"):(t<5&&l.push("タイトルが短すぎます"),t>45&&l.push("タイトルが長すぎる可能性があります")),l),o=(a=e.slug??"",r=[],(n=a?.trim()??"")?(n.length>60&&r.push("スラッグが長すぎます"),/\s/.test(n)&&r.push("スラッグにスペースが含まれています"),/^[a-z0-9-/]+$/.test(n)||r.push("スラッグは半角英数字とハイフンで構成してください")):r.push("スラッグが設定されていません"),r),d=(s=e.body)?Array.from(s.matchAll(/\[[^\]]*\]\((\/[^)\s]+)\)/g),e=>e[1]):[],u=function(e){if(!e)return[];let t=e.replace(/https?:\/\/\S+/g," ").match(/[A-Za-z0-9\u3040-\u30FF\u4E00-\u9FFF]{2,}/g)??[],a=new Set(["です","ます","こと","よう","nightbase","NightBase","する"]),s=new Map;return t.forEach(e=>{let t=e.toLowerCase();a.has(t)||s.set(t,(s.get(t)??0)+1)}),Array.from(s.entries()).sort((e,t)=>t[1]-e[1]).slice(0,8).map(([e,t])=>({word:e,count:t}))}(e.body),h=[...c,...o];return 0===d.length&&h.push("内部リンクを追加しましょう"),{...e,typeLabel:x[e.type],titleLength:i,titleIssues:c,slugIssues:o,internalLinkCount:d.length,internalLinks:d,keywords:u,advice:h,seoStatus:h.length>0?"needs_attention":"ok",summaryText:e.body?e.body.slice(0,600):""}}),[s.records]),P=(0,a.useMemo)(()=>{let e=v.trim().toLowerCase();return _.filter(t=>{let a="all"===i||t.type===i,s="all"===o||t.seoStatus===o,l=!e||t.title.toLowerCase().includes(e)||t.slug.toLowerCase().includes(e);return a&&s&&l})},[_,v,o,i]),R=(0,a.useMemo)(()=>{let e=_.filter(e=>"needs_attention"===e.seoStatus);return{total:_.length,needsAttention:e.length,titleIssues:_.filter(e=>e.titleIssues.length>0).length,slugIssues:_.filter(e=>e.slugIssues.length>0).length}},[_]);return s.loading?(0,t.jsx)("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-8 text-center text-slate-300",children:"分析データを読み込んでいます…"}):s.error?(0,t.jsxs)("div",{className:"space-y-4 rounded-3xl border border-red-500/40 bg-red-500/10 p-8 text-center text-red-100",children:[(0,t.jsx)("p",{children:s.error}),(0,t.jsx)(r.Button,{variant:"outline",className:"border-white/20 text-white",onClick:C,children:"再読み込み"})]}):(0,t.jsxs)("div",{className:"space-y-10",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"分析"}),(0,t.jsx)("h1",{className:"text-4xl font-semibold text-white",children:"分析ダッシュボード"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"ブログ・導入事例・マニュアルの公開状況や更新状況を一目で確認できます。"})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[(0,t.jsx)(m,{title:"総公開コンテンツ",value:`${S.publishedTotal}`,description:"現在公開中の合計件数"}),(0,t.jsx)(m,{title:"直近30日",value:`${S.publishedLast30}`,description:"直近30日間で公開された件数"}),(0,t.jsx)(m,{title:"下書き",value:`${S.draftCount}`,description:"公開待ちのコンテンツ"}),(0,t.jsx)(m,{title:"最終更新",value:S.lastUpdatedLabel,description:"3種別の最新更新日時"})]}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1.3fr_0.7fr]",children:[(0,t.jsxs)("section",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[(0,t.jsxs)("header",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"推移"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"公開コンテンツの推移 (週次)"})]}),(0,t.jsx)(b,{data:S.timelineData})]}),(0,t.jsxs)("section",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[(0,t.jsxs)("header",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"内訳"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"コンテンツ種別ごとの公開数"})]}),(0,t.jsx)(g,{data:S.breakdown})]})]}),(0,t.jsxs)("section",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[(0,t.jsxs)("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"最近の更新"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"最近更新されたコンテンツ"})]}),(0,t.jsx)(r.Button,{variant:"outline",className:"border-white/20 text-white",onClick:C,children:"最新の情報に更新"})]}),(0,t.jsx)(y,{items:S.recent})]}),(0,t.jsxs)("section",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[(0,t.jsxs)("header",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"SEO"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"SEOヘルス概要"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"タイトルやスラッグ、内部リンクの状態を確認し、改善が必要なページを把握できます。"})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[(0,t.jsx)(m,{title:"チェック対象ページ",value:`${R.total}`,description:"公開中のコンテンツ総数"}),(0,t.jsx)(m,{title:"要改善",value:`${R.needsAttention}`,description:"SEO改善が必要なページ数"}),(0,t.jsx)(m,{title:"タイトル要調整",value:`${R.titleIssues}`,description:"推奨文字数から外れているページ"}),(0,t.jsx)(m,{title:"スラッグ要確認",value:`${R.slugIssues}`,description:"スラッグに問題があるページ"})]})]}),(0,t.jsxs)("section",{className:"space-y-6 rounded-3xl border border-white/10 bg-white/5 p-6",children:[(0,t.jsxs)("header",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"SEOチェック"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"SEOチェック一覧"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"種別やステータスで絞り込み、改善ポイントや内部リンク状況を確認できます。"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(n.Input,{value:v,onChange:e=>w(e.target.value),placeholder:"タイトルやスラッグで検索",className:"bg-slate-900/60 text-white"}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:h.map(e=>(0,t.jsx)(r.Button,{type:"button",variant:i===e.value?"default":"outline",className:(0,d.cn)("text-sm",i===e.value?"bg-primary text-white":"border-white/20 text-slate-200 hover:bg-white/10 hover:text-white"),onClick:()=>c(e.value),children:e.label},e.value))}),(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:p.map(e=>(0,t.jsx)(r.Button,{type:"button",variant:o===e.value?"default":"outline",className:(0,d.cn)("text-sm",o===e.value?"bg-secondary text-slate-900":"border-white/20 text-slate-200 hover:bg-white/10 hover:text-white"),onClick:()=>f(e.value),children:e.label},e.value))})]})]}),(0,t.jsx)(j,{records:P,onSelect:k}),(0,t.jsx)(N,{record:T,onClose:()=>k(null)})]})]})}function b({data:e}){let a=Math.max(...e.map(e=>e.count),1);return(0,t.jsx)("div",{className:"flex h-48 items-end gap-2",children:e.map(e=>(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:"w-full rounded-t-2xl bg-primary/60",style:{height:`${e.count/a*100}%`}}),(0,t.jsx)("span",{className:"text-[11px] text-slate-400",children:e.label}),(0,t.jsx)("span",{className:"text-xs font-semibold text-white",children:e.count})]},e.label))})}function g({data:e}){let a=e.reduce((e,t)=>e+t.count,0)||1;return(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-slate-300",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)("span",{className:"font-semibold text-white",children:e.count})]}),(0,t.jsx)("div",{className:"h-2 rounded-full bg-slate-800",children:(0,t.jsx)("div",{className:"h-full rounded-full bg-secondary",style:{width:`${e.count/a*100}%`}})})]},e.label))})}function y({items:e}){return(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(o.Table,{children:[(0,t.jsx)(o.TableHeader,{children:(0,t.jsxs)(o.TableRow,{className:"border-white/10 bg-slate-900/70 text-xs uppercase tracking-[0.25em] text-slate-400",children:[(0,t.jsx)(o.TableHead,{className:"px-6",children:"種別"}),(0,t.jsx)(o.TableHead,{children:"タイトル"}),(0,t.jsx)(o.TableHead,{children:"ステータス"}),(0,t.jsx)(o.TableHead,{children:"公開日"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"最終更新"})]})}),(0,t.jsx)(o.TableBody,{children:0===e.length?(0,t.jsx)(o.TableRow,{children:(0,t.jsx)(o.TableCell,{colSpan:5,className:"py-10 text-center text-sm text-slate-400",children:"最近の更新履歴がありません。"})}):e.map(e=>(0,t.jsxs)(o.TableRow,{className:"border-white/5",children:[(0,t.jsx)(o.TableCell,{className:"px-6 text-sm text-slate-300",children:x[e.type]}),(0,t.jsx)(o.TableCell,{className:"text-sm text-white",children:e.title}),(0,t.jsx)(o.TableCell,{children:(0,t.jsx)(l.Badge,{variant:"published"===e.status?"success":"neutral",className:(0,d.cn)("px-3 py-1 text-xs","published"===e.status?"bg-emerald-500/20 text-emerald-300":"bg-slate-800 text-slate-300"),children:"published"===e.status?"公開":"下書き"})}),(0,t.jsx)(o.TableCell,{className:"text-sm text-slate-300",children:(0,d.formatDateTime)(e.published_at)}),(0,t.jsx)(o.TableCell,{className:"text-right text-sm text-slate-300",children:(0,d.formatDateTime)(e.updated_at)})]},`${e.type}-${e.id}`))})]})})}function j({records:e,onSelect:a}){return(0,t.jsx)("div",{className:"overflow-x-auto rounded-3xl border border-white/10 bg-slate-900/50",children:(0,t.jsxs)(o.Table,{children:[(0,t.jsx)(o.TableHeader,{children:(0,t.jsxs)(o.TableRow,{className:"border-white/10 bg-slate-900/70 text-xs uppercase tracking-[0.2em] text-slate-400",children:[(0,t.jsx)(o.TableHead,{className:"px-6",children:"種別"}),(0,t.jsx)(o.TableHead,{children:"タイトル"}),(0,t.jsx)(o.TableHead,{children:"スラッグ"}),(0,t.jsx)(o.TableHead,{children:"公開日"}),(0,t.jsx)(o.TableHead,{children:"タイトル文字数"}),(0,t.jsx)(o.TableHead,{children:"スラッグ品質"}),(0,t.jsx)(o.TableHead,{children:"内部リンク"}),(0,t.jsx)(o.TableHead,{children:"SEOステータス"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"改善ポイント"})]})}),(0,t.jsx)(o.TableBody,{children:0===e.length?(0,t.jsx)(o.TableRow,{children:(0,t.jsx)(o.TableCell,{colSpan:9,className:"py-10 text-center text-sm text-slate-400",children:"条件に一致するページはありません。"})}):e.map(e=>{let s=0===e.slugIssues.length;return(0,t.jsxs)(o.TableRow,{className:"cursor-pointer border-white/5 hover:bg-white/5",onClick:()=>a(e),children:[(0,t.jsx)(o.TableCell,{className:"px-6 text-sm text-slate-300",children:e.typeLabel}),(0,t.jsx)(o.TableCell,{className:"text-sm text-white",children:e.title}),(0,t.jsx)(o.TableCell,{className:"text-xs text-slate-400",children:e.slug||"-"}),(0,t.jsx)(o.TableCell,{className:"text-sm text-slate-300",children:(0,d.formatDateTime)(e.published_at)}),(0,t.jsxs)(o.TableCell,{className:"text-sm text-slate-300",children:[e.titleLength,"文字"]}),(0,t.jsx)(o.TableCell,{children:(0,t.jsx)(l.Badge,{className:(0,d.cn)("px-3 py-1 text-xs",s?"bg-emerald-500/20 text-emerald-200":"bg-amber-500/20 text-amber-100"),children:s?"良好":"要確認"})}),(0,t.jsx)(o.TableCell,{className:"text-sm text-slate-300",children:e.internalLinkCount}),(0,t.jsx)(o.TableCell,{children:(0,t.jsx)(l.Badge,{className:(0,d.cn)("px-3 py-1 text-xs","ok"===e.seoStatus?"bg-emerald-500/20 text-emerald-200":"bg-rose-500/20 text-rose-100"),children:"ok"===e.seoStatus?"OK":"要改善"})}),(0,t.jsx)(o.TableCell,{className:"text-right text-sm text-slate-300",children:e.advice.length>0?e.advice[0]:"良好"})]},`${e.type}-${e.id}`)})})]})})}function N({record:e,onClose:a}){return(0,t.jsx)(c.Sheet,{open:!!e,onOpenChange:e=>e?null:a(),children:(0,t.jsx)(c.SheetContent,{side:"right",className:"w-full border-l border-white/10 bg-slate-950 text-white sm:max-w-xl",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.SheetHeader,{children:[(0,t.jsx)(c.SheetTitle,{className:"text-2xl font-semibold text-white",children:e.title}),(0,t.jsxs)(c.SheetDescription,{className:"text-sm text-slate-400",children:[e.typeLabel," / ",e.slug||"スラッグ未設定"]})]}),(0,t.jsx)(i.ScrollArea,{className:"mt-6 h-[calc(100vh-10rem)] pr-4",children:(0,t.jsxs)("div",{className:"space-y-6 pb-10",children:[(0,t.jsxs)("div",{className:"space-y-3 rounded-2xl bg-white/5 p-4",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"概要"}),(0,t.jsxs)("dl",{className:"space-y-2 text-sm text-slate-200",children:[(0,t.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,t.jsx)("dt",{className:"text-slate-400",children:"種別"}),(0,t.jsx)("dd",{children:e.typeLabel})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,t.jsx)("dt",{className:"text-slate-400",children:"公開日"}),(0,t.jsx)("dd",{children:(0,d.formatDateTime)(e.published_at)})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,t.jsx)("dt",{className:"text-slate-400",children:"最終更新"}),(0,t.jsx)("dd",{children:(0,d.formatDateTime)(e.updated_at)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3 rounded-2xl bg-white/5 p-4",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"タイトル & スラッグ"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-slate-200",children:[(0,t.jsxs)("li",{children:["タイトル文字数: ",e.titleLength,"文字"]}),(0,t.jsxs)("li",{children:["スラッグ: ",e.slug||"未設定"]})]}),(0,t.jsx)("div",{className:"rounded-2xl bg-slate-900/60 p-3 text-sm text-slate-300",children:0===e.titleIssues.length&&0===e.slugIssues.length?"タイトル・スラッグは良好です":(0,t.jsx)("ul",{className:"list-disc space-y-1 pl-5",children:[...e.titleIssues,...e.slugIssues].map(e=>(0,t.jsx)("li",{children:e},e))})})]}),(0,t.jsxs)("div",{className:"space-y-3 rounded-2xl bg-white/5 p-4",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"改善ポイント"}),0===e.advice.length?(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"現在のところ特別な改善は必要ありません。"}):(0,t.jsx)("ul",{className:"list-disc space-y-1 pl-5 text-sm text-slate-200",children:e.advice.map(e=>(0,t.jsx)("li",{children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-3 rounded-2xl bg-white/5 p-4",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"内部リンク"}),0===e.internalLinks.length?(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"内部リンクが見つかりませんでした。"}):(0,t.jsx)("ul",{className:"space-y-2 text-sm text-slate-200",children:e.internalLinks.map(e=>(0,t.jsx)("li",{className:"truncate text-primary",children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-3 rounded-2xl bg-white/5 p-4",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"キーワード頻度"}),0===e.keywords.length?(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"キーワードを特定できませんでした。"}):(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.keywords.map(e=>(0,t.jsxs)(l.Badge,{className:"bg-slate-800 text-slate-200",children:[e.word," (",e.count,")"]},e.word))})]}),(0,t.jsxs)("div",{className:"space-y-3 rounded-2xl bg-white/5 p-4",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"コンテンツ抜粋"}),(0,t.jsx)("p",{className:"text-sm text-slate-300 whitespace-pre-wrap",children:e.summaryText||"本文が登録されていません。"})]})]})})]}):null})})}function v(){return(0,t.jsx)(s.AdminProtected,{children:({supabase:e})=>(0,t.jsx)(f,{supabase:e})})}e.s(["default",()=>v,"dynamic",0,"force-dynamic"])}]);