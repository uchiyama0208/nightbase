(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82054,e=>{"use strict";var t=e.i(18050),a=e.i(71645),l=e.i(97495);let s=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-left text-sm text-slate-900",e),...a})}));s.displayName="Table";let r=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("thead",{ref:s,className:(0,l.cn)("text-xs uppercase tracking-[0.25em] text-slate-500",e),...a}));r.displayName="TableHeader";let n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("tbody",{ref:s,className:(0,l.cn)("divide-y divide-slate-100",e),...a}));n.displayName="TableBody";let i=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("tr",{ref:s,className:(0,l.cn)("border-b border-slate-200 transition hover:bg-slate-50",e),...a}));i.displayName="TableRow";let o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("th",{ref:s,className:(0,l.cn)("py-3 text-xs font-semibold text-slate-500",e),...a}));o.displayName="TableHead";let d=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("td",{ref:s,className:(0,l.cn)("py-4 text-sm text-slate-900",e),...a}));d.displayName="TableCell",a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-xs text-slate-500",e),...a})).displayName="TableCaption",a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("tfoot",{ref:s,className:(0,l.cn)("bg-slate-50",e),...a})).displayName="TableFooter",e.s(["Table",()=>s,"TableBody",()=>n,"TableCell",()=>d,"TableHead",()=>o,"TableHeader",()=>r,"TableRow",()=>i])},97548,1920,e=>{"use strict";let t=(0,e.i(75254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],97548);var a=e.i(18050),l=e.i(22016),s=e.i(3420),r=e.i(68340),n=e.i(71645),i=e.i(81140),o=e.i(42727),d=e.i(96626);e.i(74080);var c=e.i(20783),u=Symbol("radix.slottable");function m(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}var x=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var l,s;let r,i,o,d=(s=l=`Primitive.${t}`,(r=n.forwardRef((e,t)=>{let{children:a,...l}=e;if(n.isValidElement(a)){var s;let e,r,i=(s=a,(r=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(r=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),o=function(e,t){let a={...t};for(let l in t){let s=e[l],r=t[l];/^on[A-Z]/.test(l)?s&&r?a[l]=(...e)=>{let t=r(...e);return s(...e),t}:s&&(a[l]=s):"style"===l?a[l]={...s,...r}:"className"===l&&(a[l]=[s,r].filter(Boolean).join(" "))}return{...e,...a}}(l,a.props);return a.type!==n.Fragment&&(o.ref=t?(0,c.composeRefs)(t,i):i),n.cloneElement(a,o)}return n.Children.count(a)>1?n.Children.only(null):null})).displayName=`${s}.SlotClone`,i=r,(o=n.forwardRef((e,t)=>{let{children:l,...s}=e,r=n.Children.toArray(l),o=r.find(m);if(o){let e=o.props.children,l=r.map(t=>t!==o?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,a.jsx)(i,{...s,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,l):null})}return(0,a.jsx)(i,{...s,ref:t,children:l})})).displayName=`${l}.Slot`,o),u=n.forwardRef((e,l)=>{let{asChild:s,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(s?d:t,{...r,ref:l})});return u.displayName=`Primitive.${t}`,{...e,[t]:u}},{}),f=e.i(86318),p=e.i(69340),b=e.i(10772),h="Tabs",[j,y]=function(e,t=[]){let l=[],s=()=>{let t=l.map(e=>n.createContext(e));return function(a){let l=a?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[function(t,s){let r=n.createContext(s),i=l.length;l=[...l,s];let o=t=>{let{scope:l,children:s,...o}=t,d=l?.[e]?.[i]||r,c=n.useMemo(()=>o,Object.values(o));return(0,a.jsx)(d.Provider,{value:c,children:s})};return o.displayName=t+"Provider",[o,function(a,l){let o=l?.[e]?.[i]||r,d=n.useContext(o);if(d)return d;if(void 0!==s)return s;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let l=a.reduce((t,{useScope:a,scopeName:l})=>{let s=a(e)[`__scope${l}`];return{...t,...s}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return a.scopeName=t.scopeName,a}(s,...t)]}(h,[o.createRovingFocusGroupScope]),g=(0,o.createRovingFocusGroupScope)(),[w,v]=j(h),N=n.forwardRef((e,t)=>{let{__scopeTabs:l,value:s,onValueChange:r,defaultValue:n,orientation:i="horizontal",dir:o,activationMode:d="automatic",...c}=e,u=(0,f.useDirection)(o),[m,j]=(0,p.useControllableState)({prop:s,onChange:r,defaultProp:n??"",caller:h});return(0,a.jsx)(w,{scope:l,baseId:(0,b.useId)(),value:m,onValueChange:j,orientation:i,dir:u,activationMode:d,children:(0,a.jsx)(x.div,{dir:u,"data-orientation":i,...c,ref:t})})});N.displayName=h;var C="TabsList",T=n.forwardRef((e,t)=>{let{__scopeTabs:l,loop:s=!0,...r}=e,n=v(C,l),i=g(l);return(0,a.jsx)(o.Root,{asChild:!0,...i,orientation:n.orientation,dir:n.dir,loop:s,children:(0,a.jsx)(x.div,{role:"tablist","aria-orientation":n.orientation,...r,ref:t})})});T.displayName=C;var R="TabsTrigger",_=n.forwardRef((e,t)=>{let{__scopeTabs:l,value:s,disabled:r=!1,...n}=e,d=v(R,l),c=g(l),u=$(d.baseId,s),m=H(d.baseId,s),f=s===d.value;return(0,a.jsx)(o.Item,{asChild:!0,...c,focusable:!r,active:f,children:(0,a.jsx)(x.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":m,"data-state":f?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u,...n,ref:t,onMouseDown:(0,i.composeEventHandlers)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(s)}),onKeyDown:(0,i.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(s)}),onFocus:(0,i.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;f||r||!e||d.onValueChange(s)})})})});_.displayName=R;var S="TabsContent",D=n.forwardRef((e,t)=>{let{__scopeTabs:l,value:s,forceMount:r,children:i,...o}=e,c=v(S,l),u=$(c.baseId,s),m=H(c.baseId,s),f=s===c.value,p=n.useRef(f);return n.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(d.Presence,{present:r||f,children:({present:l})=>(0,a.jsx)(x.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!l,id:m,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:l&&i})})});function $(e,t){return`${e}-trigger-${t}`}function H(e,t){return`${e}-content-${t}`}D.displayName=S;var M=e.i(97495);let E=n.forwardRef(({className:e,...t},l)=>(0,a.jsx)(T,{ref:l,className:(0,M.cn)("inline-flex h-11 items-center justify-center gap-2 rounded-full bg-slate-900/60 p-1 text-slate-400",e),...t}));E.displayName=T.displayName;let F=n.forwardRef(({className:e,...t},l)=>(0,a.jsx)(_,{ref:l,className:(0,M.cn)("inline-flex min-w-[100px] items-center justify-center rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary data-[state=active]:bg-primary data-[state=active]:text-white",e),...t}));function k({title:e,description:t,searchPlaceholder:n,searchValue:i,onSearchChange:o,statusTabs:d,statusValue:c,onStatusChange:u,createHref:m,createLabel:x,secondaryFilters:f,children:p}){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-primary",children:"CMS"}),(0,a.jsx)("h1",{className:"text-3xl font-semibold text-slate-900",children:e}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:t})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsx)("div",{className:"w-full md:max-w-md",children:(0,a.jsx)(r.Input,{value:i,onChange:e=>o(e.target.value),placeholder:n,className:"w-full border border-slate-300 bg-white text-slate-900 placeholder:text-slate-400"})}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-3 md:w-auto md:flex-row md:items-center md:justify-end",children:[(0,a.jsx)(N,{value:c,onValueChange:u,className:"w-full md:w-auto",children:(0,a.jsx)(E,{className:"w-full justify-start rounded-full bg-slate-100 md:w-auto",children:d.map(e=>(0,a.jsx)(F,{value:e.value,className:"px-4 text-xs uppercase tracking-[0.2em]",children:e.label},e.value))})}),(0,a.jsx)(s.Button,{asChild:!0,className:"w-full justify-center gap-2 bg-primary text-white md:w-auto md:self-stretch",children:(0,a.jsx)(l.default,{href:m,children:x})})]})]}),f?(0,a.jsx)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:f}):null,(0,a.jsx)("div",{className:"mt-2 overflow-hidden rounded-2xl border border-slate-200 bg-white",children:p})]})}F.displayName=_.displayName,n.forwardRef(({className:e,...t},l)=>(0,a.jsx)(D,{ref:l,className:(0,M.cn)("mt-6 focus-visible:outline-none",e),...t})).displayName=D.displayName,e.s(["CmsListLayout",()=>k],1920)},50097,e=>{"use strict";var t=e.i(18050),a=e.i(71645),l=e.i(97548),s=e.i(18135),r=e.i(1920),n=e.i(18566),i=e.i(89907),o=e.i(82054),d=e.i(97495);function c({items:e}){let a=(0,n.useRouter)();return(0,t.jsxs)(o.Table,{className:"min-w-full",children:[(0,t.jsx)(o.TableHeader,{children:(0,t.jsxs)(o.TableRow,{className:"border-b border-slate-200 bg-slate-50 text-xs uppercase tracking-[0.25em] text-slate-500",children:[(0,t.jsx)(o.TableHead,{className:"px-6",children:"タイトル"}),(0,t.jsx)(o.TableHead,{children:"スラッグ"}),(0,t.jsx)(o.TableHead,{children:"タグ"}),(0,t.jsx)(o.TableHead,{children:"ステータス"}),(0,t.jsx)(o.TableHead,{children:"公開日"}),(0,t.jsx)(o.TableHead,{className:"w-32 text-center",children:"サムネイル"})]})}),(0,t.jsx)(o.TableBody,{children:0===e.length?(0,t.jsx)(o.TableRow,{children:(0,t.jsx)(o.TableCell,{colSpan:6,className:"py-10 text-center text-sm text-slate-400",children:"条件に一致するマニュアルがありません。"})}):e.map(e=>(0,t.jsxs)(o.TableRow,{className:"cursor-pointer border-b border-slate-100 hover:bg-slate-50",onClick:()=>a.push(`/admin/cms/manuals/${e.id}`),children:[(0,t.jsx)(o.TableCell,{className:"px-6 text-sm text-slate-900",children:e.title}),(0,t.jsx)(o.TableCell,{className:"text-xs text-slate-600",children:e.slug}),(0,t.jsx)(o.TableCell,{className:"text-sm text-slate-700",children:e.category??"未分類"}),(0,t.jsx)(o.TableCell,{children:(0,t.jsx)(i.Badge,{variant:"published"===e.status?"success":"neutral",className:(0,d.cn)("px-3 py-1 text-xs","published"===e.status?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-700"),children:"published"===e.status?"公開":"下書き"})}),(0,t.jsx)(o.TableCell,{className:"text-sm text-slate-600",children:(0,d.formatDateTime)(e.published_at)}),(0,t.jsx)(o.TableCell,{className:"w-32 text-center",children:e.thumbnail_url?(0,t.jsx)("div",{className:"inline-flex h-10 w-16 overflow-hidden rounded-md border border-slate-200 bg-slate-50",children:(0,t.jsx)("img",{src:e.thumbnail_url,alt:"",className:"h-full w-full object-cover"})}):(0,t.jsx)("span",{className:"text-xs text-slate-400",children:"なし"})})]},e.id))})]})}var u=e.i(3420),m=e.i(2515);let x=[{value:"all",label:"すべて"},{value:"published",label:"公開"},{value:"draft",label:"下書き"}];function f({supabase:e}){let[s,n]=(0,a.useState)({loading:!0,error:null,items:[]}),[i,o]=(0,a.useState)(""),[d,f]=(0,a.useState)("all"),[p,b]=(0,a.useState)("すべて"),h=(0,a.useCallback)(async()=>{n(e=>({...e,loading:!0,error:null}));let{data:t,error:a}=await e.from("cms_entries").select("id, type, title, slug, body, status, published_at, tags, cover_image_url").eq("type","manual").order("published_at",{ascending:!0,nullsFirst:!1}).order("title",{ascending:!0});if(a){console.error("マニュアルの取得に失敗しました",a),n(e=>({...e,loading:!1,error:"マニュアルの取得に失敗しました"}));return}n({loading:!1,error:null,items:(t??[]).map(e=>{let t=Array.isArray(e.tags)?e.tags:[],a=t.length>0?t[0]:null;return{id:e.id,title:e.title,slug:e.slug,body_markdown:e.body??null,category:a,status:e.status??"draft",published_at:e.published_at??null,thumbnail_url:e.cover_image_url??null}})})},[e]);(0,a.useEffect)(()=>{h()},[h]);let j=(0,a.useMemo)(()=>{let e=new Set;return s.items.forEach(t=>{"string"==typeof t.category&&t.category.length>0&&e.add(t.category)}),["すべて",...Array.from(e).sort()]},[s.items]),y=(0,a.useMemo)(()=>s.items.filter(e=>{let t=!i||`${e.title} ${e.body_markdown??""}`.toLowerCase().includes(i.toLowerCase()),a="all"===d||("published"===d?"published"===e.status:"published"!==e.status),l="すべて"===p||(e.category??"").toLowerCase()===p.toLowerCase();return t&&a&&l}),[i,s.items,d,p]);if(s.loading)return(0,t.jsx)("div",{className:"p-8",children:(0,t.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-8 text-center text-slate-600",children:"マニュアルを読み込んでいます…"})});if(s.error)return(0,t.jsx)("div",{className:"p-8",children:(0,t.jsxs)("div",{className:"space-y-4 rounded-2xl border border-red-500/40 bg-red-500/10 p-8 text-center text-red-900",children:[(0,t.jsx)("p",{children:s.error}),(0,t.jsx)(u.Button,{variant:"outline",className:"border-red-300 text-red-900",onClick:h,children:"再読み込み"})]})});let g=(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"タグ"}),(0,t.jsxs)(m.DropdownMenu,{children:[(0,t.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(u.Button,{variant:"outline",className:"w-full justify-between border-slate-300 bg-white text-slate-700 md:w-64",children:[(0,t.jsx)("span",{children:p}),(0,t.jsx)(l.Filter,{className:"h-4 w-4"})]})}),(0,t.jsxs)(m.DropdownMenuContent,{align:"end",className:"w-64",children:[(0,t.jsx)(m.DropdownMenuLabel,{children:"タグで絞り込み"}),(0,t.jsx)(m.DropdownMenuSeparator,{}),j.map(e=>(0,t.jsx)(m.DropdownMenuItem,{onSelect:()=>b(e),children:e},e))]})]})]});return(0,t.jsx)("div",{className:"space-y-10 p-8",children:(0,t.jsx)(r.CmsListLayout,{title:"マニュアル",description:"マニュアルコンテンツの公開・下書きを管理します。",searchPlaceholder:"タイトルやスラッグで検索",searchValue:i,onSearchChange:o,statusTabs:x,statusValue:d,onStatusChange:e=>f(e),createHref:"/admin/cms/manuals/new",createLabel:"新規作成",secondaryFilters:g,children:(0,t.jsx)(c,{items:y})})})}function p(){return(0,t.jsx)(s.AdminProtected,{children:({supabase:e})=>(0,t.jsx)(f,{supabase:e})})}e.s(["default",()=>p,"dynamic",0,"force-dynamic"],50097)}]);